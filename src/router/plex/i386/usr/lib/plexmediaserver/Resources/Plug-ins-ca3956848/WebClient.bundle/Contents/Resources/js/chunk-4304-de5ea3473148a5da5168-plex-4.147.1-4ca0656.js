"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[4304],{25251:(e,t,a)=>{a.r(t),a.d(t,{default:()=>fy});var n=a(96540),r=a(84593),i=a(94772),l=a(32649),o=a(71468),s=a(24180),c=a(98713),m=a(10933),d=a(93915),u=a(54552),y=a(74e3),p=a(77130),v=a(93764),f=a(66900),A=a(43581),b=a(40317),g=a(59051),E=a(73325),h=a(37806),I=a(43597),P=a(67687),S=a(20020),w=a(41084),O=a(12166),R=a(67056),C=a(90313),T=a(63078),M=a(58489),D=a(59154),k=a(50228),x=a(52312),L=a(31216),j=a(46772),N=a(53364),F=a(18697),U=a(28732),V=a(42464),B=a(98341),H=a(16726),W=a(92942),z=a(74486);const K=(0,n.createContext)({width:0,height:0,contentHeight:0,scrollTop:0,scrollLeft:0,onRequestScrollPosition(){}});function q(){return(0,n.useContext)(K)}function Q({children:e,width:t,height:a,contentHeight:r,scrollTop:i,scrollLeft:l,onRequestScrollPosition:o}){const s=(0,n.useMemo)((()=>({width:t,height:a,contentHeight:r,scrollTop:i,scrollLeft:l,onRequestScrollPosition:o})),[t,a,r,i,l,o]);return n.createElement(K.Provider,{value:s},e)}var $=a(2697);const G={container:"PrePlayMetadata-container-ud0cxN",attributionLogo:"PrePlayMetadata-attributionLogo-_fLKOF"};var J=Object.defineProperty,X=Object.defineProperties,_=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,te=(e,t,a)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ae=(e,t)=>{for(var a in t||(t={}))Z.call(t,a)&&te(e,a,t[a]);if(Y)for(var a of Y(t))ee.call(t,a)&&te(e,a,t[a]);return e},ne=(e,t)=>X(e,_(t)),re=(e,t)=>{var a={};for(var n in e)Z.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Y)for(var n of Y(e))t.indexOf(n)<0&&ee.call(e,n)&&(a[n]=e[n]);return a};function ie(e){const{attribution:t,attributionLogo:a}=e;return a?n.createElement("img",{className:G.attributionLogo,src:a}):t?n.createElement(z.A,{attribution:t}):null}function le(e){const t=e,{metadataItem:a,showAttributionLogo:r,poster:i}=t,l=re(t,["metadataItem","showAttributionLogo","poster"]),o=q(),s=(0,$.A)()||o.width>=800;return n.createElement("div",{className:G.container},n.createElement(U.OS,ne(ae({},l),{attributionLogo:r?ie(a):null,poster:s?i:null,summaryLabelLess:(0,j.A)("Less"),summaryLabelMore:(0,j.A)("More")})))}function oe(e,t){switch(t){case v.QD.Movie:return 1===e?(0,j.A)("1 Movie"):(0,j.A)("{movieCount} Movies",{movieCount:e});case v.QD.Show:return 1===e?(0,j.A)("1 Show"):(0,j.A)("{showCount} Shows",{showCount:e});case v.QD.Season:return(0,j.A)("Seasons");case v.QD.Episode:return 1===e?(0,j.A)("1 Episode"):(0,j.A)("{episodeCount} Episodes",{episodeCount:e});case v.QD.Album:return 1===e?(0,j.A)("1 Album"):(0,j.A)("{albumCount} Albums",{albumCount:e});case v.QD.Track:return 1===e?(0,j.A)("1 Track"):(0,j.A)("{trackCount} Tracks",{trackCount:e});default:return 1===e?(0,j.A)("1 Item"):(0,j.A)("{itemCount} Items",{itemCount:e})}}var se=a(43280),ce=a(60180),me=a(88920);const de=function(e){const[t,a]=(0,n.useState)(0),r=(0,n.useRef)(null),i=(0,n.useCallback)((e=>{r.current=e,r.current&&a(r.current.offsetTop)}),[]);return(0,n.useEffect)((()=>{r.current&&a(r.current.offsetTop)}),[e]),[t,i]};var ue=a(91561),ye=a(22020),pe=a(38837),ve=a(84230);const fe=Object.assign({},{defaultFontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif',boldFontFamily:'"PlexCircular","Open Sans", -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif',smallFontSize:"12px",smallIconFontSize:"12px",defaultFontSize:"13px",defaultIconFontSize:"14px",largeFontSize:"15px",headerFontSize:"24px",lineHeightComputed:"1.71428571"},{hubTitleLineHeight:"24px"});var Ae=a(10544),be=a(49202),ge=a(32996),Ee=a(7339),he=a(35260);function Ie(e){const t=(0,o.wA)(),a=(0,o.d4)(he.A),r=(0,n.useMemo)((()=>e.every((e=>a.items[Ee.R.getIdentity(e)]))),[e,a]),i=(0,n.useCallback)((()=>{t(Ee.A.actions.selectItems({items:e}))}),[t,e]),l=(0,n.useCallback)((()=>{t(Ee.A.actions.deselectItems({items:e}))}),[t,e]),s=(0,n.useCallback)((()=>{r?l():i()}),[r,l,i]);return{isSelectionActive:!!a.count,isSelected:r,onSelect:i,onDeselect:l,onToggleSelect:s}}var Pe=a(50304),Se=a(70687);const we={titleContainer:"PrePlayListTitle-titleContainer-aRl8Fh",selectButton:"PrePlayListTitle-selectButton-HQwiGj SelectButton-selectButton-_goGWp",selectedTitleContainer:"PrePlayListTitle-selectedTitleContainer-CyMOyk PrePlayListTitle-titleContainer-aRl8Fh"};function Oe({className:e=we.titleContainer,selectedClassName:t=we.selectedTitleContainer,selectButtonClassName:a=we.selectButton,isSelected:r=!1,isSelectable:i,onSelectPress:l,title:o}){return n.createElement("div",{className:r?t:e},i?n.createElement(Se.A,{className:a,isSelected:r,title:o,onPress:l}):null,n.createElement(Pe.A,null,o))}const Re={trackList:"AlbumDisc-trackList-uHEYNk",titleContainer:"AlbumDisc-titleContainer-V4dLGw PrePlayListTitle-titleContainer-aRl8Fh",selectedTitleContainer:"AlbumDisc-selectedTitleContainer-vragGm PrePlayListTitle-selectedTitleContainer-CyMOyk PrePlayListTitle-titleContainer-aRl8Fh",selectButton:"AlbumDisc-selectButton-XNlWa_ PrePlayListTitle-selectButton-HQwiGj SelectButton-selectButton-_goGWp"};var Ce=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,De=(e,t)=>{var a={};for(var n in e)Te.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Ce)for(var n of Ce(e))t.indexOf(n)<0&&Me.call(e,n)&&(a[n]=e[n]);return a};const ke={height:parseInt(ve.A.tableRowHeight,10)};function xe(e){var t,a=e,{item:r,title:i}=a,l=De(a,["item","title"]);const o=(0,ge.A)(l),s=(0,n.useMemo)((()=>[be.Ej,be.sH,be.p0]),[]),{onToggleSelect:c,isSelected:m}=Ie(null!=(t=null==r?void 0:r.items)?t:[]);if(!r)return null;const d=i||(0,j.A)("Disc {discNumber}",{discNumber:r.index});return n.createElement("div",{ref:o.cellRef,style:o.style},n.createElement(Oe,{className:Re.titleContainer,isSelectable:!0,isSelected:m,selectButtonClassName:Re.selectButton,selectedClassName:Re.selectedTitleContainer,title:d,onSelectPress:c}),n.createElement("div",{className:Re.trackList},r.items.map(((e,t)=>{var a;return n.createElement(Ae.A,{key:e.key,cellIndex:t,hasTransientActionsCell:!0,index:null!=(a=e.index)?a:t,isVirtual:!1,item:e,style:ke,tableColumns:s})}))))}const Le={container:"AlbumDiscList-container-tHRsGb"};var je=Object.defineProperty,Ne=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,Ue=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,He=(e,t,a)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,We=(e,t)=>{for(var a in t||(t={}))Ve.call(t,a)&&He(e,a,t[a]);if(Ue)for(var a of Ue(t))Be.call(t,a)&&He(e,a,t[a]);return e},ze=(e,t)=>Ne(e,Fe(t));const Ke=parseInt(ve.A.v4PagePadding,10),qe=parseInt(ve.A.v4ListSpacing,10),Qe=parseInt(ve.A.v4PrePlayListTitleGap,10),$e=parseInt(ve.A.v4PrePlayDividerHeight,10),Ge=parseInt(fe.hubTitleLineHeight,10),Je=parseInt(ve.A.tableRowHeight,10),Xe=Ge+Qe+2*$e;function _e({className:e=Le.container,metadataItem:t}){var a;const{type:r,subtype:i}=t,[l,s]=(0,b.Ss)(),c=q(),{descendantListSourceURI:m}=(0,o.d4)(ye.A),{totalSize:d,items:u=[]}=null!=(a=(0,ue.A)())?a:{},y=(0,n.useMemo)((()=>{var e;return null!=(e=u.reduce(((e,t)=>{const{parentIndex:a=1}=t,n=e[a];return n?n.items.push(t):e[a]={index:a,items:[t]},e}),[]).filter((()=>!0)))?e:[]}),[u]),p=1===y.length?oe(null!=d?d:0,v.QD.Track):void 0,f=(0,n.useMemo)((()=>function(e){const{overscan:t=0,outerPaddingTop:a=0,outerPaddingRight:n=0,outerPaddingBottom:r=0,outerPaddingLeft:i=0,getCellHeights:l}=e;let o,s;function c(e){const t=s.findIndex((t=>t>e)),a=s.length-1;return-1===t?a:Math.min(Math.max(0,t-1),a)}return{getListMeasurements(e,t){const{viewportWidth:c,viewportHeight:m}=e,d=c-(i+n);o=l(d),s=[];let u=a;return o.forEach((e=>{s.push(u),u+=e})),{width:d,height:o.reduce(((e,t)=>e+t),a+r),outerPaddingTop:a,outerPaddingRight:n,outerPaddingBottom:r,outerPaddingLeft:i,listTop:e.listTop,listLeft:e.listLeft,viewportWidth:c,viewportHeight:m}},getPositionForIndex(e,t){const{width:a}=t;return{column:1,row:e,cellX:i,cellY:s[e],cellWidth:a,cellHeight:o[e]}},getRangesForPosition(e,a,n,r){const{viewportHeight:i}=r,l=e+i-1,o=c(e-t*i),s=c(e),m=c(l),d=c(l+t*i);return{visibleStartIndex:(0,me.A)(s,n),visibleEndIndex:(0,me.A)(m,n),renderStartIndex:(0,me.A)(o,n),renderEndIndex:(0,me.A)(d,n)}}}}({overscan:1,getCellHeights:e=>y.map((e=>Xe+e.items.length*Je+qe)),outerPaddingRight:Ke,outerPaddingLeft:Ke})),[y]),[A,g]=de(c.contentHeight),E=(0,n.useCallback)((e=>n.createElement(xe,ze(We({},e),{title:p}))),[p]);return m&&d?n.createElement("div",{ref:g,className:e},n.createElement(k.Ay,{containerKey:t.childrenKey,containerProvider:s,containerServer:l,containerSourceURI:m,containerSubtype:i,containerType:r,listStyle:se.T.Table},n.createElement(pe.Ay,{items:u},n.createElement(ce.A,{cellComponentFactory:E,items:y,layout:f,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop-A,totalSize:d,viewportHeight:c.height,viewportWidth:c.width})))):null}var Ye=a(20140);function Ze({children:e}){return n.createElement(Ye.BJ,{gap:"xl",orientation:["vertical","horizontal"],wrap:!0},e)}function et({children:e}){return n.createElement(Ye.BJ,{gap:"xs"},e)}var tt=a(46047),at=a(86357),nt=a(66438);function rt({metadataItem:e}){const{parentTitle:t}=e,a=(0,nt.A)(e,"parentKey");return a?n.createElement(at.N,{color:"inherit",font:"inherit",href:a},t):n.createElement(n.Fragment,null,t)}var it=a(33260),lt=a(94693),ot=a(62686),st=a(19367),ct=a(8065),mt=a(70187),dt=a(40853),ut=a(48326),yt=a(50326),pt=a(46335),vt=a(94396),ft=a(23406),At=a(18356),bt=a(84518),gt=a(954),Et=a(11129),ht=a(5292),It=a(11650),Pt=a(71178);function St({className:e,allowLink:t,metadataItem:a}){const{parentTitle:r}=a;return n.createElement("div",{className:e},n.createElement(It.A,{allowLink:t,metadataItem:a}),r?n.createElement(ht.A,null):null,n.createElement(Pt.A,{allowLink:t,metadataItem:a}))}var wt=a(174),Ot=a(93738),Rt=a(51171),Ct=a(69249),Tt=a(77981),Mt=a(85325),Dt=a(39579),kt=a(78920),xt=a(10810),Lt=a(19542),jt=a(14187),Nt=a(18477),Ft=a(61435),Ut=a(88941),Vt=a(19336),Bt=a(40650),Ht=a(45);var Wt=Object.defineProperty,zt=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,Gt=(e,t,a)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Jt=(e,t)=>{for(var a in t||(t={}))Qt.call(t,a)&&Gt(e,a,t[a]);if(qt)for(var a of qt(t))$t.call(t,a)&&Gt(e,a,t[a]);return e};const Xt=parseInt(ve.A.trackCellPadding,10),_t=n.forwardRef((({style:e,index:t,isSortable:a,cellIndex:r,cellHeight:i,metadataItem:l,metadataItemState:s},c)=>{const[m,d]=(0,b.Ss)(),u=(0,o.d4)(vt.A),y=(0,o.d4)((0,Ot.A)(l,m)),p=(0,o.d4)((0,Ft.A)(Vt.C.AudioVideo,"isPaused")),{hoverRef:v,actionsMenuButtonID:f,isHovered:A,isActionsPending:g,isActionsVisible:E,isActionsMenuOpen:h,onActionsMenuClose:I,onActionsMenuCloseComplete:P,onActionsMenuToggle:S}=(0,wt.A)({server:m,provider:d,metadataItem:l,metadataItemState:s}),w=(0,n.useCallback)((e=>{e.preventDefault()}),[]),{type:O,subtype:R}=l,C=(0,Tt.Ay)(O,R),T=(0,Mt.A)({height:i-2*Xt,aspectRatio:C}),M=(0,kt.Ay)((D=Jt({},T),k={server:m,provider:d,url:(0,Dt.A)(l,{aspectRatio:C})},zt(D,Kt(k))));var D,k;const x=E&&(0,Ct.v_)({server:m,provider:d,stableUser:u,metadataItem:l,metadataItemState:s});return n.createElement(Nt.A,{ref:(0,Ut.A)(c,v),isAlternate:!!(r%2),isHovered:A,style:e},n.createElement(At.A,{"aria-label":(0,Rt.A)(l),keyAttribute:"parentKey",metadataItem:l}),n.createElement("div",{className:"MetadataTrackDetailsRow-overlay-y7n1HE"},n.createElement("div",{className:"MetadataTrackDetailsRow-container-eP8Y7k"},n.createElement("div",{className:"MetadataTrackDetailsRow-indexPlayContainer-pVuRb6"},y||x?null:t,n.createElement(ft.A,{isVisible:!y&&x,metadataItem:l}),y?n.createElement(Bt.A,{isPaused:p}):null),n.createElement("div",{className:"MetadataTrackDetailsRow-posterContainer-JEFWFf"},n.createElement(jt.A,Jt({src:M},T))),n.createElement("div",{className:"MetadataTrackDetailsRow-titleContainer-kjcaLc"},n.createElement(gt.A,{className:"MetadataTrackDetailsRow-title-Qri1K_",metadataItem:l}),n.createElement(St,{className:"MetadataTrackDetailsRow-subtitle-qdwCkB MetadataTrackDetailsRow-title-Qri1K_",metadataItem:l})),E?n.createElement("div",{className:"MetadataTrackDetailsRow-actions-gVyfG7"},a?n.createElement(Lt.A,{className:"MetadataTrackDetailsRow-reorderButton-ixmPF8 Link-link-vSsQW1",tabIndex:-1,title:(0,j.A)("Reorder"),onPress:w},n.createElement(Ht.A,null)):null,n.createElement(xt.A,{className:"MetadataTrackDetailsRow-actionsMenuButton-c6f58C Link-link-vSsQW1","data-testid":"metadataTrackMoreButton",id:f,isPending:g,onPress:S})):n.createElement(Et.A,{className:"MetadataTrackDetailsRow-duration-JeUj57",metadataItem:l}))),n.createElement(bt.A,{actionsOverride:{isPlayVisible:!1},isOpen:h,metadataItem:l,target:f,onMenuClose:I,onMenuCloseComplete:P}))}));var Yt=a(66231),Zt=a(52562),ea=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,aa=Object.prototype.propertyIsEnumerable;const na=n.forwardRef(((e,t)=>{var a=e,{index:r,isSortable:i,item:l}=a,o=((e,t)=>{var a={};for(var n in e)ta.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&ea)for(var n of ea(e))t.indexOf(n)<0&&aa.call(e,n)&&(a[n]=e[n]);return a})(a,["index","isSortable","item"]);const s=(0,Yt.A)(null==l?void 0:l.sourceURI),c=(0,ge.A)(o),{cellIndex:m,cellHeight:d}=o;return l?n.createElement(M.A,{metadataItem:l},n.createElement(pt.A,{metadataItem:l,metadataItemState:s},n.createElement(_t,{ref:(0,Ut.A)(t,c.cellRef),cellHeight:d,cellIndex:m,index:r,isSortable:i,metadataItem:l,metadataItemState:s,style:c.style}))):n.createElement(Zt.A,{ref:(0,Ut.A)(t,c.cellRef),index:m,style:c.style})}));var ra=a(78592),ia=a(6164),la=a(63606),oa=a(62865),sa=Object.defineProperty,ca=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,ua=(e,t,a)=>t in e?sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const ya=parseInt(ve.A.trackCellHeight,10),pa=function(e){return(0,oa.A)(((e,t)=>{for(var a in t||(t={}))ma.call(t,a)&&ua(e,a,t[a]);if(ca)for(var a of ca(t))da.call(t,a)&&ua(e,a,t[a]);return e})({rowHeight:ya,overscan:2},e))};var va=a(4659);const fa={divider:"PrePlayListDivider-divider-GDRaZg"};function Aa({className:e=fa.divider}){return n.createElement("div",{className:e})}const ba={hubHeader:"PrePlayVerticalHub-hubHeader-TP8gZk VirtualHubScroller-hubHeader-vSW06t",showAllContainer:"PrePlayVerticalHub-showAllContainer-yNQlC8",belowHub:"PrePlayVerticalHub-belowHub-kuKDV6"};var ga=Object.defineProperty,Ea=Object.defineProperties,ha=Object.getOwnPropertyDescriptors,Ia=Object.getOwnPropertySymbols,Pa=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,wa=(e,t,a)=>t in e?ga(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Oa=(e,t)=>{for(var a in t||(t={}))Pa.call(t,a)&&wa(e,a,t[a]);if(Ia)for(var a of Ia(t))Sa.call(t,a)&&wa(e,a,t[a]);return e},Ra=(e,t)=>Ea(e,ha(t));const Ca=parseInt(ve.A.v4PagePadding,10),Ta=3;function Ma({hub:e}){const{title:t,sourceURI:a,key:r,type:i,subtype:s,initialSize:c,random:m,style:d=se.T.List,context:u,isStale:y}=e,p=(0,o.wA)(),[v,f]=(0,b.Ss)(),A=q(),[g,E]=de(A.contentHeight),[h,I]=(0,n.useState)(c<Ta?c:Ta),P=(0,n.useMemo)((()=>i===se.A.Track?pa({outerPaddingRight:Ca,outerPaddingLeft:Ca}):(0,la.A)({outerPaddingRight:Ca,outerPaddingLeft:Ca})),[i]),S=(0,n.useMemo)((()=>(0,ia.A)(a)),[a]),w=(0,o.d4)(S),O=null==w?void 0:w.items.length,R=null==w?void 0:w.totalSize,C=null==R||m?c:R,T=(0,n.useCallback)((e=>{p(ra.A.actions.fetchRangeRequested(Ra(Oa({},e),{server:v,provider:f,sourceURI:a})))}),[p,v,f,a]),M=(0,n.useCallback)((()=>{I(C)}),[C]),{isPlaceholder:D,placeholderItems:x}=(0,va.A)({hub:e,size:O,totalSize:R,initialPageSize:Ta,onPageRequest:T});(0,n.useEffect)((()=>{!h&&O&&I(O<Ta?O:Ta)}),[O,h]),(0,n.useEffect)((()=>{y&&!m&&p(ra.A.actions.throttledRepopulateRequested({server:v,provider:f,sourceURI:a}))}),[p,y,f,m,v,a]);const L=(0,n.useCallback)((t=>i===se.A.Track?n.createElement(l.Ay,{key:t.key,column:t.column,row:t.row},n.createElement(na,Oa({index:t.cellIndex+1},t))):n.createElement(yt.A,Oa({isSummaryHidden:e.hubIdentifier===ut.P.OtherEditions},t))),[e.hubIdentifier,i]);return(D||C)&&w?n.createElement(l.Ay,{name:u},n.createElement(k.Ay,{containerKey:r,containerProvider:f,containerServer:v,containerSourceURI:w.sourceURI,containerSubtype:s,containerType:i,listStyle:d},n.createElement("div",{className:ba.hubHeader},n.createElement(mt.A,{hub:e},t)),n.createElement(Aa,null),n.createElement("div",{ref:E},n.createElement(ce.A,{cellComponentFactory:L,items:D?x:w.items,keyPropName:"listItemKey",layout:P,scrollLeft:A.scrollLeft,scrollTop:A.scrollTop-g,totalSize:D?x.length:h,viewportHeight:A.height,viewportWidth:A.width,onPageRequest:D?void 0:T})),n.createElement(Aa,null),!D&&h<C?n.createElement("div",{className:ba.showAllContainer},n.createElement(Lt.A,{onPress:M},(0,j.A)("Show All"))):null,n.createElement("div",{className:ba.belowHub}))):null}var Da=a(35467),ka=a(69182);const xa={spinnerContainer:"PrePlayAugmentedHubsList-spinnerContainer-gT9hz_"};function La({hub:e}){const t=e.style===se.T.List?Ma:ct.A,{serverIdentifier:a,providerIdentifier:r}=(0,st.A)(e.sourceURI);return n.createElement(b.Ay,{machineIdentifier:a,providerIdentifier:r},n.createElement(t,{hub:e,hubTitleComponent:mt.A}))}function ja({metadataItem:e}){const{augmentationKey:t}=e,a=(0,o.wA)(),[r,i]=(0,b.Ss)(),{augmented:{hubs:l,isPending:s,isPopulated:c}}=(0,o.d4)(ye.A);return(0,n.useEffect)((()=>{t&&a(Da.A.actions.augmentedHubsFetchRequested({server:r,provider:i,augmentationKey:t}))}),[a,t,i,r]),t?!c&&s?n.createElement("div",{className:xa.spinnerContainer},n.createElement(ka.A,null)):n.createElement(dt.A,{hubComponent:La,hubs:l}):null}var Na=a(3339),Fa=a(34041);function Ua({hub:e}){const t=e.style===se.T.List?Ma:ct.A,{serverIdentifier:a,providerIdentifier:r}=(0,st.A)(e.sourceURI),i=e.hubIdentifier===ut.P.PlexCredits?2:void 0;return n.createElement(b.Ay,{machineIdentifier:a,providerIdentifier:r},n.createElement(t,{hub:e,hubTitleComponent:mt.A,titleCount:i}))}const Va=(0,n.memo)((function({metadataItem:e,onScrollPositionReady:t}){const{key:a}=e,r=(0,o.wA)(),[i,l]=(0,b.Ss)(),{related:{hubs:s,isPopulated:c,error:m}}=(0,o.d4)(ye.A),d=(0,o.d4)(Na.A),{isEmbedded:u}=i,y=(0,n.useMemo)((()=>s.filter((e=>{if(!(null==e?void 0:e.source))return!0;const{providerIdentifier:t}=(0,st.A)(e.source);return t===Fa.oB||d.find((({identifier:e})=>e===t))}))),[s,d]);return(0,n.useEffect)((()=>{u||c||m||r(Da.A.actions.relatedHubsFetchRequested({server:i,provider:l,metadataKey:a}))}),[r,m,u,c,a,l,i]),(0,n.useEffect)((()=>{(u||c||m)&&t()}),[m,u,c,t]),u||m?null:c?n.createElement(dt.A,{hubComponent:Ua,hubs:y}):n.createElement("div",{className:"PrePlayRelatedHubsList-spinnerContainer-W_NQ13"},n.createElement(ka.A,null))}));var Ba=a(46910),Ha=a(19396),Wa=a(31070),za=a(56556),Ka=a(3632),qa=a(7537);function Qa({metadataItem:e,tag:t}){const{metricsContextTuple:a}=(0,l.Mp)(),[r,i]=(0,b.Ss)(),s=(0,o.d4)((0,za.A)(r.machineIdentifier,i.identifier,e.librarySectionID)),c=(0,Wa.A)(e.type),m=(0,n.useMemo)((()=>t.role?(0,Ka.Ay)({tag:t,contentDirectory:s,server:r,provider:i,metadataItem:e}):Fa.cK(i.identifier,Fa.OB)?(0,Ha.A)(r,i,s,{key:t.key,pageType:v.QD.Hub,context:(0,l.qq)(a)}):(0,qa.A)({tag:t,contentDirectory:s,server:r,provider:i,metadataNumericType:c})),[t,r,s,i,c,e,a]);return m?n.createElement(at.N,{color:"inherit",font:"inherit",href:m},t.tag):n.createElement(Ba.E,{color:"inherit",font:"inherit"},t.tag)}function $a(e,t,a=3){const{[t]:r=[]}=e;return r.length?n.createElement(U.wl,{limit:a,showAllButtonFont:"inherit",showAllLabel:(0,j.A)("and more"),tags:r.map((t=>n.createElement(Qa,{key:t.tag,metadataItem:e,tag:t})))}):null}var Ga=a(5977),Ja=a(60710),Xa=a(92658),_a=a(62321),Ya=a(89512),Za=a(89302),en=a(76557),tn=a(45045),an=a(3184);function nn({type:e,stream:t}){return n.createElement("span",null,t?t.displayTitle:n.createElement(n.Fragment,null,e===v.PT.Subtitles?(0,j.A)("Off"):(0,j.A)("None")))}var rn=a(14890);const ln={menuLabelClassName:"AudioStreamsMenu-menuLabelClassName-fLobh8 SelectedMenuItem-menuLabel-nQZtur",extendedTitle:"AudioStreamsMenu-extendedTitle-IoIJir"};function on({metadataItem:e,part:t,onSelect:a}){const r=(0,_a.A)(),i=(0,an.A)(),l=(0,Yt.A)(e.sourceURI),[o,s]=(0,n.useState)((0,tn.A)(l.Stream,t,v.PT.Audio)),c=(0,en.A)(t,v.PT.Audio),m=(0,n.useCallback)((e=>{const t=c.find((t=>t.id===e));s(t),a(v.Tj.Audio,e)}),[c,a]);return(0,n.useEffect)((()=>{l.isPending||s((0,tn.A)(l.Stream,t,v.PT.Audio))}),[l.Stream,l.isPending,t]),n.createElement(n.Fragment,null,c.length>1?n.createElement(Ga.A,{direction:i.isOpen?Ya.UP:Ya.PX,id:r,isSelected:!0,onPress:i.onToggle},n.createElement(nn,{stream:o,type:v.PT.Audio})):n.createElement(nn,{stream:o,type:v.PT.Audio}),n.createElement(Ja.A,{isOpen:i.isOpen,size:Za.I$,target:r,onMenuClose:i.onClose},c.map((e=>n.createElement(rn.A,{key:e.id,isSelected:e===o,menuLabelClassName:ln.menuLabelClassName,value:e.id,onSelect:(0,Xa.A)(m,i.onClose)},n.createElement(nn,{stream:e,type:v.PT.Audio}),e.title?n.createElement("span",{className:ln.extendedTitle},e.title):null)))))}var sn=a(20976),cn=a(22701),mn=a(31585),dn=a(94507),un=a(69380),yn=a(72630),pn=a(35123),vn=a(6678),fn=a(28008),An=a(55513),bn=a(56688),gn=a(42508);const En={externalMenuItemContainer:"SubtitlesStreamsMenu-externalMenuItemContainer-BgIZ1t",externalMenuItem:"SubtitlesStreamsMenu-externalMenuItem-qXHqYr SelectedMenuItem-menuItemContainer-PNDPtO",menuLabelClassName:"SubtitlesStreamsMenu-menuLabelClassName-v0ylMa SelectedMenuItem-menuLabel-nQZtur",externalDeleteButton:"SubtitlesStreamsMenu-externalDeleteButton-YytHSz IconButton-iconButton-ebkqws Link-link-vSsQW1",extendedTitle:"SubtitlesStreamsMenu-extendedTitle-PiynUL"};function hn({metadataItem:e,part:t,onSelect:a,onDelete:i}){var l;const[o,s]=(0,b.Ss)(),c=(0,Yt.A)(e.sourceURI),m=(0,an.A)(),d=(0,an.A)(),u=!!(0,pn.A)(s),y=!(!(null==(l=o.ownerFeatures)?void 0:l.some((e=>[cn.AS,cn.iy].includes(e))))||o.isShared||!(0,pn.A)(s)),p=(0,_a.A)(),f=(0,an.A)(),A=(0,an.A)(),[g,E]=(0,n.useState)(),[h,I]=(0,n.useState)((0,tn.A)(c.Stream,t,v.PT.Subtitles)),P=(0,en.A)(t,v.PT.Subtitles),S=(0,n.useCallback)((e=>{const t=P.find((t=>t.id===e));I(t),a(v.Tj.Subtitles,e)}),[a,P]),w=(0,n.useCallback)((()=>{g&&i(g)}),[i,g]);return(0,n.useEffect)((()=>{c.isPending||I((0,tn.A)(c.Stream,t,v.PT.Subtitles))}),[c.Stream,c.isPending,t]),(0,n.useEffect)((()=>{!c.isStreamDeletePending&&A.isOpen&&A.onClose()}),[c.isStreamDeletePending]),e.rentalPrice&&!(0,yn.A)(e,c)||e.purchasePrice&&!c.purchased?P.length?n.createElement(n.Fragment,null,P.filter((e=>!!e.displayTitle)).map((e=>e.displayTitle)).join(", ")):n.createElement(n.Fragment,null,(0,j.A)("None")):n.createElement(n.Fragment,null,P.length||u||y?n.createElement(Ga.A,{direction:f.isOpen?Ya.UP:Ya.PX,id:p,isSelected:!0,onPress:f.onToggle},P.length?n.createElement(nn,{stream:h,type:v.PT.Subtitles}):(0,j.A)("None")):(0,j.A)("None"),n.createElement(Ja.A,{isAutoCloseDisabled:A.isOpen,isOpen:f.isOpen,size:Za.I$,target:p,onMenuClose:f.onClose},P.length?n.createElement(rn.A,{key:sn.x,isSelected:!h,value:sn.x,onSelect:(0,Xa.A)(S,f.onClose)},n.createElement(nn,{type:v.PT.Subtitles})):null,P.map((e=>{const t=!!e.key&&o.isFullOwnedServer;return n.createElement("div",{key:e.id,className:t?En.externalMenuItemContainer:void 0},n.createElement(rn.A,{className:t?En.externalMenuItem:void 0,isSelected:e===h,menuLabelClassName:En.menuLabelClassName,value:e.id,onSelect:(0,Xa.A)(S,f.onClose)},n.createElement(nn,{stream:e,type:v.PT.Subtitles}),e.title?n.createElement("span",{className:En.extendedTitle},e.title):null),t?n.createElement(n.Fragment,null,n.createElement(vn.A,{ariaLabel:(0,j.A)("Delete Subtitle"),className:En.externalDeleteButton,iconComponent:gn.A,onPress:(0,Xa.A)(A.onOpen,(()=>E(e.key)))}),n.createElement(fn.A,{confirmLabel:(0,j.A)("Delete"),isConfirmButtonSpinning:c.isStreamDeletePending,isOpen:A.isOpen,kind:dn.Ol,message:(0,j.A)("Are you sure you want to delete this subtitle file?"),metricsPage:r.jb,title:(0,j.A)("Delete Subtitle File"),onCancel:A.onClose,onConfirm:w})):null)})),u?n.createElement(mn.A,{onPress:(0,Xa.A)(m.onOpen,f.onClose)},(0,j.A)("Search...")):null,y?n.createElement(mn.A,{onPress:(0,Xa.A)(d.onOpen,f.onClose)},(0,j.A)("Upload...")):null),n.createElement(un.A,{metadataItem:e,metadataItemState:c},(({metadataItemEntityID:e,onMarkStale:t})=>n.createElement(n.Fragment,null,n.createElement(An.A,{isOpen:m.isOpen,metadataItemEntityID:e,onModalClose:(0,Xa.A)(m.onClose,t)}),n.createElement(bn.A,{isOpen:d.isOpen,metadataItemEntityID:e,onModalClose:(0,Xa.A)(d.onClose,t)})))))}var In=a(86587),Pn=a(92919),Sn=a(74927),wn=a(8178);function On(e){const t=(0,o.wA)(),[a,r]=(0,b.Ss)(),{items:i}=(0,M.B)(),l=(0,o.d4)((0,Sn.A)(Fa.IU,Fa.uc(r.identifier))),s=Fa.cK(r.identifier,Fa.OB),c=(0,n.useMemo)((()=>!(!s||!e.playableKey||1!==i.length)),[s,i.length,e.playableKey]),m=c&&i?i[0]:e,d=(0,Yt.A)(m.sourceURI),u=d.Stream,y=function(e){const t=e.Media;if(null==t?void 0:t.length)return 1===t.length?t[0]:Array.from(t).sort(((e,t)=>{var a,n,r,i;return(null!=(a=t.width)?a:0)-(null!=(n=e.width)?n:0)||(null!=(r=t.bitrate)?r:0)-(null!=(i=e.bitrate)?i:0)}))[0]}(m),p=(null==y?void 0:y.Part)&&y.Part[0],f=p?(0,tn.A)(u,p,v.PT.Video):void 0,A=!s||c;(0,n.useEffect)((()=>{if(p&&!u&&a.isCloud&&A){const e=c?l:r;if(!e)return;t(Pn.A.actions.fetchRequested({server:a,provider:e,metadataItem:m}))}}),[t,A,p,r,u,a,c,m,l]);const g=(0,n.useCallback)(((e,n)=>{(0,wn.A)(null!=p,"A part is required to select a stream");const i=c&&l;t(Pn.A.actions.streamSelectRequested({server:a,provider:i?l:r,sourceURI:m.sourceURI,part:p,streamIDParam:e,streamID:n,allParts:!0}))}),[p,l,t,a,c,r,m.sourceURI]),E=(0,n.useCallback)((e=>{t(Pn.A.actions.streamDeleteRequested({server:a,provider:r,sourceURI:m.sourceURI,streamKey:e}))}),[t,m.sourceURI,r,a]),h=m.Media&&m.Media.length>1&&(0,pn.A)(r)?m.Media.map((e=>{const{info:t,title:a}=(0,In.A)(e),n=!!(null==t?void 0:t.length);return a?n?`${a} (${t})`:a:n?t:(0,j.A)("Unknown")})):[];return p?A&&d.isPending&&!d.isPopulated?n.createElement(et,null,n.createElement(U.nT,{label:(0,j.A)("Video")},n.createElement(Ba.E,{color:"muted",font:"body-2"},(0,j.A)("Loading..."))),n.createElement(U.nT,{label:(0,j.A)("Audio")},n.createElement(Ba.E,{color:"muted",font:"body-2"},(0,j.A)("Loading..."))),n.createElement(U.nT,{label:(0,j.A)("Subtitles")},n.createElement(Ba.E,{color:"muted",font:"body-2"},(0,j.A)("Loading...")))):n.createElement(et,null,h.length?n.createElement(U.nT,{label:(0,j.A)("Versions")},n.createElement(U.wl,{limit:1,showAllLabel:(0,j.A)("and more"),tags:h})):null,n.createElement(U.nT,{label:(0,j.A)("Video")},n.createElement(nn,{stream:f,type:v.PT.Video})),n.createElement(U.nT,{label:(0,j.A)("Audio")},n.createElement(on,{metadataItem:m,part:p,onSelect:g})),n.createElement(U.nT,{label:(0,j.A)("Subtitles")},n.createElement(hn,{metadataItem:m,part:p,onDelete:E,onSelect:g}))):null}function Rn({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,duration:i,rating:l,summary:o,studio:s,year:c}=e,m=(0,W.A)(e),d=$a(e,"Genre"),u=$a(e,"Style"),y=On(e),p=!(!u&&!s);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isShuffleVisible","isAddToPlaylistVisible","isSyncDownloadVisible","isEditVisible"]}),facts:[c,i?(0,V.A)(i):void 0,r?(0,B.A)(r):void 0],genres:d,metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[l||a?n.createElement(H.A,{metadataItem:e}):null],showAttributionLogo:!0,starRating:m?n.createElement(it.p,{metadataItem:e}):void 0,subtitle:(0,ot.A)(e),summary:o,title:n.createElement(rt,{metadataItem:e})},p||y?n.createElement(Ze,null,p?n.createElement(et,null,s?n.createElement(U.nT,{label:(0,j.A)("Record Label")},s):null,u?n.createElement(U.nT,{label:(0,j.A)("Style")},u):null):null,y):null),n.createElement(_e,{metadataItem:e}),n.createElement(ja,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}var Cn=a(88055),Tn=a.n(Cn),Mn=a(1081),Dn=a(35907),kn=a(27020);const xn=function(e){return(0,Mn.Mz)(kn.A,(t=>{var a;const n={};for(const r of e)n[r]=null!=(a=t[r])?a:Tn()(Dn.A);return n}))};var Ln=a(78546),jn=a(92464),Nn=a(77985);function Fn({metadataList:e,metadataItem:t}){var a,r;const i=(0,o.wA)(),[l,s]=(0,b.Ss)(),{type:c,subtype:m,skipChildren:d}=t,u=d?(0,jn.C)(c,m):(0,jn.o)(c,m),[y,p]=(0,n.useState)(!1),v=null!=(a=e.totalSize)?a:0,f=e.items.length,{onSelect:A,onToggleSelect:g,isSelected:E}=Ie(e.items);(0,n.useEffect)((()=>{y&&(f<v?i(ra.A.actions.fetchAllRequested({server:l,provider:s,sourceURI:e.sourceURI,includePaginationHeaders:(0,Ln.A)(s)})):A())}),[i,y,f,e.sourceURI,A,s,l,v]),(0,n.useEffect)((()=>{E&&p(!1)}),[E]);const h=(0,n.useCallback)((()=>{f<v?p(!y):g()}),[y,f,g,v]),I=oe(null!=(r=e.totalSize)?r:0,null!=u?u:c);return n.createElement(Oe,{isSelectable:(0,Nn.A)(s),isSelected:E||y,title:I,onSelectPress:h})}var Un=Object.defineProperty,Vn=Object.defineProperties,Bn=Object.getOwnPropertyDescriptors,Hn=Object.getOwnPropertySymbols,Wn=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable,Kn=(e,t,a)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,qn=(e,t)=>{for(var a in t||(t={}))Wn.call(t,a)&&Kn(e,a,t[a]);if(Hn)for(var a of Hn(t))zn.call(t,a)&&Kn(e,a,t[a]);return e},Qn=(e,t)=>Vn(e,Bn(t));const $n=parseInt(ve.A.v4PagePadding,10);function Gn({items:e,totalSize:t,viewportWidth:a,viewportHeight:r,scrollTop:i,scrollLeft:l,onPageRequest:o}){const s=(0,n.useMemo)((()=>(0,la.A)({outerPaddingRight:$n,outerPaddingLeft:$n})),[]),c=(0,n.useCallback)((e=>n.createElement(yt.A,Qn(qn({},e),{isParentDetailHidden:!0}))),[]);return n.createElement(n.Fragment,null,n.createElement(Aa,null),n.createElement(ce.A,{cellComponentFactory:c,items:e,keyPropName:"listItemKey",layout:s,scrollLeft:l,scrollTop:i,totalSize:t,viewportHeight:r,viewportWidth:a,onPageRequest:o}),n.createElement(Aa,null))}var Jn=a(80010);function Xn({metadataList:e,metadataItem:t}){const{type:a,subtype:r,skipChildren:i}=t,l=i?(0,jn.C)(a,r):(0,jn.o)(a,r),o=oe((0,n.useMemo)((()=>e.items.filter((e=>!!(0,Jn.A)(e.Media))).length),[e.items]),null!=l?l:a);return n.createElement(Oe,{title:o})}var _n=a(32042),Yn=a(34066),Zn=a(95342),er=Object.defineProperty,tr=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable,rr=(e,t,a)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ir=(e,t)=>{for(var a in t||(t={}))ar.call(t,a)&&rr(e,a,t[a]);if(tr)for(var a of tr(t))nr.call(t,a)&&rr(e,a,t[a]);return e};function lr({type:e,subtype:t,items:a,totalSize:r,viewportWidth:i,viewportHeight:l,scrollTop:s,scrollLeft:c,onPageRequest:m}){const d=(0,o.d4)(Zn.A),{containerMeta:u}=(0,k.Xw)(),y=(0,n.useMemo)((()=>(0,Yn.A)({listType:e,subtype:t,columnWidth:d,listStyle:se.T.PrePlayGrid,displayFields:null==u?void 0:u.DisplayFields,displayImages:null==u?void 0:u.DisplayImage})),[d,null==u?void 0:u.DisplayFields,null==u?void 0:u.DisplayImage,t,e]),p=(0,n.useCallback)((e=>n.createElement(_n.A,ir({},e))),[]);return n.createElement(ce.A,{cellComponentFactory:p,items:a,keyPropName:"listItemKey",layout:y,scrollLeft:c,scrollTop:s,totalSize:r,viewportHeight:l,viewportWidth:i,onPageRequest:m})}var or=a(32485),sr=a.n(or),cr=a(27780),mr=a(26927);let dr;var ur=a(76887),yr=a(93189);var pr=a(18360),vr=a(60939);const fr="MetadataSimpleDetailsRow-unwatchedCircle-S_NEKn",Ar=n.forwardRef((({style:e,cellIndex:t,metadataItem:a,metadataItemState:r},i)=>{const[l,s]=(0,b.Ss)(),c=(0,o.d4)(vt.A),m=(0,o.d4)((0,Ot.A)(a,l)),d=(0,o.d4)((0,Ft.A)(Vt.C.AudioVideo,"isPaused")),{hoverRef:u,actionsMenuButtonID:y,isHovered:p,isActionsPending:f,isActionsVisible:A,isActionsMenuOpen:g,onActionsMenuClose:E,onActionsMenuCloseComplete:h,onActionsMenuToggle:I}=(0,wt.A)({server:l,provider:s,metadataItem:a,metadataItemState:r}),{isSelected:P,isInSelectionRange:S,isSelectionActive:w,onToggleSelect:O}=(0,vr.A)({isHovered:p,metadataItem:a,metadataItemState:r}),R=(0,n.useMemo)((()=>S?"MetadataSimpleDetailsRow-rangeListRow-wZqarV ListRow-row-oh5MTV":P?"MetadataSimpleDetailsRow-selectedListRow-b7NijL ListRow-row-oh5MTV":void 0),[S,P]),C=!w&&A,T=(0,n.useCallback)((()=>{O()}),[O]),M=C&&(0,Ct.v_)({server:l,provider:s,stableUser:c,metadataItem:a,metadataItemState:r});return n.createElement(Nt.A,{ref:(0,Ut.A)(i,u),alternateClassName:R,className:R,isAlternate:!!(t%2),isHovered:p,style:e},(0,Nn.A)(s)?n.createElement(pr.A,{isInSelectionRange:S,isSelected:P,isVisible:P||S||p,title:(0,Rt.A)(a),onPress:T}):null,w?n.createElement(Lt.A,{className:"MetadataSimpleDetailsRow-selectOverlay-oQLfat Link-link-vSsQW1",onPress:T}):n.createElement(At.A,{"aria-label":(0,Rt.A)(a),keyAttribute:"key",metadataItem:a}),n.createElement("div",{className:"MetadataSimpleDetailsRow-overlay-i6axK7"},n.createElement("div",{className:"MetadataSimpleDetailsRow-simpleSummaryContainer-HfmzEQ"},n.createElement("div",{className:"MetadataSimpleDetailsRow-indexPlayContainer-Vgsmos"},m||M?null:n.createElement(ur.A,{className:"MetadataSimpleDetailsRow-titleEpisodeIndex-zzDjti",metadataItem:a}),n.createElement(ft.A,{isVisible:!m&&M,metadataItem:a}),m?n.createElement(Bt.A,{isPaused:d}):null,function(e,t,a){return!function(e){return Fa.cK((0,yr.A)(e.identifier,e.providerIdentifier),Fa.IU)}(a)&&!(0,N.A)(e)&&(e.type===v.QD.Movie||e.type===v.QD.Episode)&&t.isPopulated&&!1!==t.saved}(a,r,s)?n.createElement(n.Fragment,null,r.viewOffset||r.viewCount?null:n.createElement("div",{className:fr}),r.viewOffset?n.createElement("div",{className:sr()(fr,"MetadataSimpleDetailsRow-isPartiallyWatched-Du016G")}):null):null),n.createElement("div",{className:"MetadataSimpleDetailsRow-titleAndSummaryContainer-jjqqtZ"},n.createElement("div",{className:"MetadataSimpleDetailsRow-titleContainer-m9y2F0"},n.createElement("div",{className:"MetadataSimpleDetailsRow-title-inM8GI"},a.title),C?n.createElement("div",{className:"MetadataSimpleDetailsRow-actions-tPG7hS"},n.createElement(xt.A,{"data-testid":"metadataRowMoreButton",id:y,isPending:f,onPress:I})):null),n.createElement("div",{className:"MetadataSimpleDetailsRow-summary-yMvPIn"},function(e,t){const{tagline:a,summary:n}=t;return a||((0,cr.A)(e.identifier)===mr.g3?function(e){if(!e)return"";dr||(dr=document.createElement("P")),dr.innerHTML=e;const t=dr.textContent;return dr.innerHTML="",t}(n):n)}(s,a))))),n.createElement(bt.A,{actionsOverride:{isPlayVisible:!1},isOpen:g,metadataItem:a,target:y,onMenuClose:E,onMenuCloseComplete:h}))}));var br=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable,hr=(e,t)=>{var a={};for(var n in e)gr.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&br)for(var n of br(e))t.indexOf(n)<0&&Er.call(e,n)&&(a[n]=e[n]);return a};function Ir(e){var t=e,{item:a}=t,r=hr(t,["item"]);const i=(0,Yt.A)(null==a?void 0:a.sourceURI),l=(0,ge.A)(r),{cellIndex:o}=r;return a?n.createElement(pt.A,{metadataItem:a,metadataItemState:i},n.createElement(Ar,{ref:l.cellRef,cellIndex:o,metadataItem:a,metadataItemState:i,style:l.style})):n.createElement(Zt.A,{index:o,style:l.style})}var Pr=Object.defineProperty,Sr=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Rr=(e,t,a)=>t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Cr=parseInt(ve.A.simpleSummaryCellHeight,10),Tr=parseInt(ve.A.v4PagePadding,10),Mr=function(e){return(0,oa.A)(((e,t)=>{for(var a in t||(t={}))wr.call(t,a)&&Rr(e,a,t[a]);if(Sr)for(var a of Sr(t))Or.call(t,a)&&Rr(e,a,t[a]);return e})({rowHeight:Cr,outerPaddingRight:Tr,outerPaddingLeft:Tr,overscan:2},e))},Dr={allEpisodesContainer:"PrePlaySimpleDetailsVirtualList-allEpisodesContainer-LsdVgo"};var kr=Object.defineProperty,xr=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Nr=(e,t,a)=>t in e?kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Fr=(e,t)=>{for(var a in t||(t={}))Lr.call(t,a)&&Nr(e,a,t[a]);if(xr)for(var a of xr(t))jr.call(t,a)&&Nr(e,a,t[a]);return e};function Ur({items:e,totalSize:t,type:a,viewportWidth:r,viewportHeight:i,scrollTop:l,scrollLeft:o,onPageRequest:s}){const c=a===se.A.Episode,[m,d]=(0,n.useState)(c&&t>=3?3:t),u=(0,n.useMemo)((()=>Mr()),[]),y=(0,n.useCallback)((()=>{d(t)}),[t]),p=(0,n.useCallback)((e=>n.createElement(Ir,Fr({},e))),[]);return n.createElement(n.Fragment,null,n.createElement(Aa,null),n.createElement(ce.A,{cellComponentFactory:p,items:e,keyPropName:"listItemKey",layout:u,scrollLeft:o,scrollTop:l,totalSize:m,viewportHeight:i,viewportWidth:r,onPageRequest:s}),n.createElement(Aa,null),n.createElement("div",{className:Dr.allEpisodesContainer},m<t?n.createElement(Lt.A,{onPress:y},(0,j.A)("Show All Episodes")):null))}var Vr=Object.defineProperty,Br=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Wr=Object.prototype.propertyIsEnumerable,zr=(e,t,a)=>t in e?Vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Kr=(e,t)=>{for(var a in t||(t={}))Hr.call(t,a)&&zr(e,a,t[a]);if(Br)for(var a of Br(t))Wr.call(t,a)&&zr(e,a,t[a]);return e};const qr=parseInt(ve.A.v4PagePadding,10);function Qr({items:e,totalSize:t,viewportWidth:a,viewportHeight:r,scrollTop:i,scrollLeft:l,onPageRequest:o}){const s=(0,n.useMemo)((()=>pa({outerPaddingRight:qr,outerPaddingLeft:qr})),[]),c=(0,n.useCallback)((e=>n.createElement(na,Kr({index:e.cellIndex+1},e))),[]);return n.createElement(n.Fragment,null,n.createElement(Aa,null),n.createElement(ce.A,{cellComponentFactory:c,items:e,keyPropName:"listItemKey",layout:s,scrollLeft:l,scrollTop:i,totalSize:t,viewportHeight:r,viewportWidth:a,onPageRequest:o}),n.createElement(Aa,null))}var $r=a(20466),Gr=a(98564),Jr=a(31012);const Xr={recordIconContainer:"RecordButton-recordIconContainer-j3gVTg PlayButton-playCircle-mkZ5qi",recordIcon:"RecordButton-recordIcon-Z04HyR"};var _r=Object.defineProperty,Yr=Object.getOwnPropertySymbols,Zr=Object.prototype.hasOwnProperty,ei=Object.prototype.propertyIsEnumerable,ti=(e,t,a)=>t in e?_r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function ai(e){var t=e,{iconContainerClassName:a=Xr.recordIconContainer,iconClassName:r=Xr.recordIcon}=t,i=((e,t)=>{var a={};for(var n in e)Zr.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Yr)for(var n of Yr(e))t.indexOf(n)<0&&ei.call(e,n)&&(a[n]=e[n]);return a})(t,["iconContainerClassName","iconClassName"]);return n.createElement(Lt.A,((e,t)=>{for(var a in t||(t={}))Zr.call(t,a)&&ti(e,a,t[a]);if(Yr)for(var a of Yr(t))ei.call(t,a)&&ti(e,a,t[a]);return e})({"aria-label":(0,j.A)("Record")},i),n.createElement("span",{className:a},n.createElement("span",{className:r})))}var ni=a(80125),ri=a(97943);const ii={overlay:"EPGSimpleSummaryRow-overlay-u9kSRm",titleContainer:"EPGSimpleSummaryRow-titleContainer-kQW9pa",primaryTitle:"EPGSimpleSummaryRow-primaryTitle-AX_CUS",secondaryTitle:"EPGSimpleSummaryRow-secondaryTitle-NFTD7k",nextAiringDate:"EPGSimpleSummaryRow-nextAiringDate-yU4LcE",separator:"EPGSimpleSummaryRow-separator-zxEoiC DashSeparator-separator-_3fMys",subscriptionIcon:"EPGSimpleSummaryRow-subscriptionIcon-KSQf2Z"},li=n.forwardRef((({style:e,cellIndex:t,metadataItem:a,metadataItemState:r},i)=>{const{metricsPage:s,metricsContextTuple:c}=(0,l.Mp)(),[m,d]=(0,b.Ss)(),u=(0,o.d4)(vt.A),y=(0,an.A)(),[p,v]=(0,ni.A)(),f=a&&(0,Ct.m8)({provider:d,server:m,stableUser:u,metadataItem:a,metadataItemState:r}),{summary:A}=a,{subscriptionID:g}=r;return n.createElement(Nt.A,{ref:(0,Ut.A)(i,v),isAlternate:!!(t%2),isHovered:p,style:e},n.createElement(At.A,{"aria-label":(0,Rt.A)(a),keyAttribute:"key",metadataItem:a}),n.createElement("div",{className:ii.overlay},n.createElement("div",{className:ii.titleContainer},n.createElement("div",{className:ii.primaryTitle},n.createElement(Jr.A,{className:ii.titleEpisodeIndex,metadataItem:a}),n.createElement(ht.A,null),n.createElement(gt.A,{allowLink:!1,metadataItem:a})),n.createElement("div",{className:ii.secondaryTitle},g?n.createElement($r.A,{"aria-label":(0,j.A)("Recording Scheduled"),className:ii.subscriptionIcon}):null,n.createElement(Gr.A,{className:ii.nextAiringDate,metadataItem:a}),A?n.createElement(ht.A,{className:ii.separator}):null,A)),p&&f?n.createElement(ai,{tabIndex:-1,onPress:y.onOpen}):null),n.createElement(un.A,{metadataItem:a,metadataItemState:r},(({serverEntityID:e,providerEntityID:t,metadataItemEntityID:i,onMarkStale:l})=>n.createElement(ri.A,{isOpen:y.isOpen,metadataItemEntityID:i,metricsProperties:{page:s,contextTuple:c},providerEntityID:t,serverEntityID:e,subscriptionType:r.grandparentSubscriptionType||r.subscriptionType||a.type,onModalClose:(0,Xa.A)(l,y.onClose)}))))}));var oi=Object.getOwnPropertySymbols,si=Object.prototype.hasOwnProperty,ci=Object.prototype.propertyIsEnumerable,mi=(e,t)=>{var a={};for(var n in e)si.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&oi)for(var n of oi(e))t.indexOf(n)<0&&ci.call(e,n)&&(a[n]=e[n]);return a};function di(e){var t=e,{item:a}=t,r=mi(t,["item"]);const i=(0,Yt.A)(null==a?void 0:a.sourceURI),l=(0,ge.A)(r),{cellIndex:o}=r;return a?n.createElement(pt.A,{metadataItem:a,metadataItemState:i},n.createElement(li,{ref:l.cellRef,cellIndex:o,metadataItem:a,metadataItemState:i,style:l.style})):n.createElement(Zt.A,{index:o,style:l.style})}var ui=Object.defineProperty,yi=Object.getOwnPropertySymbols,pi=Object.prototype.hasOwnProperty,vi=Object.prototype.propertyIsEnumerable,fi=(e,t,a)=>t in e?ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ai=(e,t)=>{for(var a in t||(t={}))pi.call(t,a)&&fi(e,a,t[a]);if(yi)for(var a of yi(t))vi.call(t,a)&&fi(e,a,t[a]);return e};const bi=96;function gi({items:e,viewportWidth:t,viewportHeight:a,scrollTop:r,scrollLeft:i,onPageRequest:l}){const o=(0,n.useMemo)((()=>Mr({rowHeight:bi})),[]),s=(0,n.useCallback)((e=>n.createElement(di,Ai({},e))),[]),c=(0,n.useMemo)((()=>{const t=e.filter((e=>!!(0,Jn.A)(e.Media)));return t.sort(((e,t)=>{const a=(0,Jn.A)(e.Media),n=(0,Jn.A)(t.Media);return(null==a?void 0:a.endsAt)&&(null==n?void 0:n.endsAt)?a.endsAt>n.endsAt?1:-1:0})),t}),[e]),m=(0,n.useMemo)((()=>c.length),[c]);return n.createElement(n.Fragment,null,n.createElement(Aa,null),n.createElement(ce.A,{cellComponentFactory:s,items:c,keyPropName:"listItemKey",layout:o,scrollLeft:i,scrollTop:r,totalSize:m,viewportHeight:a,viewportWidth:t,onPageRequest:l}),n.createElement(Aa,null))}var Ei=a(2230),hi=a(3104);const Ii={listContainer:"PrePlayDescendantList-listContainer-RJzpLn"};var Pi=Object.defineProperty,Si=Object.defineProperties,wi=Object.getOwnPropertyDescriptors,Oi=Object.getOwnPropertySymbols,Ri=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,Ti=(e,t,a)=>t in e?Pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Mi=(e,t)=>{for(var a in t||(t={}))Ri.call(t,a)&&Ti(e,a,t[a]);if(Oi)for(var a of Oi(t))Ci.call(t,a)&&Ti(e,a,t[a]);return e},Di=(e,t)=>Si(e,wi(t));function ki({className:e=Ii.listContainer,metadataItem:t}){const a=(0,o.wA)(),[r,i]=(0,b.Ss)(),l=q(),{descendantListSourceURI:s}=(0,o.d4)(ye.A),c=(0,o.d4)(hi.A),m=(0,o.d4)(Ei.A),d=(0,ue.A)(),u=(0,n.useMemo)((()=>(null==d?void 0:d.items.map((e=>e.sourceURI)))||[]),[d]),y=(0,o.d4)(xn(u)),p=(0,n.useMemo)((()=>null==d?void 0:d.items.filter((({sourceURI:e})=>{var t;return!(null==(t=y[e])?void 0:t.isPopulated)}))),[y,d]),[v,f]=de(l.contentHeight);(0,n.useEffect)((()=>{r.isCloud&&(null==p?void 0:p.length)&&a(Pn.A.actions.batchFetchRequested({server:r,provider:i,metadataItems:p}))}),[a,i,r,p]);const A=(0,n.useCallback)((e=>{s&&a(ra.A.actions.fetchRangeRequested(Di(Mi({},e),{server:r,provider:i,sourceURI:s})))}),[s,a,i,r]),g=function(e,t){switch(t){case se.T.PrePlayGrid:return lr;case se.T.Details:return Gn;case se.T.SimpleDetails:return(0,N.A)(e)?gi:Ur;case se.T.TrackDetails:return Qr}throw new Error("Failed to map the preplay descendant list style to a list component. Check `selectPrePlayDescendantListStyles` for list style options.")}(t,m);return s&&c&&d&&d.totalSize?n.createElement("div",{ref:f,className:e},n.createElement(k.Ay,{containerKey:t.childrenKey,containerProvider:i,containerServer:r,containerSourceURI:s,containerSubtype:t.subtype,containerType:c,listStyle:m},(0,Ln.A)(i)?n.createElement(Xn,{metadataItem:t,metadataList:d}):n.createElement(Fn,{metadataItem:t,metadataList:d}),n.createElement(pe.Ay,{items:d.items},n.createElement(g,{items:d.items,scrollLeft:l.scrollLeft,scrollTop:l.scrollTop-v,subtype:t.subtype,totalSize:d.totalSize,type:c,viewportHeight:l.height,viewportWidth:l.width,onPageRequest:A})))):null}var xi=a(58459),Li=a(7447),ji=Object.defineProperty,Ni=Object.defineProperties,Fi=Object.getOwnPropertyDescriptors,Ui=Object.getOwnPropertySymbols,Vi=Object.prototype.hasOwnProperty,Bi=Object.prototype.propertyIsEnumerable,Hi=(e,t,a)=>t in e?ji(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Wi=(e,t)=>{for(var a in t||(t={}))Vi.call(t,a)&&Hi(e,a,t[a]);if(Ui)for(var a of Ui(t))Bi.call(t,a)&&Hi(e,a,t[a]);return e},zi=(e,t)=>Ni(e,Fi(t)),Ki=(e,t)=>{var a={};for(var n in e)Vi.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Ui)for(var n of Ui(e))t.indexOf(n)<0&&Bi.call(e,n)&&(a[n]=e[n]);return a};function qi(){const[e,t]=(0,b.Ss)(),{extrasSourceURI:a}=(0,o.d4)(ye.A),r=(0,n.useMemo)((()=>a?(0,ia.A)(a):()=>{}),[a]),i=(0,o.d4)(r),l=(0,o.d4)(Zn.A),s=(0,n.useMemo)((()=>(0,xi.A)({listType:se.A.Clip,subtype:v.i9.Trailer,columnWidth:l})),[l]),c=(0,n.useCallback)((e=>{var t=e,{item:a}=t,r=Ki(t,["item"]);return n.createElement(_n.A,zi(Wi({},r),{isPlayButtonCard:!0,item:a}))}),[]);return i?n.createElement(k.Ay,{containerProvider:t,containerServer:e,containerSourceURI:i.sourceURI,containerSubtype:v.i9.Trailer,containerType:se.A.Clip},n.createElement(Li.A,{cellComponentFactory:c,hub:{title:(0,j.A)("Extras"),sourceURI:i.sourceURI},items:i.items,keyPropName:"listItemKey",layout:s,totalSize:i.totalSize})):null}var Qi=a(53356);const $i={container:"PrePlayPopularList-container-EuBOh2",moreContainer:"PrePlayPopularList-moreContainer-iQ4y2H"};var Gi=Object.defineProperty,Ji=Object.defineProperties,Xi=Object.getOwnPropertyDescriptors,_i=Object.getOwnPropertySymbols,Yi=Object.prototype.hasOwnProperty,Zi=Object.prototype.propertyIsEnumerable,el=(e,t,a)=>t in e?Gi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,tl=(e,t)=>{for(var a in t||(t={}))Yi.call(t,a)&&el(e,a,t[a]);if(_i)for(var a of _i(t))Zi.call(t,a)&&el(e,a,t[a]);return e},al=(e,t)=>Ji(e,Xi(t));function nl({className:e=$i.container}){var t,a;const r=(0,o.wA)(),{popularLeavesSourceURI:i}=(0,o.d4)(ye.A),l=(0,n.useMemo)((()=>i?(0,ia.A)(i):()=>{}),[i]),s=(0,o.d4)(l),c=q(),[m,d]=de(c.contentHeight),[u,y]=(0,b.Ss)(),p=null!=(t=null==s?void 0:s.items.length)?t:0,f=null!=(a=null==s?void 0:s.totalSize)?a:p,A=null==s?void 0:s.sourceURI,[g,E]=(0,n.useState)(p<5?p:5),h=(0,n.useMemo)((()=>[be.DD,be.P8,be.sH,be.p0]),[]),I=(0,n.useMemo)((()=>(0,Qi.A)()),[]),P=(0,n.useCallback)((e=>{A&&r(ra.A.actions.fetchRangeRequested(al(tl({},e),{server:u,provider:y,sourceURI:A})))}),[A,r,u,y]),S=(0,n.useCallback)((()=>{const e=g+10;E(e>f?f:e)}),[f,g]),w=(0,n.useCallback)((e=>n.createElement(Ae.A,tl({hasTransientActionsCell:!0,index:e.cellIndex+1,tableColumns:h},e))),[h]);return s?n.createElement("div",{className:e},n.createElement(k.Ay,{containerProvider:y,containerServer:u,containerSourceURI:s.sourceURI,containerType:v.QD.Track},n.createElement(Oe,{title:(0,j.A)("Popular Tracks")}),n.createElement(Aa,null),n.createElement("div",{ref:d},n.createElement(pe.Ay,{items:s.items},n.createElement(ce.A,{cellComponentFactory:w,items:s.items,keyPropName:"listItemKey",layout:I,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop-m,totalSize:g,viewportHeight:c.height,viewportWidth:c.width,onPageRequest:P}))),n.createElement(Aa,null),n.createElement("div",{className:$i.moreContainer},g<f?n.createElement(Lt.A,{onPress:S},(0,j.A)("Show More")):null))):null}function rl({metadataItem:e,onScrollPositionReady:t}){const{summary:a}=e,r=(0,W.A)(e),i=$a(e,"Country"),l=$a(e,"Genre"),o=$a(e,"Style"),s=On(e);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isPlayRadioVisible","isAddToPlaylistVisible","isSyncDownloadVisible","isEditVisible"]}),facts:i,genres:l,metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),showAttributionLogo:!0,starRating:r?n.createElement(it.p,{metadataItem:e}):void 0,summary:a,title:(0,ot.A)(e)},o||s?n.createElement(Ze,null,o?n.createElement(et,null,n.createElement(U.nT,{label:(0,j.A)("Style")},o)):null,s):null),n.createElement(nl,null),n.createElement(ki,{metadataItem:e}),n.createElement(qi,null),n.createElement(ja,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}function il(e){return e.duration?(0,V.A)(e.duration):void 0}function ll({metadataItem:e,onScrollPositionReady:t}){const{contentRating:a,summary:r}=e,i=(0,W.A)(e),l=On(e);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible"]}),facts:[il(e),a?(0,B.A)(a):void 0],metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),showAttributionLogo:!0,starRating:i?n.createElement(it.p,{metadataItem:e}):void 0,summary:r,title:(0,ot.A)(e)},l),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}var ol=a(5079),sl=a(58410),cl=a(57978),ml=a(47091),dl=a(40961),ul=a(4152),yl=a(3047),pl=a(48403);const vl={listContainer:"PrePlayCuratedItemsList-listContainer-dkVFmY",dragLayer:"PrePlayCuratedItemsList-dragLayer-e6SIlz"};var fl=Object.defineProperty,Al=Object.defineProperties,bl=Object.getOwnPropertyDescriptors,gl=Object.getOwnPropertySymbols,El=Object.prototype.hasOwnProperty,hl=Object.prototype.propertyIsEnumerable,Il=(e,t,a)=>t in e?fl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Pl=(e,t)=>{for(var a in t||(t={}))El.call(t,a)&&Il(e,a,t[a]);if(gl)for(var a of gl(t))hl.call(t,a)&&Il(e,a,t[a]);return e},Sl=(e,t)=>Al(e,bl(t)),wl=(e,t)=>{var a={};for(var n in e)El.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&gl)for(var n of gl(e))t.indexOf(n)<0&&hl.call(e,n)&&(a[n]=e[n]);return a};const Ol=parseInt(ve.A.v4PagePadding,10);function Rl(e){return e===se.T.TrackDetails?na:_n.A}const Cl="ListItem";function Tl(e){var t=e,{isScrolling:a,listStyle:r,onDragMove:i,onDragEnd:l}=t,o=wl(t,["isScrolling","listStyle","onDragMove","onDragEnd"]);const s=(0,n.useRef)(null),[,c]=(0,ol.H)({accept:Cl,hover(e,t){const n=e.metadataItem,r=o.item;!a&&n!==r&&r&&t.isOver()&&i({moveItem:n,moveIndex:e.index,toIndex:o.cellIndex})},collect:e=>({isOver:e.isOver()})}),[{isDragging:m},d,u]=(0,sl.i)({type:Cl,item(){var e;return{index:o.cellIndex,metadataItem:null!=(e=o.item)?e:ul.A,size:{width:o.cellWidth,height:o.cellHeight}}},isDragging(e){var t;return(null==(t=o.item)?void 0:t.sourceURI)===e.getItem().metadataItem.sourceURI},collect:e=>({isDragging:e.isDragging()}),end(e){l({moveItem:e.metadataItem,moveIndex:e.index,toIndex:o.cellIndex})}});u((0,ml.n)()),d(c(s));const y=Rl(r);return n.createElement(y,Pl({ref:s,index:o.cellIndex+1,isSortable:!0,style:{opacity:m?0:1}},o))}function Ml({className:e=vl.listContainer,metadataItem:t}){var a;const r=(0,o.wA)(),[i,l]=(0,b.Ss)(),{containerMeta:s}=(0,k.Xw)(),c=q(),{descendantListSourceURI:m}=(0,o.d4)(ye.A),d=(0,o.d4)(hi.A),u=(0,o.d4)(Ei.A),y=(0,o.d4)(Zn.A),p=(0,pl.A)(c.scrollTop)!==c.scrollTop,v=(0,ue.A)(),[f,A]=(0,n.useState)(null!=(a=null==v?void 0:v.items)?a:[]);(0,n.useEffect)((()=>{var e;A(null!=(e=null==v?void 0:v.items)?e:[])}),[null==v?void 0:v.items]);const[g,E]=de(c.contentHeight),h=(0,n.useCallback)((e=>{m&&r(ra.A.actions.fetchRangeRequested(Sl(Pl({},e),{server:i,provider:l,sourceURI:m})))}),[m,r,l,i]),I=(0,n.useMemo)((()=>u===se.T.TrackDetails?pa({outerPaddingRight:Ol,outerPaddingLeft:Ol}):d?(0,Yn.A)({listType:d,subtype:t.subtype,columnWidth:y,listStyle:se.T.PrePlayGrid,displayFields:null==s?void 0:s.DisplayFields,displayImages:null==s?void 0:s.DisplayImage}):void 0),[u,d,t.subtype,y,null==s?void 0:s.DisplayFields,null==s?void 0:s.DisplayImage]),P=(0,n.useCallback)((({moveItem:e,toIndex:t})=>{A((a=>{const n=a.findIndex((t=>t.sourceURI===e.sourceURI));if(n<0||t<0)return a;const r=Array.from(a),[i]=r.splice(n,1);return r.splice(t,0,i),r}))}),[]),S=(0,n.useCallback)((({moveItem:e,moveIndex:a,toIndex:n})=>{if(a<0||a===n)return;const o=f[n-1];r(yl.A.actions.moveItemRequested({server:i,provider:l,sourceURI:e.sourceURI,containerKey:t.key,ratingKey:e.ratingKey,afterID:o?o.ratingKey:void 0}))}),[r,t.key,f,l,i]),{currentOffset:w,dragItem:O}=(0,cl.V)((e=>e.getItemType()!==Cl?{}:{currentOffset:e.getSourceClientOffset(),dragItem:e.getItem()}));(0,n.useEffect)((()=>{const{height:e,scrollTop:t,onRequestScrollPosition:a}=c;if(!w)return;const n=.05*e,r=n,i=e-n;let l=0;w.y>i?l=50:w.y<r&&(l=-50),t+l!==t&&a({targetScrollTop:t+l})}),[w,c]);const R=(0,n.useCallback)((e=>n.createElement(Tl,Pl({isScrolling:p,listStyle:u,onDragEnd:S,onDragMove:P},e))),[p,u,P,S]);if(!(m&&d&&I&&v&&v.totalSize))return null;const C=Rl(u);return n.createElement("div",{ref:E,className:e},n.createElement(k.Ay,{containerKey:t.childrenKey,containerProvider:l,containerServer:i,containerSourceURI:m,containerSubtype:t.subtype,containerType:d,listStyle:u},n.createElement(Fn,{metadataItem:t,metadataList:v}),n.createElement(pe.Ay,{items:f},u===se.T.TrackDetails?n.createElement(Aa,null):null,n.createElement(ce.A,{cellComponentFactory:R,items:f,keyPropName:"listItemKey",layout:I,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop-g,totalSize:v.totalSize,viewportHeight:c.height,viewportWidth:c.width,onPageRequest:h}),u===se.T.TrackDetails?n.createElement(Aa,null):null),w&&O?dl.createPortal(n.createElement("div",{className:vl.dragLayer},n.createElement(C,{key:"dragItem",cellHeight:O.size.height,cellIndex:0,cellWidth:O.size.width,index:0,isVirtual:!1,item:O.metadataItem,style:Sl(Pl({},O.size),{transform:`translate(${w.x}px, ${w.y}px)`})})),document.body):null))}function Dl({minYear:e,maxYear:t}){const a=!(!e||!t||e===t);return a||t&&e===t?a?`${e} — ${t}`:t:void 0}function kl({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:i,smart:l,summary:o,title:s}=e,[c]=(0,b.Ss)(),m=(0,W.A)(e),d=On(e);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isPlayTrailerVisible","isShuffleVisible","isSyncDownloadVisible","isEditVisible"]}),facts:Dl(e),metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[r?(0,B.A)(r):void 0,i||a?n.createElement(H.A,{key:"criticRating",metadataItem:e}):null],starRating:m?n.createElement(it.p,{key:"userRating",metadataItem:e}):void 0,summary:o,title:s},d),l||!c.isFullOwnedServer?n.createElement(ki,{metadataItem:e}):n.createElement(Ml,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}var xl=a(37548),Ll=a(15348);function jl({allowLink:e=!0,metadataItem:t}){const a=(0,nt.A)(t,"key"),r=(0,nt.A)(t,"parentKey"),i=(0,Ll.A)({seasonIndex:t.parentIndex,noLeadingZero:!0}),l=(0,xl.A)({episodeIndex:t.index,date:t.originallyAvailableAt,noLeadingZero:!0});return e&&a&&r?n.createElement(Ye.I1,null,t.index&&i?n.createElement(at.N,{href:r,title:t.parentTitle},i):null,t.index&&i?n.createElement(ht.A,{separator:"·"}):null,n.createElement(at.N,{href:a,title:t.title},l)):n.createElement(Ye.I1,null,t.index&&i?n.createElement(Ba.E,{color:"primary",font:"body-1",title:t.parentTitle},i):null,t.index&&i?n.createElement(ht.A,{separator:"·"}):null,n.createElement(Ba.E,{color:"primary",font:"body-1",title:t.title},l))}var Nl=a(95456),Fl=a(35416),Ul=a(37263),Vl=a(57055),Bl=a(93788),Hl=a(21267),Wl=a(79393),zl=a(54021),Kl=a(24957),ql=a(11348),Ql=a(46256),$l=a(19584),Gl=a(95841),Jl=a(45418),Xl=a(61641),_l=a(86156),Yl=a(99049),Zl=a(28518),eo=a(76465),to=a(34398);const ao={menu:"EPGShowPrePlayActionBar-menu-B2nhRi PrePlayActionBar-menu-xDrJti Menu-menu-OCzudL"},no=["isRecordVisible","isPlayVisible","isShareVisible"];function ro({isPrimary:e,isDisabled:t,metadataItem:a,remoteWatchPassModalState:r}){const i=(0,o.wA)(),[s,c]=(0,b.Ss)(),m=(0,Yt.A)(a.sourceURI),d=(0,Jn.A)(a.Media),{metricsPage:u,metricsContextTuple:y}=(0,l.Mp)(),p=(0,Kl.A)(a.source,{type:a.type}),v=(0,n.useCallback)((()=>{p?r.onOpen():i(Vl.gC({serverEntityID:s.entityID,providerEntityID:c.entityID,metricsPage:u,metricsContext:y,options:{type:Wl.G_,identifier:null==d?void 0:d.channelIdentifier}}))}),[i,null==d?void 0:d.channelIdentifier,y,u,c.entityID,r,p,s.entityID]);return(0,n.useEffect)((()=>(Hl.A.on("shortcut:playSelected",v),()=>{Hl.A.off("shortcut:playSelected",v)}))),n.createElement($l.A,{icon:Nl.default,isDisabled:t,isLabeled:e,isPrimary:e,testID:"preplay-play",title:(0,ql.A)(a,m),onPress:v})}function io({metadataItem:e}){const t=(0,o.wA)(),a=(0,_a.A)(),r=(0,Ul.E)(),[i,l]=(0,b.Ss)(),s=(0,o.d4)(Bl.A),c=(0,o.d4)(vt.A),m=(0,o.d4)(Yl.A),d=(0,ue.A)(),u=null==d?void 0:d.items.find((e=>!!(0,Jn.A)(e.Media))),{favoriteChannels:y}=(0,o.d4)(_l.A),p=(0,n.useMemo)((()=>!y.isPending&&!y.isPopulated&&!y.error),[y.error,y.isPending,y.isPopulated]),f=(0,Zl.A)(zl.v.IncludeSocialProof),A=(0,n.useRef)(null),g=(0,o.d4)(Ql.A),E=(0,Yt.A)(e.sourceURI),h=(0,Ul.E)(),I=(0,n.useMemo)((()=>{var t;const a=(0,Ct.Ay)({server:i,provider:l,stableUser:c,metadataItem:e,metadataItemState:E,deviceSettings:g});if(!f&&a.isShareVisible&&delete a.isShareVisible,e.type===v.QD.Show)a.isPlayVisible=!0;else if(u){const{beginsAt:e,endsAt:n}=null!=(t=(0,Jn.A)(u.Media))?t:{},r=Math.floor(Date.now()/1e3);e&&n&&r>=e&&r<n&&(a.isPlayVisible=!0)}return a}),[g,f,e,E,u,l,i,c]);(0,n.useEffect)((()=>{p&&t(Xl.Ay.actions.favoriteChannelsFetchRequested({cloudServer:s}))}),[s,t,p]);const P=function(e){return Object.keys(e).reduce(((t,a)=>{const n=a;return t[n]=!no.includes(n)&&e[n],t}),{})}(I),S=Object.keys(P).some((e=>"isShareVisible"!==e&&P[e]));return 0===Object.keys(I).filter((e=>I[e])).length?null:n.createElement(Ye.BJ,{ref:A,align:["center","left"],gap:"xs",minHeight:40,orientation:"horizontal",wrap:!0},no.filter((e=>I[e])).map(((t,a)=>n.createElement(Gl.A,{key:t,errorComponent:to.A},"isPlayVisible"===t?n.createElement(ro,{isDisabled:m,isPrimary:0===a,metadataItem:null!=u?u:e,remoteWatchPassModalState:h}):null,"isPlayVisible"!==t?n.createElement(eo.A,{action:t,isDisabled:m,isPrimary:0===a,metadataItem:e,metadataItemState:E,remoteWatchPassModalState:h}):null))),S?n.createElement($l.A,{icon:Fl.default,id:a,isDisabled:m,isWaiting:y.isPending,testID:"preplay-more",title:(0,j.A)("More"),onPress:r.onOpen}):null,n.createElement(bt.A,{actionsOverride:P,className:ao.menu,isOpen:r.isOpen,metadataItem:e,target:a,onMenuClose:r.onClose}),n.createElement(Jl.A,{modalState:h}))}var lo=a(85206),oo=a(5965);function so(e,t,a){const n=e/1e3;return a<n?(0,j.A)("Aired"):t<=n&&a>=n?(0,j.A)("Airing"):(0,j.A)("Airs")}function co({metadataItem:e}){const t=(0,o.d4)((0,C.A)("timeFormat")),a=(0,oo.A)(),r=(0,Jn.A)(e.Media);if(!r)return null;const{Channel:i}=e,{videoResolution:l,beginsAt:s,endsAt:c,channelID:m}=r,d=null==i?void 0:i.find((e=>e.id===m));return n.createElement(et,null,l?n.createElement(U.nT,{label:(0,j.A)("Video")},function(e){const t=parseInt(e,10);return t>=720||4===t||8===t}(l)?(0,j.A)("HD"):(0,j.A)("SD")):null,null!=s&&null!=c?n.createElement(U.nT,{label:so(a,s,c)},(0,lo.A)({now:a,beginsAt:s,endsAt:c,channel:null==d?void 0:d.tag,timeFormat:t,showFullTime:!0,showChannel:!0})):null)}function mo({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:i,summary:l}=e,o=(0,nt.A)(e,"grandparentKey");return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(io,{metadataItem:e}),facts:n.createElement(jl,{metadataItem:e}),genres:[il(e),r?(0,B.A)(r):void 0],metadataItem:e,poster:n.createElement(lt.A,{aspectRatio:Tt.Yc,isChromaMetadata:!0,metadataItem:e}),ratings:[i||a?n.createElement(H.A,{metadataItem:e}):null],subtitle:(0,ot.A)(e),summary:l,title:o?n.createElement(at.N,{color:"inherit",font:"inherit",href:o},e.grandparentTitle):e.grandparentTitle},n.createElement(co,{metadataItem:e})),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}var uo=a(42498),yo=a(4511),po=a(76440),vo=a(21686),fo=a(28829),Ao=a(12063),bo=a(20846),go=a(56642),Eo=a(91858);const ho={placeholder:"PrePlayCastList-placeholder-Bnia6W ListRowPlaceholder-placeholder-g75gnX"};var Io=Object.defineProperty,Po=Object.defineProperties,So=Object.getOwnPropertyDescriptors,wo=Object.getOwnPropertySymbols,Oo=Object.prototype.hasOwnProperty,Ro=Object.prototype.propertyIsEnumerable,Co=(e,t,a)=>t in e?Io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,To=(e,t)=>{for(var a in t||(t={}))Oo.call(t,a)&&Co(e,a,t[a]);if(wo)for(var a of wo(t))Ro.call(t,a)&&Co(e,a,t[a]);return e},Mo=(e,t)=>Po(e,So(t)),Do=(e,t)=>{var a={};for(var n in e)Oo.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&wo)for(var n of wo(e))t.indexOf(n)<0&&Ro.call(e,n)&&(a[n]=e[n]);return a};const ko=25,xo="viewAll";function Lo(){const[e,t]=(0,b.Ss)(),a=(0,o.d4)(bo.A),r=a?(0,Eo.A)(e.machineIdentifier,t.identifier,{key:a.key,metadataType:a.type}):void 0;return n.createElement(Pe.A,{href:r},(0,j.A)("Cast & Crew"))}function jo(e){var t=Do(e,[]);const a=(0,ge.A)(t),{cellIndex:r}=t,i=(0,n.useMemo)((()=>(0,Mt.A)({width:t.cellWidth,aspectRatio:Tt.mH})),[t.cellWidth]);return n.createElement(Zt.A,{className:ho.placeholder,index:r,style:To(To({},a.style),i)})}function No({metadataItem:e}){const[t,a,r]=(0,b.Ss)(),i=(0,o.wA)(),l=(0,o.d4)(Zn.A),{settings:s,isPending:c,isPopulated:m,error:u}=(0,o.d4)((0,uo.A)(t.machineIdentifier,e.librarySectionID)),{credits:{isPending:y}}=(0,o.d4)(ye.A),p=(0,o.d4)(Ao.A),{librarySectionID:v}=e,f=(0,n.useMemo)((()=>(0,xi.A)({listType:se.A.Person,columnWidth:l,titleCount:2})),[l]);(0,fo.A)(),(0,n.useEffect)((()=>{t.isCloud||!v||c||m||u||i(yo.Ay.actions.fetchServerSectionSettings({server:t,librarySectionID:v}))}),[i,u,c,m,v,t]);const A=(0,n.useMemo)((()=>{if(y)return new Array(ko);const e=(0,go.Ay)(p),a=t.isCloud||!v||m||u?e:new Array(ko);return a.length>ko?[...a.slice(0,ko),{tagKey:xo}]:a}),[p,u,y,m,v,t.isCloud]),g=(0,n.useCallback)((i=>{if(!i.item)return n.createElement(jo,To({},i));if(i.item.tagKey===xo){const r=e?(0,Eo.A)(t.machineIdentifier,a.identifier,{key:e.key,metadataType:e.type}):void 0;return n.createElement(po.A,Mo(To({},i),{href:r}))}return n.createElement(vo.A,Mo(To({},i),{contentDirectory:r,metadataItem:e,provider:a,server:t,serverSettings:s}))}),[r,e,a,t,s]);return n.createElement(Li.A,{cellComponentFactory:g,hub:{sourceURI:d.A.join([e.sourceURI,"castList"])},hubTitleComponent:Lo,items:A,layout:f,totalSize:A.length})}function Fo({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:i,summary:l,year:o}=e,s=$a(e,"Genre");return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(io,{metadataItem:e}),facts:[o,il(e),r?(0,B.A)(r):void 0],genres:s,metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[i||a?n.createElement(H.A,{key:"criticRating",metadataItem:e}):null],summary:l,title:(0,ot.A)(e)},n.createElement(co,{metadataItem:e})),n.createElement(No,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}function Uo({metadataItem:e,onScrollPositionReady:t}){const{audienceRating:a,contentRating:r,rating:i,summary:l,title:o}=e,s=$a(e,"Genre"),c=On(e);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(io,{metadataItem:e}),genres:s,metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[r?(0,B.A)(r):void 0,i||a?n.createElement(H.A,{key:"criticRating",metadataItem:e}):null],summary:l,title:o},c),n.createElement(ki,{metadataItem:e}),n.createElement(No,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}var Vo=a(60137);function Bo(e){const[t,a]=(0,b.Ss)(),n=(0,o.d4)(vt.A),r=(0,Yt.A)(null==e?void 0:e.sourceURI);return(0,Ct.zk)({server:t,provider:a,stableUser:n,metadataItem:e,metadataItemState:r})}var Ho=a(64739),Wo=a(37885),zo=a(93455),Ko=a(99686),qo=a(11084),Qo=a(38815),$o=a(83566),Go=a(14282),Jo=a(86134),Xo=a(54495),_o=a(40500),Yo=a(19857),Zo=a(66193),es=a(62663),ts=a(76528);function as(){const e=(0,j.A)("An unexpected error is impacting the Rate & Review action");return n.createElement(ts.A,{errorMessage:`${e}.`,iconSize:"s",tooltipPlacement:"right"})}var ns=a(19781),rs=a(97875),is=a(68436);const ls=function({metadataItem:e}){const t=(0,Ul.E)(),a=(0,Yt.A)(e.sourceURI),r=(0,n.useMemo)((()=>{var t;return null!=(t=(0,Qo.A)(e.guid))?t:""}),[e.guid]),{data:i,isLoading:l,error:o,refetch:s}=(0,is.Ks)({metadataID:r},{skip:!r,refetchOnMountOrArgChange:!0}),c=(0,n.useMemo)((()=>{var e;return(null==i?void 0:i.metadataReviewV2)?(0,rs.A)(i.metadataReviewV2):null!=(e=a.userRating)?e:0}),[null==i?void 0:i.metadataReviewV2,a.userRating]),m=(0,n.useCallback)((()=>{s()}),[s]),d=(0,n.useCallback)((()=>{t.onClose(),s()}),[s,t]);return l?null:o?a.userRating?n.createElement(it.p,{key:"userRating",metadataItem:e}):n.createElement(as,null):n.createElement(Ye.BJ,{minHeight:40,verticalAlign:"center"},(null==i?void 0:i.metadataReviewV2)&&"message"in i.metadataReviewV2||c?n.createElement(Ye.BJ,{gap:"none",orientation:"horizontal",verticalAlign:"center"},n.createElement(_o.$n,{font:"button-2",label:n.createElement(Ye.BJ,{gap:"xs",orientation:"horizontal",verticalAlign:"center"},n.createElement(Yo.G,{accessibilityLabel:(0,j.A)("Rated {rating} out of 10",{rating:c}),iconSize:"m",value:c}),(null==i?void 0:i.metadataReviewV2)&&"message"in i.metadataReviewV2?(0,j.A)("Reviewed {date}",{date:(0,Zo.a)(i.metadataReviewV2.date,!0)}):(0,j.A)("Add a review")),pill:!0,size:"xs",onPress:t.onToggle}),(null==i?void 0:i.metadataReviewV2)?n.createElement(es.A,{activity:null==i?void 0:i.metadataReviewV2}):null):n.createElement(_o.K0,{icon:"rate-review-filled",label:(0,j.A)("Rate & Review"),pill:!0,size:"xs",onPress:t.onToggle}),n.createElement(ns.A,{metadataItem:e,metadataItemState:a,modalState:t,onRemoveSuccess:d,onSaveSuccess:m}))},os=function({metadataItem:e}){const t=(0,o.wA)(),a=(0,o.d4)(Xo.A),r=(0,o.d4)(qo.A),i=(0,n.useMemo)((()=>`library/metadata/${(0,Qo.A)(e.guid)}`),[e.guid]),{isPending:l,isPopulated:s,error:c,item:{publicPagesURL:m}}=(0,o.d4)((0,Jo.A)(i)),d=(0,W.A)(e),u=function(e){const[t,a]=(0,b.Ss)(),n=(0,o.d4)(vt.A),r=(0,Yt.A)(null==e?void 0:e.sourceURI),i=(0,Zl.A)(zl.v.IncludeDiscoverSource),{viewStateSync:{consent:l}}=(0,o.d4)($o.A),s=(0,Ho.A)(e);return!!(t.isCloud||"given"===l&&i)&&(0,Ct.TX)({server:t,provider:a,stableUser:n,metadataItem:e,metadataItemState:r,isAdultLibrary:s})}(e);return(0,n.useEffect)((()=>{!u||!r||e.publicPagesURL||l||s||c||t(Go.A.actions.fetchMetadataItem({server:a,provider:r,key:i}))}),[t,l,s,u,e.publicPagesURL,c,r,i,a]),u&&!e.publicPagesURL&&l?null:u&&(e.publicPagesURL||s&&m)?n.createElement(ls,{key:"userReview",metadataItem:e}):d?n.createElement(it.p,{key:"userRating",metadataItem:e}):null};var ss=a(42019),cs=a(19594),ms=a(60966),ds=a(41455),us=a(9612),ys=a(19927);function ps({plexStats:e,metadataItem:t,height:a}){const r=(0,o.d4)((0,ys.A)(cn.eR)),i=function(e,t){if(t)return!e.isUnreleased||e.isUnreleased&&(e.type===v.QD.Episode||e.type===v.QD.Season)?{amount:null==t?void 0:t.watchedAmount,suffix:null==t?void 0:t.watchedSuffix,type:"watched"}:{amount:null==t?void 0:t.watchlistedAmount,suffix:null==t?void 0:t.watchlistedSuffix,type:"watchlisted"}}(t,e);if(!i||!r)return null;const{amount:l,suffix:s,type:c}=i;return l&&"0"!==l?n.createElement(Ye.BJ,{gap:"xs",height:a,orientation:"horizontal",verticalAlign:"center"},n.createElement(Ba.E,{color:"primary",font:"heading-2",numberOfLines:1},`${l}${s}`),"watched"===c?n.createElement(Ba.E,{color:"default",font:"body-2"},"1"!==l||s?(0,j.A)("people on Plex have watched this"):(0,j.A)("person on Plex has watched this")):null,"watchlisted"===c?n.createElement(Ba.E,{color:"default",font:"body-2"},"1"!==l||s?(0,j.A)("people on Plex have watchlisted this"):(0,j.A)("person on Plex has watchlisted this")):null):n.createElement(Ye.BJ,{gap:"xs",height:a,orientation:"horizontal",verticalAlign:"center"},n.createElement(us.default,{size:"m"}),"watched"===c?n.createElement(Ba.E,{color:"default",font:"body-2"},(0,j.A)("Be the first person to watch this!")):null,"watchlisted"===c?n.createElement(Ba.E,{color:"default",font:"body-2"},(0,j.A)("Be the first person to watchlist this!")):null)}var vs=a(58240);function fs(e,t,a){const n=null==t?void 0:t.length,r=t.map((({displayName:t,username:a,id:n})=>n===e?(0,j.A)("You"):t||a));return t&&n?n>3?(0,j.A)("Activity by {firstMention}, {secondMention} and {usersLeft} others",{firstMention:r[0],secondMention:r[1],usersLeft:a-2}):3===n?(0,j.A)("Activity by {firstMention}, {secondMention} and 1 other",{firstMention:r[0],secondMention:r[1]}):2===n?(0,j.A)("Activity by {firstMention} and {secondMention}",{firstMention:r[0],secondMention:r[1]}):(0,j.A)("Activity by {firstMention}",{firstMention:r[0]}):""}var As=a(91389),bs=a(15635),gs=a(86112);const Es=function(e,t,a){const n=(0,bs.A)(e,t,As.A.prePlayActivityFeed),r=(0,gs.A)(e,t);return"#!"+d.A.join((0,s.tW)(n,r),a)};var hs=a(53059),Is=a(59485),Ps=a(66963);const Ss=(0,Is.A)("xxl");function ws({metadataItem:e}){const t=(0,ms.A)(),a=(0,Zl.A)(zl.v.IncludeSocialProof),[r,i]=(0,b.Ss)(),l=(0,o.wA)(),{details:s}=(0,o.d4)($o.A),c=(0,hs.o)(cn.p6),m=(0,n.useMemo)((()=>{var t;return null!=(t=(0,Qo.A)(e.guid))?t:""}),[e.guid]),{data:d,isLoading:u,error:y}=(0,Ps.WZ)({metadataID:m,includeDescendants:!0,types:c?vs.G:vs.s},{skip:!m||!a||!!e.Channel,refetchOnMountOrArgChange:!0}),p=(0,n.useMemo)((()=>d?d.activityMentionsV2.recentUsers.flatMap((e=>e.avatar||[])):[]),[d]),v=(0,n.useCallback)((()=>{l((0,ss.oo)({pathname:Es(r.machineIdentifier,i.identifier,{key:e.key})})),t({action:cs.pT})}),[l,e.key,i.identifier,r.machineIdentifier,t]);return e.guid&&a?u||y?n.createElement("div",{style:{height:Ss}}):p.length&&(null==d?void 0:d.activityMentionsV2.recentUsers.length)?n.createElement(ds.A,{avatars:p,label:fs(s.uuid,d.activityMentionsV2.recentUsers,d.activityMentionsV2.uniqueUsersCount),numberOfLines:2,onPress:v}):n.createElement(ps,{height:Ss,metadataItem:e,plexStats:null==d?void 0:d.activityMentionsV2.plexStats}):null}const Os={container:"StreamDetailPropertiesTable-container-vnpzQ6"};function Rs({children:e}){return n.createElement("div",{className:Os.container},n.createElement(Ze,null,e))}var Cs=a(79848),Ts=a(19534),Ms=a(26308),Ds=a(3467),ks=a(86592),xs=Object.defineProperty,Ls=Object.defineProperties,js=Object.getOwnPropertyDescriptors,Ns=Object.getOwnPropertySymbols,Fs=Object.prototype.hasOwnProperty,Us=Object.prototype.propertyIsEnumerable,Vs=(e,t,a)=>t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Bs=(e,t)=>{for(var a in t||(t={}))Fs.call(t,a)&&Vs(e,a,t[a]);if(Ns)for(var a of Ns(t))Us.call(t,a)&&Vs(e,a,t[a]);return e},Hs=(e,t)=>Ls(e,js(t));function Ws(e){const{metricsPage:t,metricsContextTuple:a}=(0,l.Mp)(),r=(0,n.useMemo)((()=>(0,h.A)(e)),[e]);return(0,n.useCallback)((e=>{(0,Ds.hd)("metrics").trackEvent({event:ks.pM,page:t,interaction:!0,properties:{contextTuple:a,metadataItem:Hs(Bs({},r),{service:e.title,serviceId:e.platform})}})}),[a,r,t])}var zs=a(96563),Ks=a(3099);const qs="PrePlayAvailabilityItem-badge-OsI5kO";var Qs=Object.defineProperty,$s=Object.defineProperties,Gs=Object.getOwnPropertyDescriptors,Js=Object.getOwnPropertySymbols,Xs=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,Ys=(e,t,a)=>t in e?Qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Zs=(e,t)=>{for(var a in t||(t={}))Xs.call(t,a)&&Ys(e,a,t[a]);if(Js)for(var a of Js(t))_s.call(t,a)&&Ys(e,a,t[a]);return e},ec=(e,t)=>$s(e,Gs(t));const tc=parseInt(ve.A.v4PrePlayAvailabilityWidth,10);function ac({title:e,numberOfLines:t=1}){const a=Array.isArray(e)?e:[e];return n.createElement(n.Fragment,null,a.map(((e,a)=>n.createElement(Ba.E,{key:a,color:"muted",font:"body-3",numberOfLines:t},e))))}function nc({thumb:e,primaryTitle:t,secondaryTitle:a,tertiaryTitle:r}){return n.createElement(Ye.BJ,{gap:"m",orientation:"horizontal",verticalAlign:"center",width:tc},n.createElement(Ye.BJ,{shrink:!1},e),n.createElement(Ye.BJ,null,t?n.createElement(Ba.E,{color:"primary",font:"body-3",numberOfLines:a?1:2},t):null,a?n.createElement(ac,{numberOfLines:r?1:2,title:a}):null,r?n.createElement(Ba.E,{color:"muted",font:"body-3",numberOfLines:1},r):null))}const rc=(0,n.forwardRef)((function(e,t){const{thumb:a,badge:r,primaryTitle:i,secondaryTitle:l,href:o,target:s,onPress:c}=e,[m,d]=(0,n.useState)(!1),u=(0,n.useCallback)((()=>d(!0)),[]),y=(0,n.useCallback)((()=>d(!1)),[]),p={className:sr()("PrePlayAvailabilityItem-availabilityCell-KTf3LB Link-link-vSsQW1",m&&Ks.V),onBlur:y,onFocus:u},v=`${i||""}${i&&l?" • ":""}${l||""}`;return o?n.createElement(zs.s8,ec(Zs({},p),{href:o,target:s,title:v,onPress:c}),r?n.createElement("div",{className:qs},r):null,n.createElement(nc,{primaryTitle:i,secondaryTitle:l,tertiaryTitle:e.tertiaryTitle,thumb:a})):n.createElement(zs.al,ec(Zs({},p),{ref:t,title:v,onPress:c}),r?n.createElement("div",{className:qs},r):null,n.createElement(nc,{primaryTitle:i,secondaryTitle:l,tertiaryTitle:e.tertiaryTitle,thumb:a}))}));var ic=a(42136);function lc(e,t,a){return e.platform!==ic.yy&&a.isPopulated&&!a.watchlistedAt&&t.type===v.QD.Show}var oc=a(63737);function sc(e){switch(e.availability.offerType){case ic.cX.Free:return e.platform!==ic.yy?[(0,j.A)("Free")]:void 0;case ic.cX.Subscription:return[(0,j.A)("Subscription")];case ic.cX.Buy:case ic.cX.Rent:return[e.availability.buyPriceDescription?(0,j.A)("Buy {price}",{price:e.availability.buyPriceDescription}):void 0,e.availability.rentPriceDescription?(0,j.A)("Rent {price}",{price:e.availability.rentPriceDescription}):void 0].filter(Boolean);default:return}}const cc=function(e){return!!e&&"availabilities"in e};function mc(e){return cc(e)||e.availability.channelTitle?(0,j.A)("Free Live TV"):e.platform===ic.yy?e.availability.offerType===ic.cX.Free?(0,j.A)("Free On Demand"):(0,j.A)("On Demand"):e.title}var dc=a(14044);function uc(e){const t=cc(e)?e.availabilities[0]:e.availability;return(null==t?void 0:t.serverIdentifier)&&(null==t?void 0:t.providerIdentifier)&&(null==t?void 0:t.key)?(0,dc.A)(t.serverIdentifier,t.providerIdentifier,{key:t.key}):t.platformInfo.web.url}var yc=a(29943),pc=a(2043);const vc=function({className:e="LiveBadge-badge-ak80zJ"}){return n.createElement("div",{className:e},(0,j.A)("Live"))};var fc=a(83461),Ac=a(14082),bc=a(38309),gc=a(19514),Ec=a(95989),hc=Object.defineProperty,Ic=Object.defineProperties,Pc=Object.getOwnPropertyDescriptors,Sc=Object.getOwnPropertySymbols,wc=Object.prototype.hasOwnProperty,Oc=Object.prototype.propertyIsEnumerable,Rc=(e,t,a)=>t in e?hc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function Cc(e){var t,a=e,{item:r,metadataType:i}=a,l=((e,t)=>{var a={};for(var n in e)wc.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Sc)for(var n of Sc(e))t.indexOf(n)<0&&Oc.call(e,n)&&(a[n]=e[n]);return a})(a,["item","metadataType"]);const s=(0,oo.A)(),c=(0,gc.A)(l),m=(0,o.d4)((0,C.A)("timeFormat"));return(null==(t=null==r?void 0:r.Media)?void 0:t.length)?n.createElement(Nt.A,{style:c.style},n.createElement(Ye.BJ,{gap:"s",paddingBottom:"s",width:"100%"},n.createElement(Ye.BJ,{gap:"none",paddingX:"m"},null!=r.index&&null!=r.parentIndex&&i!==v.QD.Episode?n.createElement(Ba.E,{font:"heading-4"},(0,bc.A)({seasonIndex:r.parentIndex,episodeIndex:r.index,noLeadingZero:!0,separator:" · ",includeSpecials:!0})):null,n.createElement(Ba.E,{color:"muted",font:"body-2"},(0,lo.A)({now:s,beginsAt:r.Media[0].beginsAt,endsAt:r.Media[0].endsAt,timeFormat:m})),n.createElement(Ba.E,{color:"muted",font:"body-2"},r.channelTitle)),n.createElement(fc.c,{size:"s"}))):null}const Tc=function({modalState:e,metadataItem:t,availabilities:a}){const r=(0,n.useMemo)((()=>e=>{return n.createElement(Cc,(a=((e,t)=>{for(var a in t||(t={}))wc.call(t,a)&&Rc(e,a,t[a]);if(Sc)for(var a of Sc(t))Oc.call(t,a)&&Rc(e,a,t[a]);return e})({},e),r={metadataType:t.type},Ic(a,Pc(r))));var a,r}),[t.type]),i=(0,n.useMemo)((()=>(0,oa.A)({rowHeight:t.type===v.QD.Show||t.type===v.QD.Season?89:65})),[t.type]),l=(0,n.useMemo)((()=>{switch(t.type){case v.QD.Episode:return`${t.grandparentTitle} - ${(0,bc.A)({seasonIndex:t.parentIndex,episodeIndex:t.index,noLeadingZero:!0,separator:" · ",includeSpecials:!0})}`;case v.QD.Season:return`${t.parentTitle} - ${t.title}`;default:return t.title}}),[t.type,t.grandparentTitle,t.parentIndex,t.index,t.parentTitle,t.title]);return n.createElement(Ac.aF,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},n.createElement(Ac.$m,{closeButtonAccessibilityLabel:(0,j.A)("Close Upcoming Airings Modal"),title:(0,j.A)("Upcoming Airings of {title}",{title:l})},n.createElement(Ac.cw,null,n.createElement(Ec.A,{cellComponentFactory:r,items:a,layout:i,scrollDirection:O.D.Vertical,totalSize:a.length})),n.createElement(Ac.jl,null,n.createElement(Ac.Xd,null,n.createElement(Ac.s_,null,n.createElement(_o.$n,{label:(0,j.A)("Close")}))))))},Mc=function(e,t){const a=e.availabilities.length;return a>1?e.isPlayable?(0,j.A)("{airingsCount} airings",{airingsCount:a}):(0,j.A)("{airingsCount} upcoming airings",{airingsCount:a}):1===a&&e.availabilities[0].index&&e.availabilities[0].parentIndex&&t.type!==v.QD.Episode?(0,bc.A)({seasonIndex:e.availabilities[0].parentIndex,episodeIndex:e.availabilities[0].index,noLeadingZero:!0,separator:" · ",includeSpecials:!0}):void 0},Dc="ProviderAvailabilityItem-thumb-x9MXZE",kc="ProviderAvailabilityItem-badge-g4cD5o LiveBadge-badge-ak80zJ";var xc=Object.defineProperty,Lc=Object.defineProperties,jc=Object.getOwnPropertyDescriptors,Nc=Object.getOwnPropertySymbols,Fc=Object.prototype.hasOwnProperty,Uc=Object.prototype.propertyIsEnumerable,Vc=(e,t,a)=>t in e?xc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Bc=(e,t)=>{for(var a in t||(t={}))Fc.call(t,a)&&Vc(e,a,t[a]);if(Nc)for(var a of Nc(t))Uc.call(t,a)&&Vc(e,a,t[a]);return e};const Hc=parseInt(ve.A.v4PrePlayAvailabilityThumbSize,10);function Wc(e){var t=e,{item:a,metadataItem:r}=t,i=((e,t)=>{var a={};for(var n in e)Fc.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&Nc)for(var n of Nc(e))t.indexOf(n)<0&&Uc.call(e,n)&&(a[n]=e[n]);return a})(t,["item","metadataItem"]);const[l,o]=(0,b.Ss)(),s=(0,ge.A)(i),c=(0,Ul.E)(),m=(0,kt.Ay)({width:Hc,height:Hc,server:l,provider:o,url:a.thumb}),{onPlayPress:d,playModal:u}=(0,pc.A)(r),y=(0,n.useCallback)((()=>{a.isPlayable?d():c.onOpen()}),[c,a.isPlayable,d]);return n.createElement("div",{ref:s.cellRef,style:s.style},n.createElement(rc,{badge:a.isPlayable?n.createElement(vc,{className:kc}):null,primaryTitle:mc(a),secondaryTitle:a.isPlayable&&1===a.availabilities.length?a.availabilities[0].channelTitle:void 0,tertiaryTitle:Mc(a,r),thumb:n.createElement(jt.A,{className:Dc,height:Hc,src:m,width:Hc}),onPress:y}),a.isPlayable?null:n.createElement(Tc,{availabilities:a.availabilities,metadataItem:r,modalState:c}),u)}const zc=function(e){if(!e.item.isPlayable)return n.createElement(Wc,Bc({},e));const t=e.item.availabilities.reduce(((t,a)=>{if(a.playableKey){const i=(0,st.A)(a.playableKey);t.push((n=Bc({},ul.A),r={type:e.metadataItem.type===v.QD.Show?v.QD.Episode:e.metadataItem.type,title:a.title,index:a.index,parentIndex:a.parentIndex,Media:a.Media,playableKey:a.playableKey,sourceURI:(0,yc.A)({serverIdentifier:i.serverIdentifier,providerIdentifier:i.providerIdentifier})},Lc(n,jc(r))))}var n,r;return t}),[]);return n.createElement(M.A,{metadataItem:e.metadataItem,playableItems:t},n.createElement(Wc,Bc({},e)))};var Kc=Object.defineProperty,qc=Object.defineProperties,Qc=Object.getOwnPropertyDescriptors,$c=Object.getOwnPropertySymbols,Gc=Object.prototype.hasOwnProperty,Jc=Object.prototype.propertyIsEnumerable,Xc=(e,t,a)=>t in e?Kc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,_c=(e,t)=>{for(var a in t||(t={}))Gc.call(t,a)&&Xc(e,a,t[a]);if($c)for(var a of $c(t))Jc.call(t,a)&&Xc(e,a,t[a]);return e},Yc=(e,t)=>qc(e,Qc(t)),Zc=(e,t)=>{var a={};for(var n in e)Gc.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&$c)for(var n of $c(e))t.indexOf(n)<0&&Jc.call(e,n)&&(a[n]=e[n]);return a};const em=parseInt(ve.A.v4PrePlayAvailabilityThumbSize,10);function tm(e){var t=e,{addToWatchlistModalState:a,item:r,metadataItem:i,isAnonymousUser:l}=t,s=Zc(t,["addToWatchlistModalState","item","metadataItem","isAnonymousUser"]);const c=(0,o.wA)(),[m,d]=(0,b.Ss)(),u=(0,ge.A)(s),y=Ws(i),p=(0,Yt.A)(i.sourceURI),v=(0,Ul.E)(),f=(0,o.d4)(Ms.A),A=(0,n.useMemo)((()=>!r.availability.providerIdentifier||f.includes(r.availability.providerIdentifier)),[r.availability.providerIdentifier,f]),g=(0,kt.Ay)({width:em,height:em,server:m,provider:d,url:r.thumb}),E=uc(r),h=(0,n.useCallback)((()=>{c((0,ss.oo)({pathname:E,replace:!1}))}),[c,E]),I=(0,n.useCallback)((()=>{A?(!l&&lc(r.availability,i,p)&&a.onOpen(),y(r.availability)):v.onOpen()}),[A,l,r.availability,i,p,y,v,a]),P=mc(r),S=sc(r);return n.createElement("div",{ref:u.cellRef,style:u.style},n.createElement(rc,{href:A?E:void 0,primaryTitle:P,secondaryTitle:S,target:r.platform!==ic.yy?"_blank":void 0,thumb:n.createElement(jt.A,{className:Dc,height:em,src:g,width:em}),onPress:I}),r.availability.providerIdentifier?n.createElement(oc.A,{modalState:v,providerIdentifier:r.availability.providerIdentifier,onOptInFinished:h}):null)}const am=function(e){const t=e,{addToWatchlistModalState:a,item:r,metadataItem:i,isAnonymousUser:l}=t,o=Zc(t,["addToWatchlistModalState","item","metadataItem","isAnonymousUser"]);return cc(r)?n.createElement(zc,Yc(_c({},o),{item:r,metadataItem:i})):n.createElement(tm,Yc(_c({},o),{addToWatchlistModalState:a,isAnonymousUser:l,item:r,metadataItem:i}))};var nm=a(55212),rm=a(91894);const im=parseInt(ve.A.v4PrePlayAvailabilityThumbSize,10),lm=function(){const[e,t]=(0,b.Ss)(),a=(0,o.d4)((0,rm.A)(e.machineIdentifier)),r=(0,kt.Ay)({server:e,width:im,height:im,url:a,provider:t});return n.createElement(jt.A,{className:"PrePlayServerAvailabilityThumb-circle-NTjGL9",durationMilliseconds:0,height:im,src:r,width:im})};var om=Object.getOwnPropertySymbols,sm=Object.prototype.hasOwnProperty,cm=Object.prototype.propertyIsEnumerable;const mm=function(e){var t,a=e,{metadataItem:r}=a,i=((e,t)=>{var a={};for(var n in e)sm.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&om)for(var n of om(e))t.indexOf(n)<0&&cm.call(e,n)&&(a[n]=e[n]);return a})(a,["metadataItem"]);const l=(0,ge.A)(i),[o]=(0,b.Ss)(),s=(0,nt.A)(r,"key"),c=(0,nm.A)(o,null==(t=r.Media)?void 0:t[0]),m=(0,n.useMemo)((()=>{if(r.type===v.QD.Show)switch(r.childCount){case null:return;case 1:return(0,j.A)("{seasonCount} season",{seasonCount:r.childCount});default:return(0,j.A)("{seasonCount} seasons",{seasonCount:r.childCount})}if(c||r.editionTitle)return c&&r.editionTitle?`${c} • ${r.editionTitle}`:c||r.editionTitle}),[r,c]);return s?n.createElement("div",{ref:l.cellRef,style:l.style},n.createElement(rc,{href:s,primaryTitle:o.friendlyName,secondaryTitle:m,thumb:n.createElement(lm,null)})):null};var dm=a(27705),um=a(75443);function ym({metadataItem:e,modalState:t}){const[a,r]=(0,b.Ss)(),i=(0,o.wA)(),l=(0,o.d4)(vt.A),s=(0,um.A)(e,dm.PRE_PLAY),c=(0,n.useCallback)((()=>{i(Pn.A.actions.toggleWatchlistRequested({server:a,provider:r,stableUser:l,sourceURI:e.sourceURI,ratingKey:e.ratingKey,added:!0})),s(!0),t.onClose()}),[i,e.ratingKey,e.sourceURI,t,r,a,l,s]);return n.createElement(Ac.aF,{isOpen:t.isOpen,onOpenChange:t.onOpenChange},n.createElement(Ac.$m,{closeButtonAccessibilityLabel:(0,j.A)("Close"),size:"s",title:(0,j.A)("Add {title} To Your Watchlist?",{title:e.title}),onClose:t.onClose},n.createElement(Ac.cw,null,n.createElement(Ye.BJ,{gap:"m"},n.createElement(Ba.E,null,(0,j.A)("By adding a title to your Watchlist you can quickly access it anytime.")),n.createElement(Ba.E,null,(0,j.A)("You can also easily remove items from your Watchlist on the details page or via the context menu on the poster in content rows.")))),n.createElement(Ac.jl,null,n.createElement(Ac.Xd,null,n.createElement(_o.$n,{label:(0,j.A)("No thanks"),onPress:t.onClose}),n.createElement(_o.$n,{color:"accent",label:(0,j.A)("Add to Watchlist"),onPress:c})))))}var pm=a(66759),vm=a(40442),fm=a(88310);const Am={sectionTitle:"ProviderMetadataAvailabilitiesModal-sectionTitle-EB0bHL",availabilityContainer:"ProviderMetadataAvailabilitiesModal-availabilityContainer-iPr_4x",availabilityItemContent:"ProviderMetadataAvailabilitiesModal-availabilityItemContent-bdwXeu",platformThumb:"ProviderMetadataAvailabilitiesModal-platformThumb-KuaxL4",badge:"ProviderMetadataAvailabilitiesModal-badge-n2L9BS LiveBadge-badge-ak80zJ"};function bm({item:e,metadataItem:t}){var a,r;if(!cc(e))return n.createElement(Ye.BJ,{align:"right",shrink:!1},null==(a=sc(e))?void 0:a.map(((e,t)=>n.createElement(Ba.E,{key:t,font:"body-3"},e))));let i;if(!e.isPlayable||e.availabilities.length>1)i=n.createElement(Ba.E,{font:"body-3"},Mc(e,t));else{const t=e.availabilities[0],{beginsAt:a,endsAt:l}=null!=(r=(0,Jn.A)(t.Media))?r:{},o=Math.floor(Date.now()/1e3),s=a&&l&&o>=a&&o<l;i=n.createElement(n.Fragment,null,s?n.createElement(vc,{className:Am.badge}):null,n.createElement(Ba.E,{font:"body-3"},t.channelTitle),n.createElement(Ba.E,{font:"body-3"},(0,bc.A)({seasonIndex:t.parentIndex,episodeIndex:t.index,noLeadingZero:!0,separator:" · ",includeSpecials:!0})))}return n.createElement(Ye.BJ,{align:"right",gap:"xxs",shrink:!1},i)}function gm({modalState:e,metadataItem:t,availabilities:a}){const i=(0,o.wA)(),l=(0,Ul.E)(),s=(0,Ul.E)(),c=(0,Ul.E)(),m=Ws(t),d=(0,Yt.A)(t.sourceURI),u=(0,o.d4)(T.A),y=(0,o.d4)(Ms.A),[p,v]=(0,n.useState)(),A=(0,n.useMemo)((()=>{var e;const t=cc(p)?null==(e=null==p?void 0:p.availabilities[0])?void 0:e.playableKey:null==p?void 0:p.availability.playableKey;return t?(0,st.A)(t):{serverIdentifier:"",providerIdentifier:""}}),[p]),b=!!A.providerIdentifier.length&&y.includes(A.providerIdentifier),E=(0,o.d4)((0,g.A)(A.serverIdentifier)),h=(0,o.d4)((0,f.A)(A.serverIdentifier,A.providerIdentifier)),I=(0,n.useMemo)((()=>function(e){const t={title:"Available to Stream",items:[]},a={title:"Buy / Rent",items:[]};return e.forEach((e=>{cc(e)||e.availability.offerType===ic.cX.Free||e.availability.offerType===ic.cX.Subscription?t.items.push(e):a.items.push(e)})),[t,a]}(a)),[a]),P=(0,n.useMemo)((()=>{if(p)return uc(p)}),[p]),S=(0,n.useCallback)((()=>{var e;if(!p||!P)return;const t=cc(p)?null==(e=p.availabilities[0])?void 0:e.Media:p.availability.Media;(null==t?void 0:t.length)?i(Vl.gC({serverEntityID:E.entityID,providerEntityID:h.entityID,metricsPage:r.Xt,options:{type:Wl.G_,identifier:t[0].channelIdentifier}})):i((0,ss.oo)({pathname:P,replace:!1}))}),[i,p,h.entityID,E.entityID,P]),w=(0,n.useCallback)((()=>{s.onOpen()}),[s]);return(0,n.useEffect)((()=>{c.isOpen||v(void 0)}),[c.isOpen]),(0,n.useEffect)((()=>{var a;if(!p)return;let n;if(p.platform===ic.yy&&!b)return void c.onOpen();const o=uc(p),s=cc(p)?p.availabilities[0]:p;return m(s),p.platform===ic.yy?(null==(a=s.Media)?void 0:a.length)?i(Vl.gC({serverEntityID:E.entityID,providerEntityID:h.entityID,metricsPage:r.Xt,options:{type:Wl.G_,identifier:s.Media[0].channelIdentifier}})):i((0,ss.oo)({pathname:o})):n=window.setTimeout((()=>{e.onClose(),window.open(o,"_blank","noopener,noreferrer"),v(void 0),!u.anonymous&&lc(s,t,d)&&l.onOpen()}),0),()=>{n&&window.clearTimeout(n)}}),[p]),n.createElement(n.Fragment,null,p?null:n.createElement(Ac.aF,{isOpen:e.isOpen,onOpenChange:e.onOpenChange},n.createElement(Ac.$m,{closeButtonAccessibilityLabel:(0,j.A)("Close Availabilities modal"),title:t.title},n.createElement(Ac.$8,null,I.map((({title:e,items:a},r)=>a.length>0?n.createElement(n.Fragment,{key:r},n.createElement("div",{className:Am.sectionTitle},n.createElement(Ba.E,null,e)),a.filter((e=>!cc(e)||e.isPlayable)).map(((e,a)=>n.createElement("div",{key:a,className:Am.availabilityContainer},n.createElement(Ac.Ud,{item:e,onChooseItem:v},n.createElement("div",{className:Am.availabilityItemContent},n.createElement(Ye.BJ,{align:"space-between",orientation:"horizontal",verticalAlign:"center"},n.createElement(Ye.BJ,{key:a,gap:"s",grow:!0,orientation:"horizontal",verticalAlign:"center"},n.createElement(jt.A,{className:Am.platformThumb,height:50,src:e.thumb,width:50}),n.createElement(Ba.E,{color:"primary",numberOfLines:2},mc(e))),n.createElement(bm,{item:e,metadataItem:t})))))))):null))),n.createElement(Ac.jl,null,n.createElement(vm.M,{leftButton:n.createElement(_o.K0,{icon:pm.default,label:(0,j.A)("Choose your preferred services"),transparent:!0,onPress:w}),primaryButton:n.createElement(Ac.s_,null,n.createElement(_o.$n,{color:"accent",label:(0,j.A)("Done")}))})))),u.anonymous?null:n.createElement(ym,{metadataItem:t,modalState:l}),n.createElement(fm.A,{isOpen:s.isOpen,onClose:s.onClose}),A.providerIdentifier.length?n.createElement(oc.A,{modalState:c,providerIdentifier:A.providerIdentifier,onOptInFinished:S}):null)}var Em=a(13055),hm=a(26235),Im=a(77459);const Pm=parseInt(ve.A.v4PagePadding,10);function Sm(){return(0,Im.A)({columnWidth:parseInt(ve.A.v4PrePlayAvailabilityWidth,10),rowHeight:parseInt(ve.A.v4PrePlayAvailabilityHeight,10),innerHorizontalPadding:parseInt(ve.A.v4PrePlayAvailabilityGap,10),outerPaddingLeft:Pm,outerPaddingRight:Pm})}var wm=a(14200),Om=a(97741),Rm=a(68635);const Cm={hub:"PrePlayAvailabilityList-hub-lEPTuG VirtualHubScroller-hub-EpgwMo",hubHeader:"PrePlayAvailabilityList-hubHeader-Byc4ks VirtualHubScroller-hubHeader-vSW06t",placeholderCell:"PrePlayAvailabilityList-placeholderCell-Hy0NXK ListRowPlaceholder-placeholder-g75gnX",moreItemContainer:"PrePlayAvailabilityList-moreItemContainer-BAkOYq",zeroStateContainer:"PrePlayAvailabilityList-zeroStateContainer-JdTuhU",noSelectedServicesContainer:"PrePlayAvailabilityList-noSelectedServicesContainer-Yjn3ki",noSelectedServicesMoreItemContainer:"PrePlayAvailabilityList-noSelectedServicesMoreItemContainer-qBKfnd",noSelectedServicesTextContainer:"PrePlayAvailabilityList-noSelectedServicesTextContainer-k87pYu",iconPlaylist:"PrePlayAvailabilityList-iconPlaylist-xoEK8T",squareThumb:"PrePlayAvailabilityList-squareThumb-zhwrD2"};var Tm=Object.defineProperty,Mm=Object.defineProperties,Dm=Object.getOwnPropertyDescriptors,km=Object.getOwnPropertySymbols,xm=Object.prototype.hasOwnProperty,Lm=Object.prototype.propertyIsEnumerable,jm=(e,t,a)=>t in e?Tm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Nm=(e,t)=>{for(var a in t||(t={}))xm.call(t,a)&&jm(e,a,t[a]);if(km)for(var a of km(t))Lm.call(t,a)&&jm(e,a,t[a]);return e},Fm=(e,t)=>Mm(e,Dm(t)),Um=(e,t)=>{var a={};for(var n in e)xm.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&km)for(var n of km(e))t.indexOf(n)<0&&Lm.call(e,n)&&(a[n]=e[n]);return a};const Vm=6,Bm=3,Hm=Sm();function Wm(e){var t=e,{title:a,onPress:r}=t,i=Um(t,["title","onPress"]);const l=(0,ge.A)(i);return n.createElement("div",{ref:l.cellRef,style:l.style},n.createElement(zm,{title:a,onPress:r}))}function zm({className:e=Cm.moreItemContainer,title:t,onPress:a}){return n.createElement("div",{className:e},n.createElement(rc,{secondaryTitle:t,thumb:n.createElement("span",{className:Cm.iconPlaylist},n.createElement(Cs.default,{color:"inherit"})),onPress:a}))}function Km(e){var t=Um(e,[]);const a=(0,ge.A)(t),{cellIndex:r}=t;return n.createElement(Zt.A,{className:Cm.placeholderCell,index:r,style:a.style})}function qm({metadataItem:e}){const t=(0,o.wA)(),a=(0,Zl.A)(zl.v.IncludeAvailabilities),r=(0,Ul.E)(),i=(0,Ul.E)(),[s,c]=(0,b.Ss)(),m=(0,o.d4)((0,Sn.A)(Fa.OB,Fa.uc(c.identifier))),d=(0,o.d4)(T.A),{availabilities:u,isPending:y,isPopulated:p,error:v}=(0,o.d4)((0,Em.A)(m,e.sourceURI)),f=(0,o.d4)(Ms.A),{services:A,isPopulated:g,isPending:E,error:h}=(0,o.d4)((0,hm.A)(m)),I=(0,n.useMemo)((()=>{return u.providerAvailabilities.filter((e=>!(e.availability.includeIfPreferred&&!A.includes(e.platform)||e.platform!==ic.yy&&!a||e.platform===ic.yy&&e.availability.playableKey&&!f.includes((0,st.A)(e.availability.playableKey).providerIdentifier)&&!d.isFullUser))).sort((e=A,function(t,a){if(t.availability.Media&&a.availability.Media)return(0,wm.A)(t.availability.Media,a.availability.Media);if(t.availability.platform===ic.yy&&a.availability.platform===ic.yy){if(t.availability.Media)return 1;if(a.availability.Media)return-1}else{if(a.availability.platform===ic.yy)return 1;if(t.availability.platform===ic.yy)return-1}if(t.availability.platform===a.availability.platform){if((0,Om.A)(t.availability))return 1;if((0,Om.A)(a.availability))return-1}const n=e.includes(a.availability.platform)?-1:1,r=e.includes(t.availability.platform)?-1:1;return r<n?-1:r>n?1:0})).reduce(((e,t)=>{if(t.availability.Media){if(t.availability.Media[0].onAir){const a=e.find((e=>cc(e)&&e.isPlayable));a?a.availabilities.push(t.availability):e.push({type:ic.Am.Provider,title:t.title,platform:t.platform,thumb:t.thumb,availabilities:[t.availability],isPlayable:!0})}else if(t.availability.Media){const a=e.find((e=>cc(e)&&!e.isPlayable));a?a.availabilities.push(t.availability):e.push({type:ic.Am.Provider,title:t.title,platform:t.platform,thumb:t.thumb,availabilities:[t.availability],isPlayable:!1})}}else e.push(t);return e}),[]);var e}),[u.providerAvailabilities,A,a,f,d.isFullUser]),P=(0,n.useMemo)((()=>{const e=Fa.uc(c.identifier),t=e!==Fa.p8.Production?`-${e}`:"";return I.filter((e=>cc(e)||e.availability.Media?f.includes(`${Fa.px}${t}`):e.platform===ic.yy?f.includes(`${Fa.IU}${t}`):A.includes(e.platform)))}),[I,c.identifier,A,f]),S=(0,n.useMemo)((()=>(A.length?P:I).slice(0,Bm)),[I,P,A.length]),w=(0,n.useMemo)((()=>I.filter((e=>!S.includes(e)))),[I,S]),O=(0,n.useMemo)((()=>{const e=[...u.serverAvailabilities,...S];if(w.length){const t=w.length,a=1===t;((null==A?void 0:A.length)?a&&P.length===I.length:a)?e.push(I[Bm]):0===e.length?e.push({type:ic.Am.More,title:t>1?(0,j.A)("Available on {count} other services",{count:t}):(0,j.A)("Available on 1 other service")}):e.push({type:ic.Am.More,title:(0,j.A)("+ {count} more",{count:t})})}return e}),[I,u.serverAvailabilities,w.length,P.length,S,null==A?void 0:A.length]);(0,n.useEffect)((()=>{!m||!a||E||g||h||t(Rm.Ay.actions.preferredServicesFetchRequested({server:s,provider:m}))}),[t,E,g,h,m,s,a]),(0,n.useEffect)((()=>{!m||a&&!g||y||p||v||t(Rm.Ay.actions.metadataItemAvailabilitiesFetchRequested({server:s,provider:m,metadataItem:e}))}),[t,v,y,p,g,e,m,s,a]),(0,n.useEffect)((()=>()=>{m&&(null==e?void 0:e.sourceURI)&&t(Rm.Ay.actions.metadataItemAvailabilitiesReset({provider:m,sourceURI:e.sourceURI}))}),[]);const R=(0,n.useCallback)((()=>{r.onOpen()}),[r]),C=(0,n.useCallback)((t=>{if(!t.item)return n.createElement(Km,Nm({},t));if((a=t.item)&&a.type===ic.Am.More)return n.createElement(Wm,Fm(Nm({},t),{title:t.item.title,onPress:R}));var a;if(function(e){return!!e&&e.type===ic.Am.Server}(t.item)){const e=(0,st.A)(t.item.availability.source);return n.createElement(l.Ay,{column:t.cellIndex},n.createElement(b.Ay,{key:t.key,machineIdentifier:e.serverIdentifier,providerIdentifier:e.providerIdentifier},n.createElement(mm,Fm(Nm({},t),{metadataItem:t.item.availability}))))}return n.createElement(am,Fm(Nm({},t),{addToWatchlistModalState:i,isAnonymousUser:d.anonymous,item:t.item,metadataItem:e}))}),[i,e,R,d.anonymous]),M=(0,n.useMemo)((()=>y?new Array(Vm):O),[y,O]),D=(0,n.useMemo)((()=>(0,Ts.A)({items:M,title:s.isCloud?(0,j.A)("Watch from these locations"):(0,j.A)("More Ways to Watch"),type:se.A.Availability,context:`hub.${e.type}.moreWaysToWatch`})),[M,e.type,s.isCloud]);return!e.isUnreleased||p&&M.length?p&&!M.length?n.createElement("div",{className:Cm.hub},n.createElement("div",{className:Cm.hubHeader},n.createElement(Pe.A,null,D.title)),n.createElement("div",{className:Cm.zeroStateContainer},n.createElement(Ba.E,{color:"muted",font:"inherit"},(0,j.A)("There are no locations currently available for this title.")))):n.createElement(n.Fragment,null,1===M.length&&M[0].type===ic.Am.More?n.createElement("div",{className:Cm.hub},n.createElement("div",{className:Cm.hubHeader},n.createElement(Pe.A,null,D.title)),n.createElement("div",{className:Cm.noSelectedServicesContainer},n.createElement(zm,{className:Cm.noSelectedServicesMoreItemContainer,title:M[0].title,onPress:R}),n.createElement(Ye.BJ,{grow:!0,orientation:"horizontal",width:"100%"},n.createElement("div",{className:Cm.noSelectedServicesTextContainer},n.createElement(Ba.E,{color:"muted",font:"inherit"},(0,j.A)("This item is not available on any of your selected services")))))):n.createElement(l.Ay,{name:D.context},n.createElement(Li.A,{cellComponentFactory:C,className:Cm.hub,hub:D,items:M,layout:Hm,totalSize:M.length})),d.anonymous?null:n.createElement(ym,{metadataItem:e,modalState:i}),n.createElement(gm,{availabilities:w,metadataItem:e,modalState:r})):null}var Qm=a(31576),$m=a(41218),Gm=a(89582),Jm=a(961),Xm=a(27728),_m=a(89267);const Ym=(0,Mn.Mz)(_m.A,(e=>e.activity.staleReactions)),Zm=Ym;var ed=a(83348),td=a(48397),ad=a(83),nd=a(91529),rd=a(72005),id=a(58383),ld=a(27799);const od=`\n    query getRatingsAndReviewsHubData($metadataID: ID!, $skipUserState: Boolean = false) {\n  userReview: metadataReviewV2(\n    metadata: {id: $metadataID}\n    ignoreFutureMetadata: true\n  ) {\n    ... on ActivityRating {\n      ...ActivityRatingFragment\n    }\n    ... on ActivityWatchRating {\n      ...ActivityWatchRatingFragment\n    }\n    ... on ActivityReview {\n      ...ActivityReviewFragment\n    }\n    ... on ActivityWatchReview {\n      ...ActivityWatchReviewFragment\n    }\n  }\n  friendReviews: metadataReviewsV2(\n    metadata: {id: $metadataID}\n    type: FRIENDS\n    first: 25\n    after: null\n    last: null\n    before: null\n  ) {\n    nodes {\n      ... on ActivityRating {\n        ...ActivityRatingFragment\n      }\n      ... on ActivityReview {\n        ...ActivityReviewFragment\n      }\n      ... on ActivityWatchRating {\n        ...ActivityWatchRatingFragment\n      }\n      ... on ActivityWatchReview {\n        ...ActivityWatchReviewFragment\n      }\n    }\n  }\n  topReviews: metadataReviewsV2(\n    metadata: {id: $metadataID}\n    type: TOP\n    first: 25\n    after: null\n    last: null\n    before: null\n  ) {\n    nodes {\n      ... on ActivityRating {\n        ...ActivityRatingFragment\n      }\n      ... on ActivityReview {\n        ...ActivityReviewFragment\n      }\n      ... on ActivityWatchRating {\n        ...ActivityWatchRatingFragment\n      }\n      ... on ActivityWatchReview {\n        ...ActivityWatchReviewFragment\n      }\n    }\n  }\n}\n    ${is.f9}\n${is.MO}\n${Ps.RV}\n${Ps.sI}\n${is.Yf}\n${is.Mw}\n${is.hB}`,sd=ld.F.injectEndpoints({endpoints:e=>({getRatingsAndReviewsHubData:e.query({query:e=>({document:od,variables:e})})})}),{useGetRatingsAndReviewsHubDataQuery:cd,useLazyGetRatingsAndReviewsHubDataQuery:md}=sd;var dd=Object.defineProperty,ud=Object.defineProperties,yd=Object.getOwnPropertyDescriptors,pd=Object.getOwnPropertySymbols,vd=Object.prototype.hasOwnProperty,fd=Object.prototype.propertyIsEnumerable,Ad=(e,t,a)=>t in e?dd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,bd=(e,t)=>{for(var a in t||(t={}))vd.call(t,a)&&Ad(e,a,t[a]);if(pd)for(var a of pd(t))fd.call(t,a)&&Ad(e,a,t[a]);return e},gd=(e,t)=>ud(e,yd(t)),Ed=(e,t)=>{var a={};for(var n in e)vd.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&pd)for(var n of pd(e))t.indexOf(n)<0&&fd.call(e,n)&&(a[n]=e[n]);return a};function hd(e){return!!e&&("tag"in e||"tagKey"in e)}function Id({metadataItem:e}){var t,a,i,l,s;const[c,m]=(0,b.Ss)(),d=(0,ms.A)(),{Review:u}=e,y=(0,o.d4)(Zm),p=(0,n.useMemo)((()=>{var t;return null!=(t=(0,Qo.A)(e.guid))?t:""}),[e.guid]),{setting:v,isPending:f}=(0,nd.A)(),{data:A,isLoading:g,isSuccess:E,refetch:h}=cd({metadataID:p},{refetchOnMountOrArgChange:!0}),I=(0,n.useMemo)((()=>{var e,t,a,n;if(g||f)return new Array(25).fill(null);if(E){const r=[...null!=(t=null==(e=null==A?void 0:A.friendReviews)?void 0:e.nodes)?t:[]];(null==A?void 0:A.userReview)&&r.unshift(null==A?void 0:A.userReview);const i=[...null!=(n=null==(a=null==A?void 0:A.topReviews)?void 0:a.nodes)?n:[]],l=v!==Qm.Fg.Users?[...null!=u?u:[]]:[],o=function(e){const[t,a,n]=e,r=[],i=(e,...t)=>{for(const a of t){for(;r.length<e&&a.length>0;){const e=a.shift();e&&r.push(e)}if(r.length>=e)break}};return i(10,t),i(15,a),i(15,t),i(25,n),i(25,t,a),r.filter(Boolean)}([r,i,l]);return r.length+i.length+l.length>25?[...o,{tagKey:Jm.R}]:o}return null!=u?u:[]}),[u,f,g,E,v,null==(t=null==A?void 0:A.friendReviews)?void 0:t.nodes,null==(a=null==A?void 0:A.topReviews)?void 0:a.nodes,null==A?void 0:A.userReview]),P=(0,n.useMemo)((()=>(0,Ts.A)({items:I})),[I]),S=(0,n.useMemo)(Xm.A,[]),w=(0,n.useCallback)((()=>{d({action:cs.qY,page:r.Xt,pane:Gm.pc})}),[d]);(0,n.useEffect)((()=>{var e,t,a,n,r;const i=[null==(e=null==A?void 0:A.userReview)?void 0:e.id,...(null!=(a=null==(t=null==A?void 0:A.friendReviews)?void 0:t.nodes)?a:[]).map((e=>e.id)),...(null!=(r=null==(n=null==A?void 0:A.topReviews)?void 0:n.nodes)?r:[]).map((e=>e.id))];y.find((e=>i.includes(e)))&&h()}),[null==(i=null==A?void 0:A.userReview)?void 0:i.id,null==(l=null==A?void 0:A.friendReviews)?void 0:l.nodes,null==(s=null==A?void 0:A.topReviews)?void 0:s.nodes,y,h]);const O=(0,n.useCallback)((t=>t.item?hd(t.item)&&t.item.tagKey===Jm.R?n.createElement(Jm.A,gd(bd({},t),{href:(0,id.A)(c.machineIdentifier,m.identifier,{key:e.key}),onPress:w})):!hd(t.item)&&(0,rd.A)(t.item)?n.createElement(ad.A,gd(bd({},t),{item:t.item})):n.createElement(td.A,gd(bd({},t),{item:t.item})):n.createElement(Pd,bd({},t))),[e.key,w,m.identifier,c.machineIdentifier]);return n.createElement(ed.Ay,{onEditSuccess:h,onRemoveSuccess:h},n.createElement(Li.A,{cellComponentFactory:O,hub:P,hubTitleComponent:Sd,items:I,layout:S,totalSize:I.length}))}function Pd(e){var t=Ed(e,[]);const a=(0,ge.A)(t),{cellIndex:r}=t;return n.createElement(Zt.A,{index:r,style:bd({},a.style)})}function Sd(){const[e,t]=(0,b.Ss)(),a=(0,ms.A)(),i=(0,o.d4)(bo.A),l=(0,n.useCallback)((()=>{a({action:cs.qY,page:r.Xt,pane:Gm.pc})}),[a]),s=i?(0,id.A)(e.machineIdentifier,t.identifier,{key:i.key}):void 0;return n.createElement(Pe.A,{href:s,onPress:l},(0,j.A)("Ratings & Reviews"))}const wd=function({metadataItem:e}){const t=(0,hs.o)(cn.p6),{setting:a,isPending:r}=(0,nd.A)();return t&&(r||a===Qm.Fg.None)?null:t&&a!==Qm.Fg.Critics?n.createElement(Id,{metadataItem:e}):n.createElement($m.A,{metadataItem:e})};var Od=a(55507);function Rd({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,b.Ss)(),{audienceRating:r,contentRating:i,duration:l,originallyAvailableAt:o,rating:s,summary:c}=e,m=(0,nt.A)(e,"grandparentKey"),d=(0,nt.A)(e,"parentKey"),u=(0,xl.A)({useLongName:!0,episodeIndex:e.index,date:e.originallyAvailableAt,noLeadingZero:!0}),y=Bo(e),p=(0,Yt.A)(null==e?void 0:e.sourceURI),v=$a(e,"Director",2),f=$a(e,"Writer",2),A=(0,Wo.A)(e,p),g=(0,Od.A)(e),E=On(e),h=!!v||!!f,I=(0,Zl.A)(zl.v.IncludeDiscoverSource),P=(0,Ho.A)(e);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[d?n.createElement(at.N,{key:"parentTitle",color:"inherit",font:"inherit",href:d},e.parentTitle):e.parentTitle,u,A,g?n.createElement(Ba.E,{color:"accent",font:"inherit"},g):void 0],genres:[o?(0,Vo.A)(o):void 0,l?(0,V.A)(l):void 0,i?(0,B.A)(i):void 0],metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[s||r?n.createElement(H.A,{metadataItem:e}):null],showAttributionLogo:!0,socialProof:y?n.createElement(ws,{metadataItem:e}):null,starRating:n.createElement(os,{metadataItem:e}),subtitle:(0,ot.A)(e),summary:c,title:m?n.createElement(at.N,{color:"inherit",font:"inherit",href:m},e.grandparentTitle):e.grandparentTitle},h||E?n.createElement(Rs,null,h?n.createElement(et,null,v?n.createElement(U.nT,{key:"directorTags",label:(0,j.A)("Directed by")},v):null,f?n.createElement(U.nT,{key:"writerTags",label:(0,j.A)("Written by")},f):null):null,E):null),(0,zo.A)(e)?n.createElement(qm,{metadataItem:e}):null,n.createElement(No,{metadataItem:e}),n.createElement(wd,{metadataItem:e}),n.createElement(ja,{metadataItem:e}),a.isCloud||!I||P||e.Channel||!(0,Ko.A)(e.guid)?null:n.createElement(qm,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}var Cd=a(16712),Td=a(44018),Md=a(68800);function Dd({editionTitle:e}){return e?[n.createElement(Cd.E,{key:"editionTitleBadge",accessibilityLabel:(0,j.A)("Edition {editionTitle}",{editionTitle:e}),label:e})]:[]}function kd({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,b.Ss)(),{audienceRating:r,contentRating:i,isUnreleased:l,rating:o,summary:s,year:c}=e,m=(0,Od.A)(e),d=Bo(e),u=$a(e,"Genre"),y=$a(e,"Director",3),p=On(e),v=function(e){const t=(0,Yt.A)(e.sourceURI);return(null==t?void 0:t.playableUntil)&&(0,yn.A)(e,t)?n.createElement(Cd.E,{color:"accent",label:(0,Md.A)(t.playableUntil)}):null}(e),f=function(e){return(0,Yt.A)(e.sourceURI).purchased?n.createElement(Cd.E,{color:"accent",label:(0,j.A)("Purchased")}):null}(e),A=(0,Zl.A)(zl.v.IncludeDiscoverSource),g=(0,Ho.A)(e);return n.createElement(n.Fragment,null,n.createElement(le,{badges:Dd(e),buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isBuyRentVisible","isBuyVisible","isRentVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[m?n.createElement(Ba.E,{color:"accent",font:"inherit"},m):void 0,!l&&c?c:void 0,il(e),i?(0,B.A)(i):void 0,v,f],genres:u,metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[o||r?n.createElement(H.A,{key:"criticRating",metadataItem:e}):null],showAttributionLogo:!0,socialProof:d?n.createElement(ws,{metadataItem:e}):null,starRating:n.createElement(os,{metadataItem:e}),subtitle:y?n.createElement(Ba.E,{as:"div",color:"muted",font:"body-3"},n.createElement(Td.A,{message:(0,j.A)("Directed by {director}"),tags:[{unpaired:"director",children:y}]})):null,summary:s,title:(0,ot.A)(e)},p?n.createElement(Rs,null,p):null),(0,zo.A)(e)?n.createElement(qm,{metadataItem:e}):null,n.createElement(No,{metadataItem:e}),n.createElement(wd,{metadataItem:e}),n.createElement(qi,null),n.createElement(ja,{metadataItem:e}),a.isCloud||!A||g||e.Channel||!(0,Ko.A)(e.guid)?null:n.createElement(qm,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}var xd=a(78641),Ld=a(62277),jd=a(15494),Nd=a(55574),Fd=a(54499),Ud=a(13574),Vd=a(51721);function Bd(e,t){const a=e,n=t||Date.now(),r=(0,Vd.A)(n,a);if(1===r)return(0,j.A)("{ageInYears} year",{ageInYears:r});if(r>1)return(0,j.A)("{ageInYears} years",{ageInYears:r});const i=(0,Ud.A)(n,a);if(1===i)return(0,j.A)("{ageInMonths} month",{ageInMonths:i});if(i>1)return(0,j.A)("{ageInMonths} months",{ageInMonths:i});const l=(0,Fd.A)(n,a);return 1===l?(0,j.A)("{ageInDays} day",{ageInDays:l}):(0,j.A)("{ageInDays} days",{ageInDays:l})}var Hd=a(57802),Wd=a(43034),zd=a(72379),Kd=a(78880);const qd=(0,Mn.Mz)(ye.A,(e=>e.credits.groups.reduce(((e,t)=>(t.credits.forEach((t=>{(0,Kd.jH)(t)&&(e.find((e=>e.type===t.item.type&&e.ratingKey===t.item.ratingKey))||e.push(t.item))})),e)),[]).sort(((e,t)=>{let a=e.year||0,n=t.year||0;return!a&&e.originallyAvailableAt&&(a=(0,zd.A)(new Date(e.originallyAvailableAt))),!n&&t.originallyAvailableAt&&(n=(0,zd.A)(new Date(t.originallyAvailableAt))),n-a}))));function Qd(){const e=(0,o.wA)(),{credits:{isPopulated:t,error:a},creditSources:{sourcesByGUID:r,isPending:i,isPopulated:l,error:s}}=(0,o.d4)(ye.A),c=(0,o.d4)(qd),m=(0,n.useMemo)((()=>c.map(Wd.A).filter((e=>!(e in r)))),[c,r]);return(0,n.useEffect)((()=>{!m.length||!t||a||i||l||s||e(Da.A.actions.creditSourcesFetchRequested({guids:m}))}),[s,a,e,m,i,l,t]),t&&l?c.filter((e=>(0,Wd.A)(e)in r)):[]}var $d=a(41731),Gd=Object.defineProperty,Jd=Object.defineProperties,Xd=Object.getOwnPropertyDescriptors,_d=Object.getOwnPropertySymbols,Yd=Object.prototype.hasOwnProperty,Zd=Object.prototype.propertyIsEnumerable,eu=(e,t,a)=>t in e?Gd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,tu=(e,t)=>{for(var a in t||(t={}))Yd.call(t,a)&&eu(e,a,t[a]);if(_d)for(var a of _d(t))Zd.call(t,a)&&eu(e,a,t[a]);return e},au=(e,t)=>Jd(e,Xd(t)),nu=(e,t)=>{var a={};for(var n in e)Yd.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&_d)for(var n of _d(e))t.indexOf(n)<0&&Zd.call(e,n)&&(a[n]=e[n]);return a};const ru=6;function iu(e){var t=nu(e,[]);const a=(0,ge.A)(t),{cellIndex:r}=t,i=(0,n.useMemo)((()=>(0,Mt.A)({width:t.cellWidth,aspectRatio:Tt.Yc})),[t.cellWidth]);return n.createElement(Zt.A,{index:r,style:tu(tu({},a.style),i)})}function lu({metadataItem:e,onScrollPositionReady:t}){const[a,r]=(0,b.Ss)(),i=(0,o.wA)(),{credits:{isPending:l,isPopulated:s,error:c},creditSources:{sourcesByGUID:m,isPending:d,isPopulated:u,error:y}}=(0,o.d4)(ye.A),p=(0,o.d4)(Zn.A),v=Qd(),f=(0,n.useMemo)((()=>l||d?new Array(ru):v.reduce(((t,a)=>{const n=(0,Wd.A)(a),r=(n?m[n]:null)||[],i=(0,$d.A)(e,r);return i.length&&t.push(i),t}),[])),[v,d,l,e,m]);(0,n.useEffect)((()=>{l||s||c||i(Da.A.actions.creditsFetchRequested({server:a,provider:r,metadataKey:e.key}))}),[c,i,l,s,e.key,r,a]),(0,n.useEffect)((()=>{(u||y)&&t()}),[y,u,t]);const A=(0,n.useCallback)((e=>{var t=e,{item:a}=t,r=nu(t,["item"]);return a?n.createElement(_n.A,au(tu({},r),{item:a[0]})):n.createElement(iu,tu({},r))}),[]),g=(0,n.useMemo)((()=>(0,Ts.A)({items:f,title:(0,j.A)("Movies & Shows in Media Libraries")})),[f]),E=(0,n.useMemo)((()=>(0,xi.A)({columnWidth:p,listType:se.A.Mixed})),[p]);return c||y||s&&u&&0===v.length?null:n.createElement(k.Ay,{containerProvider:r,containerServer:a,containerSourceURI:e.sourceURI,containerType:se.A.Mixed,listStyle:se.T.CreditSource},n.createElement(Li.A,{cellComponentFactory:A,hub:g,items:f,layout:E,totalSize:f.length}))}var ou=a(50014),su=a.n(ou);function cu(e,t){return t.filter((t=>(null==t?void 0:t.tagKey)===e.ratingKey||t.tag===e.title))}var mu=a(82405),du=a(29264);const uu={placeholderCell:"PrePlayPersonMediaLibrariesHub-placeholderCell-QgGwce ListRowPlaceholder-placeholder-g75gnX"};var yu=Object.defineProperty,pu=Object.defineProperties,vu=Object.getOwnPropertyDescriptors,fu=Object.getOwnPropertySymbols,Au=Object.prototype.hasOwnProperty,bu=Object.prototype.propertyIsEnumerable,gu=(e,t,a)=>t in e?yu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Eu=(e,t)=>{for(var a in t||(t={}))Au.call(t,a)&&gu(e,a,t[a]);if(fu)for(var a of fu(t))bu.call(t,a)&&gu(e,a,t[a]);return e},hu=(e,t)=>pu(e,vu(t)),Iu=(e,t)=>{var a={};for(var n in e)Au.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&fu)for(var n of fu(e))t.indexOf(n)<0&&bu.call(e,n)&&(a[n]=e[n]);return a};const Pu=6,Su=Sm();function wu(e){var t=e,{person:a,item:r}=t,i=Iu(t,["person","item"]);const[l,o]=(0,b.Ss)(),s=(0,ge.A)(i),c=(0,n.useMemo)((()=>{const e=cu(a,(null==r?void 0:r.tags)||[]);return(0,du.A)(l,o,e,String(null==r?void 0:r.librarySectionID))}),[null==r?void 0:r.librarySectionID,null==r?void 0:r.tags,a,o,l]);return n.createElement("div",{ref:s.cellRef,style:s.style},n.createElement(rc,{href:c,primaryTitle:l.friendlyName,secondaryTitle:null==r?void 0:r.librarySectionTitle,thumb:n.createElement(lm,null)}))}function Ou(e){var t=Iu(e,[]);const a=(0,ge.A)(t),{cellIndex:r}=t;return n.createElement(Zt.A,{className:uu.placeholderCell,index:r,style:a.style})}function Ru({metadataItem:e,onScrollPositionReady:t}){const[a,r]=(0,b.Ss)(),i=Qd(),{credits:{isPending:l,isPopulated:s,error:c},creditSources:{sourcesByGUID:m,isPending:d,isPopulated:u,error:y}}=(0,o.d4)(ye.A),p=(0,o.d4)(mu.A),v=(0,n.useMemo)((()=>l||d?new Array(Pu):i.map(Wd.A).flatMap((e=>m[e])).filter(Boolean).reduce(((t,a)=>{const n=(0,st.A)(a.source),r=function(e,t){return cu(e,[...t.Director||[],...t.Producer||[],...t.Role||[],...t.Writer||[]])}(e,a);if(!(a.librarySectionID&&a.librarySectionTitle&&n.isServer&&r.length))return t;const i=t.find((e=>e.librarySectionID===a.librarySectionID&&e.source===a.source));return i?i.tags=su()([...i.tags,...r],"filter"):t.push({source:a.source,librarySectionID:a.librarySectionID,librarySectionTitle:a.librarySectionTitle,tags:r}),t}),[]).sort(function(e){return(t,a)=>{var n;const r=e.find((e=>e.machineIdentifier===(0,st.A)(t.source).serverIdentifier)),i=e.find((e=>e.machineIdentifier===(0,st.A)(a.source).serverIdentifier));return r&&i?r.isFullOwnedServer&&!i.isFullOwnedServer?-1:!r.isFullOwnedServer&&i.isFullOwnedServer?1:r.friendlyName===i.friendlyName?null==(n=t.librarySectionTitle)?void 0:n.localeCompare(a.librarySectionTitle||""):r.friendlyName.localeCompare(i.friendlyName):0}}(p))),[i,d,l,e,p,m]);(0,n.useEffect)((()=>{(u||y)&&t()}),[y,u,t]);const f=(0,n.useCallback)((t=>{var a=t,{item:r}=a,i=Iu(a,["item"]);if(!r)return n.createElement(Ou,Eu({},i));const l=(0,st.A)(r.source);return n.createElement(b.Ay,{key:i.key,machineIdentifier:l.serverIdentifier,providerIdentifier:l.providerIdentifier},n.createElement(wu,hu(Eu({},i),{item:r,person:e})))}),[e]),A=(0,n.useMemo)((()=>(0,Ts.A)({items:v,title:(0,j.A)("Media Libraries")})),[v]);return c||y||s&&u&&0===i.length?null:n.createElement(k.Ay,{containerProvider:r,containerServer:a,containerSourceURI:e.sourceURI,containerType:se.A.Mixed,listStyle:se.T.CreditSource},n.createElement(Li.A,{cellComponentFactory:f,hub:A,items:v,layout:Su,totalSize:v.length}))}var Cu=a(3986),Tu=a(78966),Mu=a(20761),Du=a(54433),ku=a(69331);const xu={container:"PersonCredits-container-t2aTHW",year:"PersonCredits-year-OKLD9R",link:"PersonCredits-link-goFy2o Link-link-vSsQW1"};function Lu({metadataItem:e}){const t=(0,o.wA)(),[a,r]=(0,b.Ss)(),i=(0,Ul.E)(),l=(0,o.d4)(ku.A),s=(0,o.d4)(Ms.A),{creditSources:{sourcesByGUID:c}}=(0,o.d4)(ye.A),m=s.includes(Fa.IU),d=c[(0,Wd.A)(e)],u=(null==d?void 0:d.length)?(0,st.A)(d[0].source):null,y=(0,o.d4)((0,g.A)((null==u?void 0:u.serverIdentifier)||""));let p=null,v=null;if(null==d?void 0:d.length)p=(0,j.A)("On {sourceName}",{sourceName:y.friendlyName}),d.length>1&&(p+=" +"+(d.length-1)),v=(0,dc.A)(a.machineIdentifier,r.identifier,{key:e.key});else if(e.playableKey){const t=(0,st.A)(e.playableKey);p=(0,j.A)("On Plex"),v=(0,dc.A)(Mu.Q,Fa.IU,{key:t.key})}const f=(0,n.useCallback)((()=>{v&&t((0,ss.oo)({pathname:v,replace:!1}))}),[t,v]);return p&&v&&((null==d?void 0:d.length)||m||!l)?n.createElement(Ye.BJ,{shrink:!1},(null==d?void 0:d.length)||!e.playableKey||m?n.createElement(at.N,{color:"accent",font:"body-2",href:v},p):n.createElement(_o.QW,{color:"accent",font:"body-2",onPress:i.onOpen},p),n.createElement(oc.A,{modalState:i,providerIdentifier:Fa.IU,onOptInFinished:f})):null}function ju({metadataItem:e,role:t,type:a}){return n.createElement(Ye.BJ,{gap:"m",orientation:"horizontal",verticalAlign:"top"},n.createElement(Ba.E,{color:"muted",font:"body-2",shrink:!1},n.createElement(Du.A,{className:xu.year,metadataItem:e})),n.createElement(Ba.E,{color:"muted",font:"body-2"},n.createElement(gt.A,{className:xu.link,metadataItem:e}),t?n.createElement(n.Fragment,null,n.createElement(ht.A,{separator:"•"}),a===v.Tq.Actor||a===v.Tq.Appeared?(0,j.A)("as {role}",{role:t}):t):null),n.createElement(Lu,{metadataItem:e}))}function Nu({metadataItem:e}){const[t,a]=(0,b.Ss)(),{key:r}=e,i=(0,o.wA)(),l=(0,o.d4)(ku.A),{credits:{groups:s,isPopulated:c,error:m}}=(0,o.d4)(ye.A);return Qd(),(0,n.useEffect)((()=>{l||c||m||!t||!a||i(Da.A.actions.creditsFetchRequested({server:t,provider:a,metadataKey:r}))}),[m,i,c,l,r,a,t]),l||m||0===s.length?null:n.createElement("div",{className:xu.container},n.createElement(Ye.BJ,{gap:"l"},n.createElement(Pe.A,null,(0,j.A)("Filmography")),c?n.createElement(Tu.tU,{defaultValue:s[0].type},n.createElement(Tu.j7,{align:"left",tabStyle:"primary"},s.map((({type:e,title:t,credits:a})=>n.createElement(Tu.KM,{key:e,value:e},`${t} (${a.length})`)))),s.map((({type:e,credits:t})=>n.createElement(Tu.av,{key:e,value:e},n.createElement(Ye.BJ,{gap:"s"},t.map((t=>(0,Kd.jH)(t)?n.createElement(ju,{key:t.item.key,metadataItem:t.item,role:t.role,type:e}):null))))))):n.createElement(Ye.BJ,{align:"center",height:(0,Is.A)("xxxl"),orientation:"horizontal",verticalAlign:"center"},n.createElement(Cu.y,null))))}var Fu=a(91390);function Uu(e){const{bornAt:t,diedAt:a}=e;if(!t)return null;const n=a?void 0:Bd(t,Date.now()),r=(0,Vo.A)(t);return n?`${r} (${n})`:r}function Vu(e){const{bornAt:t,diedAt:a}=e;if(!a)return null;const n=t?Bd(t,a):void 0,r=(0,Vo.A)(a);return n?`${r} (${n})`:r}function Bu(e){switch(e){case v.bs.Facebook:return xd.default;case v.bs.Instagram:return Ld.default;case v.bs.Twitter:return jd.default}}function Hu({metadataItem:e,onScrollPositionReady:t}){const{summary:a,bornAt:r,diedAt:i,External:l,CreditType:o}=e,s=(0,Fu.A)(),c=null==o?void 0:o.slice(0,2).map((({title:e})=>e)).join(", ");return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(Ye.BJ,{align:["center","left"],gap:"m",orientation:"horizontal",wrap:!1},null==l?void 0:l.map((e=>n.createElement(Nd.m,{key:`${e.source}${e.id}`,tooltip:n.createElement(Ye.BJ,{align:"center"},n.createElement(Ba.E,{color:"primary",font:"body-2"},e.sourceTitle),n.createElement(Ba.E,{color:"muted",font:"body-2"},"@",e.id))},n.createElement(_o.AR,{accessibilityLabel:e.sourceTitle,href:e.url,icon:Bu(e.source),rel:"noopener noreferrer nofollow",size:"s",target:"_blank"}))))),facts:r?[(0,j.A)("Born"),Uu(e)]:void 0,genres:i?[(0,j.A)("Died"),Vu(e)]:void 0,metadataItem:e,poster:n.createElement(Hd.A,{metadataItem:e,width:s}),subtitle:c,summary:a,title:(0,ot.A)(e)}),n.createElement(lu,{metadataItem:e,onScrollPositionReady:t}),n.createElement(Ru,{metadataItem:e,onScrollPositionReady:t}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}),n.createElement(Nu,{metadataItem:e}))}function Wu({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,b.Ss)(),{audienceRating:r,rating:i,summary:l}=e,o=Bo(e),s=(0,Od.A)(e),c=On(e),m=(0,Zl.A)(zl.v.IncludeDiscoverSource),d=(0,Ho.A)(e);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[s?n.createElement(Ba.E,{color:"accent",font:"inherit"},s):void 0],metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[i||r?n.createElement(H.A,{metadataItem:e}):null],showAttributionLogo:!0,socialProof:o?n.createElement(ws,{metadataItem:e}):null,starRating:n.createElement(os,{metadataItem:e}),subtitle:(0,ot.A)(e),summary:l,title:n.createElement(rt,{metadataItem:e})},c),(0,zo.A)(e)?n.createElement(qm,{metadataItem:e}):null,n.createElement(No,{metadataItem:e}),n.createElement(wd,{metadataItem:e}),n.createElement(ki,{metadataItem:e}),!a.isCloud&&m&&!d&&(0,Ko.A)(e.guid)?n.createElement(qm,{metadataItem:e}):null,n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}function zu({metadataItem:e,onScrollPositionReady:t}){const[a]=(0,b.Ss)(),{audienceRating:r,contentRating:i,isUnreleased:l,rating:o,summary:s,year:c}=e,m=Bo(e),d=(0,Od.A)(e),u=$a(e,"Genre"),y=(0,Zl.A)(zl.v.IncludeDiscoverSource),p=(0,Ho.A)(e);return n.createElement(n.Fragment,null,n.createElement(le,{buttonBar:n.createElement(tt.A,{isChromaMetadata:!0,metadataItem:e,promotedActions:["isPlayVisible","isAddToWatchlistVisible","isRemoveFromWatchlistVisible","isPlayTrailerVisible","isMarkPlayedVisible","isMarkUnplayedVisible","isSyncDownloadVisible","isEditVisible","isShareVisible"]}),facts:[d?n.createElement(Ba.E,{color:"accent",font:"inherit"},d):void 0,!l&&c?c:void 0],genres:u,metadataItem:e,poster:n.createElement(lt.A,{isChromaMetadata:!0,metadataItem:e}),ratings:[i?(0,B.A)(i):void 0,o||r?n.createElement(H.A,{key:"criticRating",metadataItem:e}):null],showAttributionLogo:!0,socialProof:m?n.createElement(ws,{metadataItem:e}):null,starRating:n.createElement(os,{metadataItem:e}),summary:s,title:(0,ot.A)(e)}),(0,zo.A)(e)?n.createElement(qm,{metadataItem:e}):null,n.createElement(ki,{metadataItem:e}),n.createElement(No,{metadataItem:e}),n.createElement(wd,{metadataItem:e}),n.createElement(qi,null),a.isCloud||!y||p||e.Channel||!(0,Ko.A)(e.guid)?null:n.createElement(qm,{metadataItem:e}),n.createElement(Va,{metadataItem:e,onScrollPositionReady:t}))}const Ku=(0,n.memo)((function({metadataItem:e,onScrollPositionReady:t}){const a=function(e){const{type:t,subtype:a}=e;if((0,N.A)(e))switch(t){case v.QD.Movie:return Fo;case v.QD.Show:return Uo;case v.QD.Episode:return mo}if(a===v.i9.Clip&&t===v.QD.Movie)return ll;switch(t){case v.QD.Movie:return kd;case v.QD.Show:return zu;case v.QD.Season:return Wu;case v.QD.Episode:return Rd;case v.QD.Artist:case v.QD.Author:return rl;case v.QD.Album:case v.QD.Audiobook:return Rn;case v.QD.Collection:return kl;case v.QD.Person:return Hu}}(e);return a?n.createElement(a,{metadataItem:e,onScrollPositionReady:t}):n.createElement(F.A,{description:(0,j.A)("Pardon our dust. This item is lacking a details page."),title:(0,j.A)("Missing details")})})),qu={prePlayContentWrapper:"PrePlayPageContent-prePlayContentWrapper-Zi1xEP"};var Qu=Object.defineProperty,$u=Object.getOwnPropertySymbols,Gu=Object.prototype.hasOwnProperty,Ju=Object.prototype.propertyIsEnumerable,Xu=(e,t,a)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,_u=(e,t)=>{for(var a in t||(t={}))Gu.call(t,a)&&Xu(e,a,t[a]);if($u)for(var a of $u(t))Ju.call(t,a)&&Xu(e,a,t[a]);return e};function Yu({metadataItem:e}){const[t,a]=(0,b.Ss)(),[r,{height:i}]=(0,D.A)(),[l,{width:o,height:s}]=(0,D.A)(),[c,m]=(0,n.useState)({scrollTop:0,scrollLeft:0}),[d,u]=(0,n.useState)(),y=(0,n.useCallback)((e=>{m(e)}),[]),p=(0,n.useCallback)((e=>{u(e)}),[]),{scrollRestoreProps:v,onScrollPositionReady:f}=(0,L.A)({key:"PrePlayPageContent",onScrollPositionChange:y});return(0,n.useEffect)((()=>{null!=d&&u(void 0)}),[d]),n.createElement(k.Ay,{containerProvider:a,containerServer:t,containerSourceURI:e.sourceURI,containerSubtype:e.subtype,containerType:e.type},n.createElement(x.A,_u(_u({ref:r,skipScrollRestore:!0},v),d),n.createElement("div",{ref:l,className:qu.prePlayContentWrapper},n.createElement(Q,{contentHeight:s,height:i,scrollLeft:c.scrollLeft,scrollTop:c.scrollTop,width:o,onRequestScrollPosition:p},n.createElement(Ku,{metadataItem:e,onScrollPositionReady:f})))))}var Zu=a(25364),ey=a(35456),ty=a(26340);function ay({machineIdentifier:e,providerIdentifier:t,metadataKey:a}){const r=(0,o.wA)(),l=(0,s.W6)(),D=(0,i.A)(),k=(0,m.A)(D.wl),x=(0,o.d4)(T.A),L=(0,o.d4)((0,g.A)(e)),j=(0,o.d4)((0,f.A)(e,t)),{metadata:{metadataItem:N,error:F,isPopulated:U}}=(0,o.d4)(ye.A),V=(0,ue.A)(),B=N?(0,A.A)({provider:j,librarySectionID:N.librarySectionID,isPlaylist:N.isPlaylist}):void 0,H=(0,ty.A)(L,j,a),W=(0,o.d4)((0,C.A)("playThemeMusic")),z=(0,o.d4)(c.A),K=a===(null==N?void 0:N.key)&&(!V||V.isPopulated),q=!(!F&&!(null==V?void 0:V.error));return(0,ey.A)(e,t),(0,E.A)({identifier:j.metricsIdentifier,type:null==N?void 0:N.type,metadataItem:(0,h.A)(N)},U),(0,n.useEffect)((()=>{x.anonymous&&k&&l.push(d.A.join(As.A.login,{redirectUrl:window.location.hash.replace("#!","")}))}),[l,x.anonymous,k]),(0,n.useEffect)((()=>{if(!N||!W)return;const e=N.grandparentTheme||N.parentTheme||N.theme;r((0,y.pk)({serverEntityID:L.entityID,providerEntityID:j.entityID,theme:e}))}),[r,N,W,j.entityID,L.entityID]),(0,n.useEffect)((()=>{N&&z&&r((0,u.iZ)({server:L,provider:j,metadataItem:N,metadataItemState:H,legacyAction:(0,p.g$)()}))}),[r,z,N,H,j,L]),L.isCloud&&(null==N?void 0:N.isAdult)&&(null==N?void 0:N.type)!==v.QD.Person?n.createElement(I.A,null,n.createElement(S.A,null)):n.createElement(b.Ay,{contentDirectoryID:null==B?void 0:B.id,machineIdentifier:e,providerIdentifier:t},n.createElement(I.A,{scrollDirection:O.D.None},n.createElement(Zu.A,null),N&&K?n.createElement(M.A,{metadataItem:N,skipFetch:!1},n.createElement(Yu,{metadataItem:N})):null,N&&K||!q?null:n.createElement(w.A,null),N&&K||q?null:n.createElement(P.A,null,n.createElement(R.A,null))))}var ny=a(4627),ry=a(57122),iy=a(54863),ly=a(4370),oy=Object.defineProperty,sy=Object.defineProperties,cy=Object.getOwnPropertyDescriptors,my=Object.getOwnPropertySymbols,dy=Object.prototype.hasOwnProperty,uy=Object.prototype.propertyIsEnumerable,yy=(e,t,a)=>t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,py=(e,t)=>{for(var a in t||(t={}))dy.call(t,a)&&yy(e,a,t[a]);if(my)for(var a of my(t))uy.call(t,a)&&yy(e,a,t[a]);return e},vy=(e,t)=>sy(e,cy(t));function fy({page:e=ay}){const{machineIdentifier:t,providerIdentifier:a}=(0,ny.A)(),o=(0,i.A)(),s=(0,ry.A)(o.key);return n.createElement(iy.A,{machineIdentifier:t,providerIdentifier:a},s?n.createElement(l.Ay,{metricsContextParam:(0,ry.A)(o.context),metricsPage:r.Xt},n.createElement(e,vy(py({},o),{machineIdentifier:t,metadataKey:s,providerIdentifier:a}))):n.createElement(ly.A,null))}}}]);