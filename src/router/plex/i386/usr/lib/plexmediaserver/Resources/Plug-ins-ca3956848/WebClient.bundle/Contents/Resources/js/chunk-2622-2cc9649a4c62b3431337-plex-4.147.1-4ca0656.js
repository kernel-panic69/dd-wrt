(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[2622,6520,6556,8083,2642,6686],{73820:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$r});var i=r(96540),n=r(84593),s=r(75960),o=r(20163),a=r(74332),l=r(94772),c=r(32649),u=r(71468),d=r(74612),p=r(27705),m=r(29943),y=r(59753),h=r(93915),f=r(22701),v=r(43280),A=r(46144),P=r(40317),E=r(43597),g=r(20020),I=r(12166),w=r(78726),b=r(43522),D=r(46579),S=r(8150),O=r(75284),M=r(40715),C=r(94689),T=r(44244),L=r(54979),x=r(80370),k=r(34465),j=r(4370),R=r(1081),N=r(24461),H=r(33152),z=r(59514),K=r(36836),_=r(1250),U=r(12639),V=r(30712),B=r(60049),F=r(46772),Z=r(98920),Q=r(90817),G=r(64804),W=r(69182),q=r(49184),Y=r(81863),$=r(79555),X=r(44874),J=r(69475),ee=r(64472),te=r(82528),re=r(31437),ie=r(71981),ne=Object.defineProperty,se=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,le=(e,t,r)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ce=function(e){const t=e,{serverEntityID:r,providerEntityID:n,pivot:s,sourceDirectory:o,directoryKey:a,showSecondHeader:l,children:c}=t,u=((e,t)=>{var r={};for(var i in e)oe.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&se)for(var i of se(e))t.indexOf(i)<0&&ae.call(e,i)&&(r[i]=e[i]);return r})(t,["serverEntityID","providerEntityID","pivot","sourceDirectory","directoryKey","showSecondHeader","children"]);return i.createElement(re.A,((e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&le(e,r,t[r]);if(se)for(var r of se(t))ae.call(t,r)&&le(e,r,t[r]);return e})({className:ie.A.page},u),i.createElement($.A,null,i.createElement(ee.A,{providerEntityID:n,serverEntityID:r,sourceDirectory:o}),s?i.createElement(J.A,{directoryKey:a,providerEntityID:n,serverEntityID:r,sourceDirectory:o}):null,i.createElement(X.A,null)),l?i.createElement(Y.A,null):null,i.createElement(te.A,null,c))};var ue=r(92838),de=r(51208),pe=r(74125),me=r.n(pe),ye=r(42111);function he({items:e,gap:t=0,existingItems:r=[]}){const i=me().sortBy(r,"position"),n=me().sortBy(e,"position");let s=-1/0;return n.forEach((e=>{const n=me().sortedIndex(r,e,"position"),o=r[n-1],a=r[n],l=e.position>s+t,c=!o||e.position>o.position+t,u=!a||e.position<a.position-t;l&&c&&u&&(i.push(e),s=e.position)})),me().sortBy(i,"position")}const fe="minor",ve="major",Ae={container:"TickMarks-container-frZO0i",ticks:"TickMarks-ticks-qo5YPE",tick:"TickMarks-tick-A3yNkp",minor:"TickMarks-minor-ChSTCs TickMarks-tick-A3yNkp",major:"TickMarks-major-4a9f2K TickMarks-tick-A3yNkp",label:"TickMarks-label-PYLVQK"};var Pe,Ee=Object.defineProperty;function ge(e){const{ticks:t,pixelProportion:r,majorTickGap:i,minorTickGap:n}=e,s=me().where(t,{type:ve}),o=me().where(t,{type:fe}),a=he({items:s,gap:r*i});return he({items:o,existingItems:a,gap:r*n})}class Ie extends i.Component{constructor(e,t){super(e,t),this.state={ticks:ge(e)}}UNSAFE_componentWillReceiveProps(e){const{ticks:t,pixelProportion:r,majorTickGap:i,minorTickGap:n}=e,s=this.props.ticks!==t,o=this.props.pixelProportion!==r,a=this.props.majorTickGap!==i,l=this.props.minorTickGap!==n;(s||o||a||l)&&this.setState({ticks:ge(e)})}render(){return i.createElement("div",{className:Ae.container},i.createElement("div",{className:Ae.ticks},this.state.ticks.map((({type:e,position:t,label:r})=>i.createElement("div",{key:t,className:Ae[e],style:{top:100*t+"%"}},r&&"major"===e?i.createElement("div",{className:Ae.label},r):null)))))}}((e,t,r)=>{t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(Ie,"symbol"!=typeof(Pe="defaultProps")?Pe+"":Pe,{majorTickGap:20,minorTickGap:5});const we=Ie;var be=r(16986),De=r(84074),Se=r(38176),Oe=r(79806),Me=r(55936),Ce=r(86596),Te=r(61469),Le=r(32485),xe=r.n(Le),ke=r(12433),je=r(70687),Re=r(84652),Ne=r(29730),He=r(71441),ze=r(18428),Ke=r(19514);const _e=function(e){const t=(0,Ke.A)(e);return i.createElement("div",{style:t.style},e.children)};var Ue=Object.defineProperty,Ve=(e,t,r)=>(((e,t,r)=>{t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Be extends i.Component{constructor(e,t){super(e,t),Ve(this,"onSelectPress",(()=>{const{isSelected:e,items:t,onSelectItems:r,onDeselectItems:i}=this.props;e?i(t):r(t)})),this.state={layout:this._createLayout(e),cellRenderer:this._createCellRenderer(e)}}UNSAFE_componentWillReceiveProps(e){const t=e.aspectRatios!==this.props.aspectRatios,r=e.columns!==this.props.columns,i=e.viewportWidth!==this.props.viewportWidth,n=e.viewportHeight!==this.props.viewportHeight,s=e.serverEntityID!==this.props.serverEntityID,o=e.providerEntityID!==this.props.providerEntityID,a=e.metadataListEntityID!==this.props.metadataListEntityID,l=t||r||n||i,c=s||o||a;if(l||c){const t={};l&&(t.layout=this._createLayout(e)),c&&(t.cellRenderer=this._createCellRenderer(e)),this.setState(t)}}_createLayout(e){const t=(0,He.A)({aspectRatios:e.aspectRatios,columns:e.columns});return(0,Ne.A)({columns:e.columns,rows:t,maximumHeight:e.cellHeight-(e.footerHeight+e.headerHeight)})}_createCellRenderer(e){const{serverEntityID:t,providerEntityID:r,metadataListEntityID:i,containerKey:n,listType:s}=e;return(0,ze.A)({serverEntityID:t,providerEntityID:r,metadataListEntityID:i,containerKey:n,listType:s},Re.A)}render(){const{cellIndex:e,cellX:t,cellY:r,cellWidth:n,cellHeight:s,isVirtual:o,title:a,items:l,size:c,viewportHeight:u,scrollTop:d,isSelected:p,hasSelection:m}=this.props,{layout:y,cellRenderer:h}=this.state;return i.createElement(_e,{cellHeight:s,cellIndex:e,cellWidth:n,cellX:t,cellY:r,isVirtual:o},i.createElement("div",{className:xe()(m&&"MetadataMomentCell-hasSelection-pp54EB","MetadataMomentCell-header-oKQGsr")},i.createElement("div",{className:"MetadataMomentCell-actions-L_WAU3"},i.createElement(je.A,{className:"MetadataMomentCell-selectButton-sHo8jO SelectButton-selectButton-_goGWp",isSelected:p,title:a,onPress:this.onSelectPress})),i.createElement("div",{className:"MetadataMomentCell-title-spuo5n"},a)),i.createElement(ke.A,{cellRenderer:h,items:l,keyPropName:"metadataItemEntityID",layout:y,scrollTop:d-r,size:c,viewportHeight:u,viewportWidth:n}))}}Ve(Be,"defaultProps",{headerHeight:0,footerHeight:0});const Fe=Be;function Ze(){return(0,R.Mz)(((e,{start:t})=>t),((e,{end:t})=>t),(0,be.A)(),((e,t,r)=>{const{populatedRange:i,metadataItems:n}=r;return e<i.start||t>i.end?me().times(t-e,(()=>null)):n.slice(e-i.start,t-i.start)}))}function Qe(){return(0,R.Mz)(Ze(),De.A,((e,t)=>e.map((e=>t[e]))))}const Ge=(0,u.Ng)((function(){return(0,R.Mz)((0,be.A)(),Ze(),(0,R.Mz)(((e,{avgAR:t})=>t),Qe(),((e,t)=>t.map((t=>t?(0,Oe.A)(t,e):e)))),(0,R.Mz)(Qe(),Ce.A,((e,t)=>e.every((e=>e&&(0,Te.A)(t,e.ratingKey))))),B.A,((e,t,r,i,n)=>({containerKey:e.containerKey,listType:"photo",aspectRatios:r,items:t,isSelected:i,hasSelection:n.activeSelectionItems.length>0})))}),(function(e,t){return{onSelectItems(t){e((0,Me.as)({type:Se.vo,ids:t}))},onDeselectItems(t){e((0,Me.Tf)({ids:t}))}}}))(Fe);var We=r(48127),qe=r(93949),Ye=Object.defineProperty,$e=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var tt=Object.defineProperty,rt=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,st=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class ot extends i.Component{constructor(e,t){super(e,t),this.state={layout:this._createLayout(e)}}UNSAFE_componentWillReceiveProps(e){const t=e.items!==this.props.items,r=e.columns!==this.props.columns;(t||r)&&this.setState({layout:this._createLayout(e)})}_createLayout(e){return function(e){const t=e,{columns:r=1,areas:i=[],innerPaddingTop:n=0,innerPaddingBottom:s=0}=t,o=((e,t)=>{var r={};for(var i in e)Xe.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&$e)for(var i of $e(e))t.indexOf(i)<0&&Je.call(e,i)&&(r[i]=e[i]);return r})(t,["columns","areas","innerPaddingTop","innerPaddingBottom"]);return(0,qe.A)(((e,t)=>{for(var r in t||(t={}))Xe.call(t,r)&&et(e,r,t[r]);if($e)for(var r of $e(t))Je.call(t,r)&&et(e,r,t[r]);return e})({getCellHeights:function(e){return i.map((t=>function(e,t){return Math.max(1,Math.round(e/r))*t+(n+s)}(t,e/r)))}},o))}({columns:e.columns,areas:e.items.map((e=>e.area)),innerPaddingTop:e.headerHeight,innerPaddingBottom:e.footerHeight,outerPaddingTop:e.listPadding,outerPaddingRight:e.listPadding-e.listGutter,outerPaddingBottom:e.listPadding,outerPaddingLeft:e.listPadding})}render(){const{serverEntityID:e,providerEntityID:t,metadataListEntityID:r,columns:n,headerHeight:s,footerHeight:o,cellComponent:a}=this.props;return i.createElement(We.A,((e,t)=>{for(var r in t||(t={}))it.call(t,r)&&st(e,r,t[r]);if(rt)for(var r of rt(t))nt.call(t,r)&&st(e,r,t[r]);return e})({cellRenderer:(0,ze.A)({serverEntityID:e,providerEntityID:t,metadataListEntityID:r,columns:n,headerHeight:s,footerHeight:o},a),layout:this.state.layout},this.props))}}const at=ot;var lt=Object.defineProperty,ct=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,pt=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const mt={dispatchPopulateMetadataListRange:Me.v,dispatchDeselectAllMetadataListItems:Me.s9,dispatchResetMetadataList:Me.Dj};class yt extends i.Component{constructor(){super(...arguments),((e,t,r)=>{pt(this,t+"",r)})(0,"onPageRequest",(({startIndex:e,endIndex:t})=>{const{metadataListEntityID:r,disableReloadThreshold:i,items:n,dispatchPopulateMetadataListRange:s}=this.props;s({metadataListEntityID:r,disableReloadThreshold:i,startIndex:n[e].start,endIndex:n[t].end-1,pages:1})}))}componentWillUnmount(){const{metadataListEntityID:e}=this.props;this.props.dispatchDeselectAllMetadataListItems({metadataListEntityID:e}),this.props.dispatchResetMetadataList({metadataListEntityID:e})}render(){const e=this.props,{dispatchPopulateMetadataListRange:t,dispatchDeselectAllMetadataListItems:r,dispatchResetMetadataList:n}=e,s=((e,t)=>{var r={};for(var i in e)ut.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&ct)for(var i of ct(e))t.indexOf(i)<0&&dt.call(e,i)&&(r[i]=e[i]);return r})(e,["dispatchPopulateMetadataListRange","dispatchDeselectAllMetadataListItems","dispatchResetMetadataList"]);return i.createElement(at,((e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&pt(e,r,t[r]);if(ct)for(var r of ct(t))dt.call(t,r)&&pt(e,r,t[r]);return e})({onPageRequest:this.onPageRequest},s))}}const ht=(0,u.Ng)((function(){return(0,R.Mz)(B.A,(e=>({disableReloadThreshold:!!e.activeSelectionType})))}),mt)(yt);var ft=r(60137),vt=r(84230);var At=Object.defineProperty,Pt=(e,t,r)=>(((e,t,r)=>{t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const Et=Math.max(0,parseInt(vt.A.timelineGutter,10)-40);class gt extends i.Component{constructor(e,t){super(e,t),Pt(this,"_landmarks"),Pt(this,"onListUpdate",(e=>{const t=e.landmarks,r=e.listStyle&&e.listStyle.height;if(t!==this._landmarks){this._landmarks=t;const e=function(e,t){const r={},i={};return e.reduce(((e,{index:n,position:s})=>{const o=(0,ft.A)(1e3*t[n],"yyyy MM"),a=o.slice(0,4);return r[a]?i[o]||(i[o]=!0,e.push({position:s,type:fe})):(r[a]=!0,i[o]=!0,e.push({position:s,type:ve,label:a})),e}),[])}(t,me().pluck(this.props.moments,"startsAt"));this.setState({ticks:e,listHeight:r})}})),this.state={ticks:null,listHeight:null}}render(){const{serverEntityID:e,providerEntityID:t,metadataListEntityID:r,moments:n,columns:s,height:o,onMomentScrollIndexChange:a}=this.props,{ticks:l,listHeight:c}=this.state,u=1/o,d=c&&c>o;return n.length?i.createElement("div",{className:"TimelinePageContent-container-mvQDHr"},i.createElement(ht,{cellComponent:Ge,className:"TimelinePageContent-stack-vNqxhP PageContent-pageContent-rk0p0C",columns:s,footerHeight:59,hasNestedList:!0,items:n,keyPropName:"id",listGutter:Et,listPadding:55,metadataListEntityID:r,providerEntityID:t,scrollPositionStorageKey:"TimelinePageContent",scrollerClassName:"TimelinePageContent-scroller-Kg90e8",serverEntityID:e,size:n.length,onListScrollIndexChange:a,onListUpdate:this.onListUpdate}),i.createElement("div",{className:"TimelinePageContent-adornment-QvGJVk"},l&&d?i.createElement(we,{pixelProportion:u,ticks:l}):null)):i.createElement(te.A,null,i.createElement(ue.A,{iconComponent:ye.A.photo,title:(0,F.A)("There are no events in this library")}))}}const It=gt;var wt=r(26622),bt=r(57956),Dt=r(45091),St=r(69457),Ot=r(54514),Mt=r(54620),Ct=r(34171),Tt=r(72688),Lt=r(94396),xt=r(26109),kt=r(99383),jt=r(35787);const Rt={showPlayAll:Ht,showShuffle:function({server:e,provider:t,stableUser:r,metadataList:i}){return Ht({server:e,provider:t,stableUser:r,metadataList:i})&&!!t.features.playqueue},showQueue:function({server:e,provider:t,stableUser:r,metadataList:i}){return Ht({server:e,provider:t,stableUser:r,metadataList:i})},showAddToPlaylist:function({server:e,provider:t,stableUser:r,metadataList:i}){return!(!e.isFullServer||!i.isFirstItemLibraryItem)},showOptimize:function({server:e,provider:t,stableUser:r,metadataList:i}){return!!(e.isFullOwnedServer&&e.transcoderVideo&&i.isFirstItemLibraryItem)}},Nt={mixed:[],movie:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],show:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],season:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],episode:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],artist:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],album:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],track:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],photoalbum:["showPlayAll","showShuffle","showAddToPlaylist"],photo:["showPlayAll","showShuffle","showAddToPlaylist"],clip:["showPlayAll","showShuffle","showAddToPlaylist","showOptimize"],genre:[]};function Ht({server:e,provider:t,metadataList:r}){return(0,jt.A)(e,t,r)}var zt=r(43783),Kt=r(21267),_t=r(57053),Ut=r(60710),Vt=r(31585),Bt=r(39315),Ft=Object.defineProperty,Zt=(e,t,r)=>(((e,t,r)=>{t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Qt extends i.Component{constructor(e,t){super(e,t),Zt(this,"onAddToPlaylistPress",(()=>{this.setState({isAddToPlaylistModalOpen:!0})})),Zt(this,"onAddToPlaylistClose",(()=>{this.setState({isAddToPlaylistModalOpen:!1}),this.props.onMenuClose()})),this.state={isAddToPlaylistModalOpen:!1}}createOnPress(e){return()=>{e(),this.props.onMenuClose()}}render(){const e=this.props,{isAddToPlaylistModalOpen:t}=this.state;return i.createElement("div",null,e.showPlayAll?i.createElement(Vt.A,{onPress:this.createOnPress(e.onPlayAllPress)},(0,F.A)("Play All")):null,e.showShuffle?i.createElement(Vt.A,{onPress:this.createOnPress(e.onShufflePress)},(0,F.A)("Shuffle")):null,e.showQueue?i.createElement(Vt.A,{onPress:this.createOnPress(e.onPlayNextPress)},(0,F.A)("Play Next")):null,e.showQueue?i.createElement(Vt.A,{onPress:this.createOnPress(e.onAddToQueuePress)},(0,F.A)("Add to Queue")):null,e.showAddToPlaylist?i.createElement(Vt.A,{onPress:this.createOnPress(this.onAddToPlaylistPress)},(0,F.A)("Add to Playlist...")):null,e.showOptimize?i.createElement(Vt.A,{onPress:this.createOnPress(e.onOptimizePress)},(0,F.A)("Optimize...")):null,e.showAddToPlaylist?i.createElement(Bt.A,{isOpen:t,metadataListEntityID:e.metadataListEntityID,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,onModalClose:this.onAddToPlaylistClose}):null)}}const Gt=Qt;var Wt=Object.defineProperty,qt=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,Xt=(e,t,r)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Jt=function(e){const t=e,{target:r,isOpen:n}=t,s=((e,t)=>{var r={};for(var i in e)Yt.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&qt)for(var i of qt(e))t.indexOf(i)<0&&$t.call(e,i)&&(r[i]=e[i]);return r})(t,["target","isOpen"]);return i.createElement(Ut.A,{isOpen:e.isOpen,target:e.target,onMenuClose:e.onMenuClose},i.createElement(Gt,((e,t)=>{for(var r in t||(t={}))Yt.call(t,r)&&Xt(e,r,t[r]);if(qt)for(var r of qt(t))$t.call(t,r)&&Xt(e,r,t[r]);return e})({},s)))};var er=r(86535),tr=r(47428),rr=r(90461),ir=r(88006),nr=r(78702),sr=r(77737),or=Object.defineProperty,ar=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,dr=Object.prototype.propertyIsEnumerable,pr=(e,t,r)=>t in e?or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mr=(e,t,r)=>(pr(e,"symbol"!=typeof t?t+"":t,r),r);class yr extends i.Component{constructor(e,t){super(e,t),mr(this,"_moreButtonID"),mr(this,"onPlayShortcut",(()=>{this.props.showPlayAll&&this.props.onPlayAllPress()})),mr(this,"onAddToPlaylistPress",(()=>{this.setState({isAddToPlaylistModalOpen:!0,isSmartPlaylist:!1})})),mr(this,"onAddToSmartPlaylistPress",(()=>{this.setState({isAddToPlaylistModalOpen:!0,isSmartPlaylist:!0})})),mr(this,"onAddToPlaylistClose",(()=>{this.setState({isAddToPlaylistModalOpen:!1})})),mr(this,"onActionsPress",(e=>{this.setState({isActionsMenuOpen:!this.state.isActionsMenuOpen})})),mr(this,"onActionsMenuClose",(()=>{this.setState({isActionsMenuOpen:!1})})),this.state={isActionsMenuOpen:!1,isAddToPlaylistModalOpen:!1,isSmartPlaylist:!1},this._moreButtonID=(0,_t.A)()}componentDidMount(){Kt.A.on("shortcut:playSelected",this.onPlayShortcut)}componentWillUnmount(){Kt.A.off("shortcut:playSelected",this.onPlayShortcut)}render(){const{className:e,serverEntityID:t,providerEntityID:r,metadataListEntityID:n,customFilterRoute:s,showPlayAll:o,showPlayAllOverflow:a,showShuffle:l,showShuffleOverflow:c,showAddToPlaylist:u,showAddToPlaylistOverflow:d,showAddToSmartPlaylist:p,showOverflow:m,onPlayAllPress:y,onShufflePress:h}=this.props,{isActionsMenuOpen:f,isAddToPlaylistModalOpen:v,isSmartPlaylist:A}=this.state;return i.createElement("div",{className:e},o?i.createElement(nr.A,{playLabel:(0,F.A)("Play All"),onPress:y}):null,l?i.createElement(sr.A,{onPress:h}):null,u?i.createElement(rr.A,{customFilterRoute:s,metadataListEntityID:n,providerEntityID:r,serverEntityID:t,showAddToSmartPlaylist:p,onAddToPlaylistPress:this.onAddToPlaylistPress,onAddToSmartPlaylistPress:this.onAddToSmartPlaylistPress}):null,m?i.createElement(ir.A,{iconComponent:tr.A,id:this._moreButtonID,isMenuOpen:f,label:(0,F.A)("More..."),onPress:this.onActionsPress}):null,i.createElement(Jt,(P=((e,t)=>{for(var r in t||(t={}))ur.call(t,r)&&pr(e,r,t[r]);if(cr)for(var r of cr(t))dr.call(t,r)&&pr(e,r,t[r]);return e})({},this.props),E={isOpen:f,showAddToPlaylist:d,showPlayAll:a,showShuffle:c,target:this._moreButtonID,onMenuClose:this.onActionsMenuClose},ar(P,lr(E)))),u?i.createElement(Bt.A,{isOpen:v,metadataListEntityID:n,providerEntityID:r,serverEntityID:t,smart:A,onModalClose:this.onAddToPlaylistClose}):null);var P,E}}const hr=(0,er.Ay)(yr,["showPlayAll","showShuffle","showAddToPlaylist"],["showOptimize","showQueue"]);var fr=Object.defineProperty,vr=Object.defineProperties,Ar=Object.getOwnPropertyDescriptors,Pr=Object.getOwnPropertySymbols,Er=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,Ir=(e,t,r)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wr=(e,t)=>{for(var r in t||(t={}))Er.call(t,r)&&Ir(e,r,t[r]);if(Pr)for(var r of Pr(t))gr.call(t,r)&&Ir(e,r,t[r]);return e},br=(e,t)=>vr(e,Ar(t));const Dr=(0,xt.A)((function(){return(0,R.Mz)(((e,{listType:t})=>t),K.A,Tt.A,Lt.A,(0,be.A)(),((e,t,r,i,n)=>function({server:e,provider:t,stableUser:r,metadataList:i,listType:n}){const s=n||i.firstItemType||"mixed",o=Nt[s];return o?o.reduce(((n,o)=>{const a=Rt[o];return(0,kt.A)(me().isFunction(a),`getMetadataListActionProps: Invalid action, ${o}, for ${s}`),n[o]=!!(e&&t&&i)&&a({server:e,provider:t,stableUser:r,metadataList:i}),n}),{}):{}}({server:t,provider:r,stableUser:i,metadataList:n,listType:e})))}),(function(e,t){const r={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataListEntityID:t.metadataListEntityID,listType:t.listType,metricsPage:t.metricsPage,metricsProperties:{context:t.metricsContext||p.LIST}};return{onPlayAllPress(){e(Ct.CZ(r))},onShufflePress(){e(Ct.hI(r))},onPlayNextPress(){e(Ct.b3(br(wr({},r),{options:{playAll:!0,next:!0}})))},onAddToQueuePress(){e(Ct.b3(br(wr({},r),{options:{playAll:!0,next:!1}})))},onOptimizePress(){e(Me.xB(r))}}}),zt.A)(hr);var Sr=r(57195);const Or=(0,u.Ng)((function(){return(0,R.Mz)((0,be.A)(),(e=>({totalSize:e.totalSize,listType:wt.vo,listStyle:Sr.MOSAIC,allListStyles:[Sr.MOSAIC]})))}))((function(e){const{serverEntityID:t,providerEntityID:r,metadataListEntityID:n,sourceDirectory:s,title:o,totalSize:a,listType:l,listStyle:c,allListStyles:u}=e;return i.createElement(i.Fragment,null,i.createElement($.A,null,i.createElement(ee.A,{providerEntityID:r,serverEntityID:t,sourceDirectory:s}),i.createElement(J.A,{directoryKey:G.l8.TIMELINE,providerEntityID:r,serverEntityID:t,sourceDirectory:s}),i.createElement(X.A,null,i.createElement(Mt.A,{allListStyles:u,selectedListStyle:c}))),i.createElement(Y.A,null,i.createElement(Ot.A,null,i.createElement(Dt.A,null,o),i.createElement(bt.A,null,a)),i.createElement(St.A,null,i.createElement(Dr,{listType:l,metadataListEntityID:n,providerEntityID:r,serverEntityID:t}))))}));var Mr=r(32346);var Cr=Object.defineProperty,Tr=Object.defineProperties,Lr=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Rr=(e,t,r)=>t in e?Cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Nr=(e,t)=>{for(var r in t||(t={}))kr.call(t,r)&&Rr(e,r,t[r]);if(xr)for(var r of xr(t))jr.call(t,r)&&Rr(e,r,t[r]);return e},Hr=(e,t,r)=>(Rr(e,"symbol"!=typeof t?t+"":t,r),r);class zr extends i.Component{constructor(e,t){super(e,t),Hr(this,"onMeasure",(({width:e,height:t})=>{this.setState({isMeasured:!0,width:e,height:t})})),Hr(this,"onMomentScrollIndexChange",(e=>{this.setState({currentMomentTitle:this.props.moments[e].title})})),this.state={isMeasured:!1,currentMomentTitle:"",width:0,height:0}}componentWillUnmount(){this.props.onCloseTimelinePage()}render(){const{serverEntityID:e,providerEntityID:t,providerMetricsIdentifier:r,metadataListEntityID:s,sourceDirectory:o,pivot:a,isMomentListPending:l,isMomentListPopulated:c,moments:u,activeSelectionType:d,columnAdjustment:p}=this.props,{isMeasured:m,width:y,height:h,currentMomentTitle:f}=this.state,v=200-100*p,A=12+p,P=Math.min(Math.ceil(y/v),A);if(c)return i.createElement(q.A,{metricsPage:n.Nn,metricsProperties:{identifier:r,mode:"timeline",type:"photo",style:Sr.MOSAIC},scrollDirection:Q.x3},d?i.createElement(Mr.A,{providerEntityID:t,serverEntityID:e}):i.createElement(Or,{metadataListEntityID:s,providerEntityID:t,serverEntityID:e,sourceDirectory:o,title:f}),i.createElement(Z.A,{className:"TimelinePage-measured-KwtybV",ignorePosition:!0,onMeasure:this.onMeasure},m?i.createElement(It,{columns:P,height:h,metadataListEntityID:s,moments:u,providerEntityID:t,serverEntityID:e,onMomentScrollIndexChange:this.onMomentScrollIndexChange}):null));const E={serverEntityID:e,providerEntityID:t,sourceDirectory:o,pivot:a,directoryKey:G.l8.TIMELINE,scrollDirection:Q.x3};if(l)return i.createElement(ce,(g=Nr({},E),Tr(g,Lr({showSecondHeader:!0}))),i.createElement(ue.A,null,i.createElement(W.A,null)));var g;const I={title:(0,F.A)("There was an error loading the timeline for this library")};return i.createElement(ce,Nr({},E),i.createElement(de.A,Nr({},I)))}}const Kr=zr,_r=(0,R.Mz)((e=>e.ui.timelinePage.momentList),(e=>{if(!e)return[];let t=0;return e.moments.map((e=>{const r=t;t+=e.size;const{id:i,title:n,size:s,avgAR:o,startsAt:a}=e,l=e.size*(e.avgAR||1);return{start:r,end:t,area:l,id:i,title:n,size:s,avgAR:o,startsAt:a}}))})),Ur=(0,U.A)(Kr,(function(e){const t=e.ui.timelinePage;return{serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,momentKey:t.momentKey}}),(function(e,t){e(V.$2({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,libraryKey:t.libraryKey,momentKey:t.momentKey})),e(V.GN())})),Vr=(0,u.Ng)((function(){return(0,R.Mz)(((e,{libraryKey:t})=>t),(e=>e.ui.timelinePage),_r,K.A,(0,z.A)(),(0,N.A)(),(0,R.Mz)(((e,{directoryKey:t})=>t),(0,N.A)(),((e,t)=>(0,H.A)(t,e))),B.A,_.A,((e,t,r,i,n,s,o,a,l)=>{const{containerKey:c,isMomentListPending:u,isMomentListPopulated:d}=t;return{metadataListEntityID:t.metadataList,providerMetricsIdentifier:n.metricsIdentifier,sourceDirectory:s,pivot:o,moments:r,isMomentListPending:u,isMomentListPopulated:d,containerKey:c,momentKey:h.A.join(e,"cluster?clusterZoomLevel=1"),activeSelectionType:a.activeSelectionType,disableReloadThreshold:!!a.activeSelectionType,columnAdjustment:l.columnAdjustment,serverVersion:i.version}}))}),(function(e){return{onCloseTimelinePage(){e(V.V3({}))}}}))(Ur);function Br({pivotType:e,directorySourceURI:t,directoryKey:r,selectedPivot:n}){const[s,o,l]=(0,P.Ss)(),m=(0,u.d4)(d.A);if(function(e,t){return e===f.Q2&&t}(null==n?void 0:n.requires,m))return i.createElement(S.A,null);switch(e){case a.ZN.Hub:return i.createElement(c.Ay,{name:null==n?void 0:n.context},i.createElement(b.A,{sourceURI:t}));case a.ZN.List:return i.createElement(c.Ay,{name:null==n?void 0:n.context},i.createElement(D.A,{directoryKey:r,directorySourceURI:t,selectedPivot:n}));case a.ZN.View:switch(null==n?void 0:n.key){case a.Sx.SharedItems:return i.createElement(c.Ay,{name:null==n?void 0:n.context},i.createElement(D.A,{directoryKey:r,directorySourceURI:t,listStyle:v.T.SharedItems,selectedPivot:n}));case a.Sx.Timeline:{const e=(0,A.A)(o,a.Mm.Content);return i.createElement(Vr,{directoryKey:a.Sx.Timeline,libraryKey:h.A.join([null==e?void 0:e.key,null==l?void 0:l.id,"cluster"],{clusterZoomLevel:1}),providerEntityID:o.entityID,serverEntityID:s.entityID,sourceDirectoryID:null==l?void 0:l.id})}case a.Sx.DiscoverProfile:return i.createElement(c.Ay,{metricsContextParam:p.SELF},i.createElement(k.A,{showHeader:!1}));case a.Sx.DiscoverFriends:return i.createElement(c.Ay,{metricsContextParam:p.FRIEND},i.createElement(x.A,{showHeader:!1}));case a.Sx.DiscoverActivity:return i.createElement(c.Ay,{metricsContextParam:p.DISCOVER},i.createElement(w.A,null));case a.Sx.DiscoverPeople:return i.createElement(c.Ay,{metricsContextParam:p.DISCOVER},i.createElement(L.A,null))}}return i.createElement(j.A,null)}const Fr=[a.Sx.Guide,a.Sx.RecordingSchedule,a.Sx.Timeline];function Zr({className:e,directoryKey:t,pageType:r,machineIdentifier:n,providerIdentifier:s,contentDirectoryID:o,pivotID:l}){const c=(0,u.wA)(),d=(0,C.A)({machineIdentifier:n,providerIdentifier:s,contentDirectoryID:o,pageType:r,pivotID:l,directoryKey:t}),p=d?d.type:null!=r?r:a.ZN.List,h=(0,T.A)(d),f=function(e,t){return(null==e?void 0:e.key)===a.Sx.SharedItems?null!=t?t:(0,T.A)(e):t}(d,t),v=null!=h?h:t,A=v?(0,m.A)({serverIdentifier:n,providerIdentifier:s,key:v}):void 0;return(0,i.useEffect)((()=>()=>{(0,y.Cc)((()=>{c(M.A.actions.resetMeta())}))}),[c]),A?i.createElement(P.Ay,{contentDirectoryID:o,machineIdentifier:n,providerIdentifier:s,selectedPivot:d},i.createElement(E.A,{className:e,scrollDirection:I.D.None},d&&p===a.ZN.View&&Fr.includes(d.key)?null:i.createElement(O.A,{selectedPivot:d,sourceURI:A}),i.createElement(Br,{directoryKey:f,directorySourceURI:A,pivotType:p,selectedPivot:d}))):i.createElement(E.A,{className:e},i.createElement(g.A,null))}var Qr=r(4627),Gr=r(58686),Wr=r(57122),qr=r(54863);function Yr(e,t){switch(e.source){case o.yZ:switch(null==t?void 0:t.id){case s.YY:return n.Ry;case s.AD:return n.yz;case s._q:return n.Cn;default:return n.OB}case o.Ou:return(null==t?void 0:t.id)===s.MM?n.yO:n.Ou;default:return n.u2}}function $r(){const e=(0,l.A)(),t=e.key?(0,Wr.A)(e.key):void 0,{machineIdentifier:r,providerIdentifier:n}=(0,Qr.A)(),s=(0,C.A)({machineIdentifier:r,providerIdentifier:n,contentDirectoryID:e.source?(0,Wr.A)(e.source):void 0,pivotID:e.pivot?(0,Wr.A)(e.pivot):void 0,pageType:void 0,directoryKey:void 0}),o=e.pageType?(0,Wr.A)(e.pageType):void 0,u=(0,Gr.ie)(a.ZN).find((e=>e===o));return i.createElement(c.Ay,{metricsContextParam:(0,Wr.A)(e.context),metricsPage:Yr(e,s)},i.createElement(qr.A,{machineIdentifier:r,providerIdentifier:n},t||(0,Wr.A)(e.source)?i.createElement(Zr,{contentDirectoryID:(0,Wr.A)(e.source),directoryKey:t,machineIdentifier:r,pageType:u,pivotID:(0,Wr.A)(e.pivot),providerIdentifier:n}):i.createElement(j.A,null)))}},30115:e=>{var t="undefined"!=typeof Element,r="function"==typeof Map,i="function"==typeof Set,n="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(!s(e[l],o[l]))return!1;return!0}if(r&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!s(l.value[1],o.get(l.value[0])))return!1;return!0}if(i&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=a;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!s(e[c[l]],o[c[l]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return s(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},626:(e,t,r)=>{"use strict";r.d(t,{E:()=>u});var i=r(96540),n=r(36281),s=r(30115),o=r.n(s),a=function(e){return e.reduce((function(e,t){var r=t[0],i=t[1];return e[r]=i,e}),{})},l="undefined"!=typeof window&&window.document&&window.document.createElement?i.useLayoutEffect:i.useEffect,c=[],u=function(e,t,r){void 0===r&&(r={});var s=i.useRef(null),u={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||c},d=i.useState({styles:{popper:{position:u.strategy,left:"0",top:"0"}},attributes:{}}),p=d[0],m=d[1],y=i.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,r=Object.keys(t.elements);m({styles:a(r.map((function(e){return[e,t.styles[e]||{}]}))),attributes:a(r.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),h=i.useMemo((function(){var e={onFirstUpdate:u.onFirstUpdate,placement:u.placement,strategy:u.strategy,modifiers:[].concat(u.modifiers,[y,{name:"applyStyles",enabled:!1}])};return o()(s.current,e)?s.current||e:(s.current=e,e)}),[u.onFirstUpdate,u.placement,u.strategy,u.modifiers,y]),f=i.useRef();return l((function(){f.current&&f.current.setOptions(h)}),[h]),l((function(){if(null!=e&&null!=t){var i=(r.createPopper||n.n4)(e,t,h);return f.current=i,function(){i.destroy(),f.current=null}}}),[e,t,r.createPopper]),{state:f.current?f.current.state:null,styles:p.styles,attributes:p.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}}},46520:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(34164),n=r(96540),s=r(3099),o=r(53231);const a=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:l},c){return n.createElement("svg",{ref:c,"aria-hidden":!t,"aria-label":t,className:(0,i.A)((0,o.C)({align:e,color:r}),(0,s.Fj)({height:(0,s._u)(a,(e=>e))})),"data-testid":l,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M9 6H12V42H9V6Z",fill:"currentColor"}),n.createElement("path",{clipRule:"evenodd",d:"M27 6H21C20.2044 6 19.4413 6.31607 18.8787 6.87868C18.3161 7.44129 18 8.20435 18 9V39C18 39.7957 18.3161 40.5587 18.8787 41.1213C19.4413 41.6839 20.2044 42 21 42H27C27.7956 42 28.5587 41.6839 29.1213 41.1213C29.6839 40.5587 30 39.7957 30 39V9C30 8.20435 29.6839 7.44129 29.1213 6.87868C28.5587 6.31607 27.7956 6 27 6ZM27 9V39H21V9H27Z",fill:"currentColor",fillRule:"evenodd"}),n.createElement("path",{d:"M39 6H36V42H39V6Z",fill:"currentColor"}))}))},66556:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(34164),n=r(96540),s=r(3099),o=r(53231);const a=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:l},c){return n.createElement("svg",{ref:c,"aria-hidden":!t,"aria-label":t,className:(0,i.A)((0,o.C)({align:e,color:r}),(0,s.Fj)({height:(0,s._u)(a,(e=>e))})),"data-testid":l,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M40.5 22.5H7.5V25.5H40.5V22.5Z",fill:"currentColor"}))}))},8083:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(34164),n=r(96540),s=r(3099),o=r(53231);const a=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:l},c){return n.createElement("svg",{ref:c,"aria-hidden":!t,"aria-label":t,className:(0,i.A)((0,o.C)({align:e,color:r}),(0,s.Fj)({height:(0,s._u)(a,(e=>e))})),"data-testid":l,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24.0336 43C23.4626 43 22.9587 42.7667 22.5893 42.3667L13.856 33.1333C13.0835 32.3 13.0835 31 13.856 30.1667C14.2591 29.7667 14.7629 29.5333 15.3004 29.5333C15.8378 29.5333 16.3752 29.7667 16.7447 30.1667L21.9511 35.7V7.13333C21.9511 5.96667 22.858 5 24 5C25.1421 5 26.049 5.96667 26.049 7.13333V35.7L31.2553 30.1667C31.6584 29.7667 32.1622 29.5333 32.6997 29.5333C33.2371 29.5333 33.7745 29.7667 34.144 30.1667C34.9166 31 34.9166 32.3 34.144 33.1333L25.4444 42.3667C25.0413 42.7667 24.5374 43 24 43H24.0336Z",fill:"currentColor",fillRule:"evenodd"}))}))},40261:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(34164),n=r(96540),s=r(3099),o=r(53231);const a=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:l},c){return n.createElement("svg",{ref:c,"aria-hidden":!t,"aria-label":t,className:(0,i.A)((0,o.C)({align:e,color:r}),(0,s.Fj)({height:(0,s._u)(a,(e=>e))})),"data-testid":l,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24.0329 5C23.4738 5 22.9804 5.23333 22.6186 5.63333L14.0673 14.8667C13.3109 15.7 13.3109 17 14.0673 17.8333C14.462 18.2333 14.9554 18.4667 15.4816 18.4667C16.0078 18.4667 16.5341 18.2333 16.8958 17.8333L21.9937 12.3V40.8667C21.9937 42.0333 22.8818 43 24 43C25.1182 43 26.0063 42.0333 26.0063 40.8667V12.3L31.1041 17.8333C31.4988 18.2333 31.9922 18.4667 32.5184 18.4667C33.0446 18.4667 33.5709 18.2333 33.9327 17.8333C34.6891 17 34.6891 15.7 33.9327 14.8667L25.4143 5.63333C25.0196 5.23333 24.5262 5 24 5H24.0329Z",fill:"currentColor",fillRule:"evenodd"}))}))},56686:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(34164),n=r(96540),s=r(3099),o=r(53231);const a=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:l},c){return n.createElement("svg",{ref:c,"aria-hidden":!t,"aria-label":t,className:(0,i.A)((0,o.C)({align:e,color:r}),(0,s.Fj)({height:(0,s._u)(a,(e=>e))})),"data-testid":l,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M3 24C3 12.45 12.45 3 24 3C35.55 3 45 12.45 45 24C45 35.55 35.55 45 24 45C12.45 45 3 35.55 3 24ZM31.4246 34.253L34.253 31.4246L26.8284 24L34.253 16.5754L31.4246 13.7469L24 21.1716L16.5754 13.7469L13.7469 16.5754L21.1716 24L13.7469 31.4246L16.5754 34.253L24 26.8284L31.4246 34.253Z",fill:"currentColor",fillRule:"evenodd"}))}))}}]);