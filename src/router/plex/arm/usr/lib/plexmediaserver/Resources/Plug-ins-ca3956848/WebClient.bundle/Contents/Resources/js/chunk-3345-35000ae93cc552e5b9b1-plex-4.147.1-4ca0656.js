"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[3345],{88201:(e,t,r)=>{function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{A:()=>n})},98618:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(46772);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.A)("Needs Update"):t.relay?(0,n.A)("Indirect"):t.isPrivate?(0,n.A)("Nearby"):(0,n.A)("Remote"):e.isRelayed?r=(0,n.A)("Indirect"):e.isUnavailable?r=(0,n.A)("Unavailable"):e.isUnauthorized?r=(0,n.A)("Unauthorized"):(s=!0,r=(0,n.A)("Connecting")),{isConnecting:s,status:r}}},93345:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Pt});var n=r(96540),s=r(5386),i=r(57347),o=r(71468),a=r(1081),c=r(28031),l=r(62876);const p=(0,c.A)((0,a.Mz)(l.A,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var d=r(43930),m=r(65468),h=r(59753),f=r(99844),v=r(69182),S=r(75732),y=r(53310),b=r(25473),P=r(81724),I=r(3339),E=r(93788),g=r(50905),x=r(71811),A=r(1250);const N=(0,x.A)(A.A,(({homeSettings:e})=>e)),C=(0,a.Mz)(N,(e=>e.servers),g.A,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}));var O=r(77948),D=r(20163),B=r(34041),w=r(22701),j=r(80305),F=r(65184),k=r(19549),R=r(88050),T=r(46772),H=r(8282),M=r(55730),U=r(92658),z=r(37925),_=Object.defineProperty,W=Object.defineProperties,K=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&J(e,r,t[r]);if(V)for(var r of V(t))q.call(t,r)&&J(e,r,t[r]);return e},Y=(e,t)=>W(e,K(t)),$=(e,t,r)=>(J(e,"symbol"!=typeof t?t+"":t,r),r);class G extends n.Component{constructor(e,t){super(e,t),$(this,"store"),$(this,"unsubscribe"),$(this,"onChange",(e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=Q({},t);r.forEach((t=>{const r=n[t];n[t]=Y(Q({},r),{value:e})})),this.store.dispatch(H.o1.replaceState(n))})),$(this,"onFormStoreChange",(()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})})),this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)X.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&V)for(var n of V(e))t.indexOf(n)<0&&q.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(M.A,Y(Q({},s),{value:this.state.value,onChange:(0,U.A)(this.onChange,r)})):null}}$(G,"contextTypes",{formStore:z.A});const L=G;function Z(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:a,children:c}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),a),n.createElement(f.A,{className:i},c))}Z.defaultProps={className:"FirstRunExperienceActionsContainer-container-ny0mbu",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-VHybrq",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-jyPdKj",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-y2WlYD Scroller-vertical-nKq0Q8"};const ee=Z;var te=r(39439),re=r(37423),ne=r(4590),se=r(94507);const ie={container:"FirstRunExperienceStep-container-CS60ox",actions:"FirstRunExperienceStep-actions-gY3hXF",stepContainer:"FirstRunExperienceStep-stepContainer-wQawUg",stepText:"FirstRunExperienceStep-stepText-NTZbsm",stepHeading:"FirstRunExperienceStep-stepHeading-J6noxn",stepBody:"FirstRunExperienceStep-stepBody-gJiLmC",stepIcon:"FirstRunExperienceStep-stepIcon-Nw5HXA",activeStepIcon:"FirstRunExperienceStep-activeStepIcon-SxIbcv FirstRunExperienceStep-stepIcon-Nw5HXA",stepButton:"FirstRunExperienceStep-stepButton-yDEnXT"};var oe=Object.defineProperty,ae=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,pe=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&pe(e,r,t[r]);if(ae)for(var r of ae(t))le.call(t,r)&&pe(e,r,t[r]);return e},de=(e,t)=>{var r={};for(var n in e)ce.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ae)for(var n of ae(e))t.indexOf(n)<0&&le.call(e,n)&&(r[n]=e[n]);return r};function me(e){const{step:t,isActive:r,onPress:s}=e,i=(0,n.useCallback)((()=>{s(t)}),[s,t]);return n.createElement(ne.A,{className:r?ie.activeStepIcon:ie.stepIcon,onPress:i},t)}function he(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:a,stepHeadingText:c,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:d,component:m,onButtonBackPress:h,onButtonNextPress:f,onStepPress:v}=t,S=de(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),y=te.A.prop("X-Plex-Product");return n.createElement(m,ue({className:r},S),n.createElement("div",{className:s},d),n.createElement("div",{className:i},n.createElement("div",{className:ie.stepText},(0,T.A)("{productName} Setup",{productName:y}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(me,{key:e,isActive:a===e,step:e,onPress:v})))),n.createElement("h3",{className:ie.stepHeading},c),n.createElement("p",{className:ie.stepBody},l),p?n.createElement(re.A,{className:ie.stepButton,onPress:h},p):null,n.createElement(re.A,{className:ie.stepButton,kind:se.jd,type:"submit",onPress:f},u)))}he.defaultProps={className:ie.container,actionsClassName:ie.actions,stepContainerClassName:ie.stepContainer,component:function(e){var t=e,{children:r}=t,s=de(t,["children"]);return n.createElement("div",ue({},s),r)},steps:2,step:1};const fe=he;var ve=r(48724),Se=r(69652);var ye=Object.defineProperty,be=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Ee=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ge=(0,ve.A)((function(e){const t=e,{source:r,name:s}=t,i=((e,t)=>{var r={};for(var n in e)Pe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&be)for(var n of be(e))t.indexOf(n)<0&&Ie.call(e,n)&&(r[n]=e[n]);return r})(t,["source","name"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-ZECmgr",htmlFor:s},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-lbHYK9"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-hvrz7k"},n.createElement(Se.A,{source:r})),r.title),n.createElement(M.A,((e,t)=>{for(var r in t||(t={}))Pe.call(t,r)&&Ee(e,r,t[r]);if(be)for(var r of be(t))Ie.call(t,r)&&Ee(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-luiKcA CheckInput-input-dUDRsF",name:s},i)))})),xe=function(e){const{isPending:t,steps:r,sources:s,hiddenDirectoryIDs:i,onSubmit:o,onButtonBackPress:a,onStepPress:c}=e;return t?n.createElement(v.A,null):n.createElement(fe,{component:H.Ay,step:2,stepBodyText:(0,T.A)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,T.A)("Go Back"):void 0,stepButtonNextText:(0,T.A)("Finish Setup"),stepHeadingText:(0,T.A)("Customize your Media"),steps:r,onButtonBackPress:a,onStepPress:c,onSubmit:o},n.createElement(ee,{rightTitle:s.length?n.createElement(L,{inputClassName:"SelectNavigationStep-input-HAIipV CheckInput-input-dUDRsF",name:"allSources",names:s.map((e=>e.key))}):null,title:(0,T.A)("Pinned Sources")},s.map((e=>n.createElement(ge,{key:e.key,initialValue:!i.includes(e.directoryID),name:e.key,source:e})))))};var Ae=Object.defineProperty,Ne=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,we=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const je=(0,a.Mz)(C,b.A,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),Fe=(0,a.Mz)(I.A,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function ke(e){return t=this,null,r=function*(){try{return(yield R.A.get("/library/sections",{server:(0,k.A)(e),params:{includePreferences:1}})).data.MediaContainer.Directory.reduce(((e,t)=>(t.Preferences.Setting.some((e=>"hidden"===e.id&&"0"!==e.value))&&e.push(t.key),e)),[])}catch(e){return[]}},new Promise(((e,n)=>{var s=e=>{try{o(r.next(e))}catch(e){n(e)}},i=e=>{try{o(r.throw(e))}catch(e){n(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,i);o((r=r.apply(t,null)).next())}));var t,r}function Re(e,t,r,n){return t.reduce(((t,s)=>{const i=(0,F.A)(s),o=(0,j.A)({sourceServer:e,sourceProvider:s,directories:i&&i.directories,hasHybridGuide:r,hasTvodBrowse:n});return t.push(...o),t}),[])}const Te={dispatchSetupSources:m.mc};class He extends n.Component{constructor(e){var t,r;super(e),r=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})},we(this,"symbol"!=typeof(t="onSubmit")?t+"":t,r),this.state={isFetchingHiddenDirectoryIDs:!0,hiddenDirectoryIDs:{}}}componentDidMount(){this.props.server&&ke(this.props.server).then((e=>{this.setState({isFetchingHiddenDirectoryIDs:!1,hiddenDirectoryIDs:e})}))}componentDidUpdate(){this.state.isFetchingHiddenDirectoryIDs&&this.props.server&&ke(this.props.server).then((e=>{this.setState({isFetchingHiddenDirectoryIDs:!1,hiddenDirectoryIDs:e})})),this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)De.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Oe)for(var n of Oe(e))t.indexOf(n)<0&&Be.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(xe,(a=((e,t)=>{for(var r in t||(t={}))De.call(t,r)&&we(e,r,t[r]);if(Oe)for(var r of Oe(t))Be.call(t,r)&&we(e,r,t[r]);return e})({hiddenDirectoryIDs:this.state.hiddenDirectoryIDs,isPending:t||this.state.isFetchingHiddenDirectoryIDs||0===r.length,sources:r},o),c={onSubmit:this.onSubmit},Ne(a,Ce(c))));var a,c}}const Me=(0,o.Ng)((function(){return(0,a.Mz)(C,je,E.A,Fe,A.A,P.A,(0,O.A)(w.$o),((e,t,r,n,s,i,o)=>{const a=Re(e,t,i,o),c=Re(r,n,i,o),{sidebarSettings:{hasCompletedSetup:l}}=s,{watchlistSources:p,otherCloudSources:u}=c.reduce(((e,t)=>(t.providerIdentifier===B.OB&&t.directoryID===D.Ou?e.watchlistSources.push(t):e.otherCloudSources.push(t),e)),{watchlistSources:[],otherCloudSources:[]});return{server:e,isPending:!(!e||e.connectionTestResult!==y.xg.PENDING),sources:[...p,...a,...u],hasCompletedSetup:l}}))}),Te)(He);var Ue=r(5556),ze=r.n(Ue),_e=r(11361),We=r(55826),Ke=r(32485),Ve=r.n(Ke),Xe=r(45315),qe=r(88201),Je=r(98618),Qe=r(75154),Ye=r(24139);var $e=Object.defineProperty,Ge=Object.defineProperties,Le=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,rt=(e,t,r)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const nt=(0,o.Ng)((function(){return(0,_e.A)((0,We.A)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,qe.A)((0,Xe.A)(e),(0,Je.A)(e).status);return n.createElement(ne.A,{className:Ve()("SelectPreferredServerItem-serverButton-VmKM_j",t&&"SelectPreferredServerItem-isSelected-aZkc14",r&&"SelectPreferredServerItem-isUnavailable-govWpw"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-AsWJhf"},n.createElement("span",{className:"SelectPreferredServerItem-title-IPFLVg"},(0,Qe.A)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-QN4Qet"},i)),t?n.createElement(Ye.A,{"aria-label":(0,T.A)("Selected"),className:"SelectPreferredServerItem-serverMenuIcon-mbWPsv"}):null)}));var st;nt.propTypes=(st=((e,t)=>{for(var r in t||(t={}))et.call(t,r)&&rt(e,r,t[r]);if(Ze)for(var r of Ze(t))tt.call(t,r)&&rt(e,r,t[r]);return e})({},nt.propTypes),Ge(st,Le({machineIdentifier:ze().string.isRequired,serverEntityID:ze().string.isRequired})));const it=nt,ot=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(fe,{step:1,stepBodyText:(0,T.A)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,T.A)("Continue"),stepHeadingText:(0,T.A)("Choose your Preferred Server"),onButtonNextPress:i,onStepPress:o},n.createElement(ee,{title:(0,T.A)("Plex Media Servers")},r.map((e=>n.createElement(it,{key:e.entityID,isSelected:t&&t.machineIdentifier===e.machineIdentifier,machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,onPress:s})))))};var at=Object.defineProperty,ct=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,mt=(e,t,r)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ht=(e,t,r)=>(mt(e,"symbol"!=typeof t?t+"":t,r),r);function ft(e,t){return!e&&t.length>0}class vt extends n.Component{constructor(e,t){super(e,t),ht(this,"onNextStepPress",(()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))})),ht(this,"onBackStepPress",(()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))})),ht(this,"onStepPress",(e=>{this.setState({step:e})})),ht(this,"onEndFirstRunExperience",(()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})})),this.state={step:1}}componentDidMount(){(0,h.Cc)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(((e,t)=>ct(e,lt({preferredServerIdentifiers:null})))(((e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&mt(e,r,t[r]);if(pt)for(var r of pt(t))dt.call(t,r)&&mt(e,r,t[r]);return e})({},this.props)))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),ft(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||ft(t,r)?n.createElement(S.A,null,n.createElement(v.A,null)):n.createElement(f.A,{className:"FirstRunExperiencePage-container-dTL3Ek"},1!==i||o?n.createElement(Me,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience,onStepPress:this.onStepPress}):n.createElement(ot,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onSavePreferredServer:s,onStepPress:this.onStepPress}))}}const St=vt,yt={onSavePreferredServer:m.HJ,onEndFirstRunExperience:m.tS,onResetCustomization:m.a5},bt=(0,o.Ng)((function(){return(0,a.Mz)(d.A,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),yt)(St);function Pt(){return n.createElement("div",{className:s.c},n.createElement(i.A,null,n.createElement(bt,null)))}}}]);