"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[2641,8083,2642],{57956:(e,t,r)=>{r.d(t,{A:()=>m});var l=r(96540),n=r(85243),a=Object.defineProperty,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){return l.createElement(n.A,((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(i)for(var r of i(t))c.call(t,r)&&s(e,r,t[r]);return e})({},e))}u.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const m=u},7466:(e,t,r)=>{r.d(t,{A:()=>o});var l=r(1081),n=r(38380),a=r(5634),i=r(30519);const o=(0,a.A)((function(e){return(0,l.Mz)((0,i.A)(e),(e=>e.accounts.slice().sort(n.A)))}))},38380:(e,t,r)=>{r.d(t,{A:()=>n});const l=1;function n(e,t){if(e.id===l)return-1;if(t.id===l)return 1;const r=e.name.trim().toUpperCase(),n=t.name.trim().toUpperCase();return r<n?-1:r>n?1:0}},93558:(e,t,r)=>{r.d(t,{A:()=>c});var l=r(96540),n=r(8083),a=r(40261),i=r(46772);const o={sortDirectionIcon:"IconTableHeaderSortDirection-sortDirectionIcon-lpcD5T"};function c({isAscending:e=!0}){const t=e?n.default:a.default;return l.createElement("div",{className:o.sortDirectionIcon},l.createElement(t,{accessibilityLabel:e?(0,i.A)("Ascending"):(0,i.A)("Descending")}))}},50280:(e,t,r)=>{r.d(t,{A:()=>f});var l=r(96540);const n={tableCell:"TableCell-tableCell-eytlAB",activeTableCell:"TableCell-activeTableCell-KGqIi8 TableCell-tableCell-eytlAB",title:"TableCell-title-swrhIF"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e},p=(e,t)=>i(e,o(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.title,cellClassName:a=n.tableCell,activeCellClassName:i=n.activeTableCell,style:o,component:c,type:s,isActiveSort:u}=t,m=y(t,["className","cellClassName","activeCellClassName","style","component","type","isActiveSort"]);return l.createElement("div",{className:u?i:a,style:o},l.createElement(c,p(d({},m),{className:r})))}},30142:(e,t,r)=>{r.d(t,{A:()=>f});var l=r(96540);const n={tableHeader:"TableHeader-tableHeader-DV7Uvw"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e},p=(e,t)=>i(e,o(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.tableHeader}=t,a=y(t,["className"]);return l.createElement("div",p(d({},a),{className:r}))}},94382:(e,t,r)=>{r.d(t,{A:()=>f});var l=r(96540);const n={tableHeaderCell:"TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB",activeTableHeaderCell:"TableHeaderCell-activeTableHeaderCell-jjqwYB TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e},p=(e,t)=>i(e,o(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.tableHeaderCell,activeClassName:a=n.activeTableHeaderCell,children:i,isActive:o=!1}=t,c=y(t,["className","activeClassName","children","isActive"]);const s=o?a:r;return l.createElement("span",p(d({},c),{className:s}),i)}},3253:(e,t,r)=>{r.d(t,{A:()=>v});var l=r(96540),n=r(19542);const a={tableHeaderLink:"TableHeaderLink-tableHeaderLink-ZM1qnf Link-link-vSsQW1"};var i=Object.defineProperty,o=Object.defineProperties,c=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&d(e,r,t[r]);if(s)for(var r of s(t))m.call(t,r)&&d(e,r,t[r]);return e},y=(e,t)=>o(e,c(t)),f=(e,t)=>{var r={};for(var l in e)u.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&s)for(var l of s(e))t.indexOf(l)<0&&m.call(e,l)&&(r[l]=e[l]);return r};function v(e){var t=e,{className:r=a.tableHeaderLink,children:i}=t,o=f(t,["className","children"]);return l.createElement(n.A,y(p({},o),{className:r}),i)}},87714:(e,t,r)=>{r.d(t,{A:()=>f});var l=r(96540);const n={tableHeaderTitle:"TableHeaderTitle-tableHeaderTitle-YBbHuP"};var a=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&m(e,r,t[r]);return e},p=(e,t)=>i(e,o(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.tableHeaderTitle,children:a}=t,i=y(t,["className","children"]);return l.createElement("span",p(d({},i),{className:r}),a)}},2641:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Xt});var l=r(96540),n=r(84593),a=r(40317),i=r(94772),o=r(32649),c=r(4627),s=r(57122),u=r(54863),m=r(71468),d=r(74125),p=r.n(d),y=r(13600);r(99383);const f="boolean",v="other";var b=Object.defineProperty,A=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))g.call(t,r)&&h(e,r,t[r]);if(A)for(var r of A(t))O.call(t,r)&&h(e,r,t[r]);return e},w=r(39975),C=r(67673);const E=`([^&!=<>]+)(${w.Ay.sort(((e,t)=>t.length-e.length)).map(y.A).join("|")})([^&]+)?`,I=new RegExp(E,"g"),k=new RegExp(E),T={unwatched:!0,unwatchedLeaves:!0,unmatched:!0,duplicate:!0,inProgress:!0,hdonly:!0,hdr:!0};var j=r(59753),S=r(7632),H=r(50421),N=r(89093),x=r(14345),M=r(93915),D=r(90755);const L=S.A.extend({name:"PlayHistoryListItemModel",syncedAttrs:{key:H.A.string,parentKey:H.A.string,grandparentKey:H.A.string,title:H.A.string,parentTitle:H.A.string,grandparentTitle:H.A.string,type:H.A.string,thumb:H.A.string,parentThumb:H.A.string,grandparentThumb:H.A.string,grandparentArt:H.A.string,index:H.A.integer,parentIndex:H.A.integer,originallyAvailableAt:H.A.string,viewedAt:H.A.integer,accountID:H.A.integer,deviceID:H.A.integer},derivedAttrs:{itemKey(){return this.get("key")},id(){return this.cid}}}),R=D.A.extend({name:"PlayHistoryListItemCollection",context:["server"],model:L}),F="viewedAt:desc";S.A.extend({mixins:[N.A],collectionName:"items",name:"PlayHistoryListModel",context:["server","accountID","filters","sort","limit"],responseType:x.Pq,url(){const e=this.filters.reduce(((e,t)=>(e[t.key]=t.value,e)),{});null!=this.accountID&&(e.accountID=this.accountID),null!=this.sort&&(e.sort=this.sort),null!=this.limit&&(e.limit=this.limit);let t=M.A.join("/status/sessions/history/all",e);return t=t.replace("viewedAt=","viewedAt>="),this.getPaginatedUrl(t)},sessionAttrs:{currentPageStart:H.A.integer,currentPageSize:H.A.integer,populatedRange:H.A.object},syncedAttrs:{totalSize:H.A.integer},syncedRelations:{items:{relationClass:R,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()}});var z=r(21351),q=r(32307),U=r(73325),K=r(43597),B=r(12166),V=r(18405);function _(e,t){return!!e&&e.some((e=>e.key===t))}var Z=r(46772),Q=r(48188);var Y=r(1081),W=r(30519);var G=r(85313),$=r(38176),X=r(60137),J=r(25541),ee=r(84416);const te={key:"user",title:()=>(0,Z.A)("User"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.Ss)(),{accountID:n}=t,i=(0,l.useMemo)((()=>((e,t)=>(0,Y.Mz)((0,W.A)(e),(e=>e.accounts.find((e=>e.id===t)))))(r.machineIdentifier,n)),[n,r.machineIdentifier]),o=(0,m.d4)(i);return o?l.createElement("span",{className:e,title:o.name},o.name):l.createElement("span",{className:e},(0,Z.A)("Unknown User"))},style:{flex:"1 1 250px"}},re={key:"type",title:()=>(0,Z.A)("Type"),component:function({className:e,playHistoryItem:t}){const{type:r}=t,n=(0,$.AU)(r);return n?l.createElement("span",{className:e,title:n.title},n.title):null},style:{flex:"0 1 120px"}},le={key:"title",title:()=>(0,Z.A)("Title"),component:function({className:e,playHistoryItem:t}){const r=(0,Q.A)(t);return l.createElement("span",{className:e},l.createElement("div",{className:"PlayHistoryTableTitle-titleContainer-vVYJ11"},l.createElement("span",{className:"PlayHistoryTableTitle-title-KfbuOe",title:r},r)))},style:{flex:"2 0 350px"}},ne={key:"viewedAt",ascKey:"viewedAt",descKey:"viewedAt:desc",title:()=>(0,Z.A)("Played"),component:function({className:e,playHistoryItem:t}){const{viewedAt:r}=t,n=(0,m.d4)(J.A),a=(0,X.A)(1e3*r,`${n} MMM d, yyyy`);return l.createElement("span",{className:e,title:a},a)},style:{flex:"1 1 150px"}},ae={key:"player",title:()=>(0,Z.A)("Player"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.Ss)(),{deviceID:n}=t,i=(0,m.d4)((0,G.A)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.name},i.name):l.createElement("span",{className:e},(0,Z.A)("Unknown"))},style:{flex:"1 1 150px"}},ie={key:"platform",title:()=>(0,Z.A)("Platform"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.Ss)(),{deviceID:n}=t,i=(0,m.d4)((0,G.A)(r.machineIdentifier)).devices.find((e=>e.id===n));return i?l.createElement("span",{className:e,title:i.platform},i.platform):l.createElement("span",{className:e},(0,Z.A)("Unknown"))},style:{flex:"1 1 150px"}},oe=[ne];var ce=r(58686),se=r(5571),ue=r(68003),me=r(84230),de=r(62865);const pe=parseInt(me.A.tableRowHeight,10),ye=(0,de.A)({rowHeight:pe,overscan:20});var fe=r(67687),ve=r(41084),be=r(95989),Ae=r(67056),ge=r(89267);const Oe=(0,Y.Mz)(ge.A,(e=>e.playHistory));var he=r(32485),Pe=r.n(he),we=r(19542),Ce=r(50280),Ee=r(32996),Ie=r(89663);const ke=l.forwardRef((({style:e,cellIndex:t},r)=>l.createElement("div",{ref:r,className:t%2?"PlayHistoryTableRowLoading-alternateLoadingItem-mBL8aM PlayHistoryTableRowLoading-loadingItem-ztQZqS":"PlayHistoryTableRowLoading-loadingItem-ztQZqS",style:e},(0,Z.A)("Loading...")))),Te={clickableItem:"PlayHistoryTableRow-clickableItem-k3zmEO",alternateItem:"PlayHistoryTableRow-alternateItem-l9Zpev",columns:"PlayHistoryTableRow-columns-RnVGEQ Link-link-vSsQW1"};var je=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable,Ne=(e,t)=>{var r={};for(var l in e)Se.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&je)for(var l of je(e))t.indexOf(l)<0&&He.call(e,l)&&(r[l]=e[l]);return r};function xe(e){var t=e,{item:r,activeTableColumns:n}=t,i=Ne(t,["item","activeTableColumns"]);const[o]=(0,a.Ss)(),c=(0,Ee.A)(i);let s;if(null==r?void 0:r.key){const e=n.some((e=>"title"===e.key)),t=r.type===$.Kq?r.parentKey:r.key;s=e?(0,Ie.A)(o,{isLibraryProvider:!0},t):void 0}return r?l.createElement("div",{ref:c.cellRef,className:Pe()(i.cellIndex%2&&Te.alternateItem,s&&Te.clickableItem),style:c.style},l.createElement(we.A,{"aria-label":r.title,className:Te.columns,isDisabled:!s,to:s},n.map((({style:e,component:t},n)=>l.createElement(Ce.A,{key:n,component:t,playHistoryItem:r,style:e}))))):l.createElement(ke,{ref:c.cellRef,cellIndex:i.cellIndex,style:c.style})}const Me={playHistoryListPageContent:"PlayHistoryList-playHistoryListPageContent-ebUqYI PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"};var De=Object.defineProperty,Le=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,Ue=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ke=(e,t)=>{for(var r in t||(t={}))ze.call(t,r)&&Ue(e,r,t[r]);if(Fe)for(var r of Fe(t))qe.call(t,r)&&Ue(e,r,t[r]);return e},Be=(e,t)=>Le(e,Re(t));function Ve({activeTableColumns:e,activeFilters:t,activeSort:r}){const n=(0,m.wA)(),[i]=(0,a.Ss)(),o=(0,m.d4)(Oe),c=(0,m.d4)((0,G.A)(i.machineIdentifier)),{items:s,totalSize:u,isPopulated:d,error:p}=o,{isPopulated:y,error:f}=c,v=(0,l.useCallback)((e=>{n(V.A.actions.fetchRangeRequested(Be(Ke({},e),{server:i,filters:t,sort:r})))}),[n,i,t,r]),b=(0,l.useMemo)((()=>t=>l.createElement(xe,Be(Ke({},t),{activeTableColumns:e}))),[e]);return d&&u&&(y||f)?l.createElement(be.A,{cellComponentFactory:b,className:Me.playHistoryListPageContent,items:s,layout:ye,totalSize:u,onPageRequest:v}):d&&!u?l.createElement(fe.A,{description:(0,Z.A)("Snuggle up on the couch and play something!"),title:(0,Z.A)("Nothing to see here")}):p?l.createElement(ve.A,null):l.createElement(fe.A,null,l.createElement(Ae.A,null))}var _e=r(57956),Ze=r(45091),Qe=r(75331),Ye=r(81863),We=r(77924),Ge=Object.defineProperty,$e=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,rt=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lt=(e,t)=>{for(var r in t||(t={}))et.call(t,r)&&rt(e,r,t[r]);if(Je)for(var r of Je(t))tt.call(t,r)&&rt(e,r,t[r]);return e},nt=(e,t)=>$e(e,Xe(t));function at(e,t,r){if(null==r)return e.filter((e=>e.key!==t));const l=[...e];let n=l.length;for(;n-- >0;){const e=l[n],a=e.key,i=e.value;if(t===a&&r===i)l.splice(n,1);else if(t===a&&Array.isArray(i)){const t=i.indexOf(r);t>-1&&(i.splice(t,1),1===i.length?l.splice(n,1,nt(lt({},e),{value:i[0]})):i.length||l.splice(n,1))}}return l}var it=Object.defineProperty,ot=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mt=(e,t)=>{for(var r in t||(t={}))ct.call(t,r)&&ut(e,r,t[r]);if(ot)for(var r of ot(t))st.call(t,r)&&ut(e,r,t[r]);return e};function dt(e,t,r){const l=[...e],n=l.findIndex((e=>e.key===t)),a=-1===n?0:n,i=mt({key:t},r);return-1===n?l.push(i):l.splice(a,1,i),l}var pt=r(60710),yt=r(92658),ft=r(62321),vt=r(7466),bt=r(3184),At=r(51191),gt=Object.defineProperty,Ot=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,Et=(e,t,r)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,It=(e,t)=>{for(var r in t||(t={}))wt.call(t,r)&&Et(e,r,t[r]);if(Pt)for(var r of Pt(t))Ct.call(t,r)&&Et(e,r,t[r]);return e},kt=(e,t)=>Ot(e,ht(t));let Tt,jt;function St(e,t=window.location.hash){const r=function(e){if(Tt===e)return jt;const t=e.split("?"),r=t.length>1?t[1]:void 0,l=r?M.A.parseParams(r):{};return Tt=e,jt={url:t[0],params:l},jt}(t);return M.A.join(r.url,kt(It({},r.params),{filters:(0,At.A)(e.filters),activeTimePeriod:e.activeTimePeriod,sort:e.sort}))}var Ht=r(14890);function Nt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n]=(0,a.Ss)(),i=(0,ft.A)(),o=(0,bt.A)(),c=(0,l.useMemo)((()=>({key:"",title:(0,Z.A)("All Users")})),[]),s=(0,m.d4)((0,vt.A)(n.machineIdentifier)),u=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:String(t.id),title:t.name}),e)),[c])),[s,c]),d=(0,l.useMemo)((()=>{const t=e.find((e=>"accountID"===e.key));return t?u.find((e=>e.key===t.value)):c}),[e,u,c]),p=(0,l.useCallback)((l=>{let n;n=l?dt(e,ee.o.AccountID,{value:String(l),type:v}):at(e,ee.o.AccountID),window.location.hash=St({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return d&&u.length?l.createElement(l.Fragment,null,l.createElement(Ze.A,{hasMenu:!0,id:i,isMenuOpen:o.isOpen,onPress:o.onToggle},d.title),l.createElement(pt.A,{isOpen:o.isOpen,target:i,onMenuClose:o.onClose},u.map((e=>l.createElement(Ht.A,{key:e.key,isSelected:d.key===e.key,value:e.key,onSelect:(0,yt.A)(p,o.onClose)},e.title))))):null}var xt=r(5634),Mt=r(35832);const Dt=(0,xt.A)((function(e,t){return(0,Y.Mz)((0,Mt.A)(e,t),(e=>e.filter((e=>{const t=e.type?$.AU(e.type):null;return t&&t.typeString!==$.Fd}))))})),Lt="all";function Rt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n,i]=(0,a.Ss)(),o=(0,ft.A)(),c=(0,bt.A)(),s=(0,m.d4)(Dt(n.machineIdentifier,i.identifier)),u=(0,l.useMemo)((()=>({key:Lt,title:(0,Z.A)("All Libraries")})),[]),d=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:t.id,title:t.title}),e)),[u])),[s,u]),p=(0,l.useMemo)((()=>{const t=e.find((e=>"librarySectionID"===e.key));return t&&d.length?d.find((e=>String(e.key)===t.value)):u}),[e,d,u]),y=(0,l.useCallback)((l=>{let n;n=l!==Lt?dt(e,ee.o.LibrarySectionID,{value:l,type:v}):at(e,ee.o.LibrarySectionID),window.location.hash=St({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return p&&s.length?l.createElement(l.Fragment,null,l.createElement(Ze.A,{hasMenu:!0,id:o,isMenuOpen:c.isOpen,onPress:c.onToggle},p.title),l.createElement(pt.A,{isOpen:c.isOpen,target:o,onMenuClose:c.onClose},d.map((e=>l.createElement(Ht.A,{key:e.key,isSelected:p.key===e.key,value:e.key,onSelect:(0,yt.A)(y,c.onClose)},e.title))))):null}var Ft=r(61193);function zt(){const[e]=(0,a.Ss)(),t=(0,ft.A)(),r=(0,bt.A)(),n=(0,m.d4)(Ft.A),i=(0,l.useMemo)((()=>n.reduce(((e,t)=>(t.isFullOwnedServer&&t.isConnected&&e.push({key:t.machineIdentifier,title:t.friendlyName}),e)),[])),[n]),o=(0,l.useMemo)((()=>i.find((t=>t.key===e.machineIdentifier))),[e,i]),c=(0,l.useCallback)((e=>{window.location.hash=(0,We.A)(e)}),[]);return o?l.createElement(l.Fragment,null,l.createElement(Ze.A,{hasMenu:!0,id:t,isMenuOpen:r.isOpen,onPress:r.onToggle},o.title),l.createElement(pt.A,{isOpen:r.isOpen,target:t,onMenuClose:r.onClose},i.map((e=>l.createElement(Ht.A,{key:e.key,isSelected:o.key===e.key,value:e.key,onSelect:(0,yt.A)(c,r.onClose)},e.title))))):null}function qt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const n=(0,ft.A)(),a=(0,bt.A)(),i=[ue.Hr.Week,ue.Hr.Month,ue.Hr.NinetyDays,ue.Hr.Year,ue.Hr.AllTime],o=(0,l.useCallback)((t=>{const l=dt(e,ee.o.ViewedAt,{value:String((0,ue.$i)(t)),type:v});window.location.hash=St({filters:l,activeTimePeriod:t,sort:r})}),[e,r]);return l.createElement(l.Fragment,null,l.createElement(Ze.A,{hasMenu:!0,id:n,isMenuOpen:a.isOpen,onPress:a.onToggle},(0,ue.lV)(t)),l.createElement(pt.A,{isOpen:a.isOpen,target:n,onMenuClose:a.onClose},i.map((e=>l.createElement(Ht.A,{key:e,isSelected:t===e,value:e,onSelect:(0,yt.A)(o,a.onClose)},(0,ue.lV)(e))))))}const Ut=(0,Y.Mz)(Oe,(e=>e.totalSize));function Kt({activeFilters:e,activeFilterTitle:t,activeTimePeriod:r,activeSort:n}){const[i]=(0,a.Ss)(),o=(0,m.d4)(Ut),c=!_(e,ee.o.MetadataItemID);return l.createElement(Ye.A,null,l.createElement(Qe.A,null,l.createElement(Ze.A,{to:(0,We.A)(i.machineIdentifier)},(0,Z.A)("Play History")),t?l.createElement(Ze.A,null,t):null,c?l.createElement(zt,null):null,c?l.createElement(l.Fragment,null,l.createElement(Rt,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(Nt,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(qt,{activeFilters:e,activeSort:n,activeTimePeriod:r})):null,l.createElement(_e.A,null,o)))}var Bt=r(93558),Vt=r(30142),_t=r(94382),Zt=r(3253),Qt=r(87714);const Yt={tableHeader:"PlayHistoryTableHeader-tableHeader-SpG2fq"};function Wt({activeTableColumns:e,activeFilters:t,activeTimePeriod:r,activeSort:n}){return l.createElement(Vt.A,null,e.map((({style:e,title:a,ascKey:i,descKey:o,key:c})=>{if(!i)return l.createElement("div",{key:c,className:Yt.tableHeader,style:e},l.createElement(_t.A,null,l.createElement(Qt.A,null,a())));const s=n===i||n===o,u=n===i;return l.createElement(Zt.A,{key:c,style:e,to:St({filters:t,activeTimePeriod:r,sort:u?o:i})},l.createElement(_t.A,{isActive:s},l.createElement(Qt.A,null,a()),s?l.createElement(Bt.A,{isAscending:!u}):null))})))}const Gt=100;function $t(){var e;const t=(0,m.wA)(),[r]=(0,a.Ss)(),n=(0,i.A)(),o=function(e){if(!e)return[];const t=decodeURIComponent(e).match(I);return t?t.reduce(((e,t)=>{const r=t.match(k),[,l,n,a]=r||[];let i=a?p().uniq(a.split(C.OR)):"";return 1===i.length&&(i=i[0]),function(e,t,r){const l=[...e];if(r.type===f){const e=p().findIndex(l,(e=>e.key===t)),n=-1===e?0:e,a=P({key:t},r);-1===e?l.push(a):l.splice(n,1,a)}else p().findWhere(l,{key:t,value:r.value})||l.push(P({key:t},r));return l}(e,l,{value:i,type:T[l]?f:v,operator:n})}),[]):[]}(n.filters),c=(0,s.A)(n.filterTitle),u=null!=(e=(0,ce.ie)(ue.Hr).find((e=>e===(0,s.A)(n.activeTimePeriod))))?e:ue.Hr.AllTime,d=n.sort?(0,s.A)(n.sort):F,y=(0,se.A)(n.isParentType),b=function(e,t){let r=[ae,ie,...oe];return!t&&_(e,ee.o.MetadataItemID)||(r=[le,...r]),_(e,ee.o.LibrarySectionID)||_(e,ee.o.MetadataItemID)||(r=[re,...r]),_(e,ee.o.AccountID)||(r=[te,...r]),r}(o,y);return(0,U.A)(),(0,l.useEffect)((()=>{t(q.A.actions.populateRequested({server:r})),t(z.A.actions.populateRequested({server:r}))}),[t,r]),(0,l.useEffect)((()=>((0,j.Cc)((()=>{t(V.A.actions.fetchRangeRequested({server:r,filters:o,sort:d,startIndex:0,size:Gt}))})),()=>{t(V.A.actions.reset())})),[o,d,t,r]),l.createElement(K.A,{scrollDirection:B.D.None},l.createElement(Kt,{activeFilterTitle:c,activeFilters:o,activeSort:d,activeTimePeriod:u}),l.createElement(Wt,{activeFilters:o,activeSort:d,activeTableColumns:b,activeTimePeriod:u}),l.createElement(Ve,{activeFilters:o,activeSort:d,activeTableColumns:b}))}function Xt(){const{machineIdentifier:e,providerIdentifier:t}=(0,c.A)(),r=(0,i.A)();return l.createElement(a.Ay,{machineIdentifier:e,providerIdentifier:t},l.createElement(u.A,{machineIdentifier:e,providerIdentifier:t},l.createElement(o.Ay,{metricsContext:(0,s.A)(r.context),metricsPage:n.eC},l.createElement($t,null))))}},8083:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var l=r(34164),n=r(96540),a=r(3099),i=r(53231);const o=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:o="inherit",testID:c},s){return n.createElement("svg",{ref:s,"aria-hidden":!t,"aria-label":t,className:(0,l.A)((0,i.C)({align:e,color:r}),(0,a.Fj)({height:(0,a._u)(o,(e=>e))})),"data-testid":c,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24.0336 43C23.4626 43 22.9587 42.7667 22.5893 42.3667L13.856 33.1333C13.0835 32.3 13.0835 31 13.856 30.1667C14.2591 29.7667 14.7629 29.5333 15.3004 29.5333C15.8378 29.5333 16.3752 29.7667 16.7447 30.1667L21.9511 35.7V7.13333C21.9511 5.96667 22.858 5 24 5C25.1421 5 26.049 5.96667 26.049 7.13333V35.7L31.2553 30.1667C31.6584 29.7667 32.1622 29.5333 32.6997 29.5333C33.2371 29.5333 33.7745 29.7667 34.144 30.1667C34.9166 31 34.9166 32.3 34.144 33.1333L25.4444 42.3667C25.0413 42.7667 24.5374 43 24 43H24.0336Z",fill:"currentColor",fillRule:"evenodd"}))}))},40261:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var l=r(34164),n=r(96540),a=r(3099),i=r(53231);const o=(0,n.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:o="inherit",testID:c},s){return n.createElement("svg",{ref:s,"aria-hidden":!t,"aria-label":t,className:(0,l.A)((0,i.C)({align:e,color:r}),(0,a.Fj)({height:(0,a._u)(o,(e=>e))})),"data-testid":c,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24.0329 5C23.4738 5 22.9804 5.23333 22.6186 5.63333L14.0673 14.8667C13.3109 15.7 13.3109 17 14.0673 17.8333C14.462 18.2333 14.9554 18.4667 15.4816 18.4667C16.0078 18.4667 16.5341 18.2333 16.8958 17.8333L21.9937 12.3V40.8667C21.9937 42.0333 22.8818 43 24 43C25.1182 43 26.0063 42.0333 26.0063 40.8667V12.3L31.1041 17.8333C31.4988 18.2333 31.9922 18.4667 32.5184 18.4667C33.0446 18.4667 33.5709 18.2333 33.9327 17.8333C34.6891 17 34.6891 15.7 33.9327 14.8667L25.4143 5.63333C25.0196 5.23333 24.5262 5 24 5H24.0329Z",fill:"currentColor",fillRule:"evenodd"}))}))}}]);